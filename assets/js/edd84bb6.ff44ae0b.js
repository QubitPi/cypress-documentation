"use strict";(self.webpackChunkcypress_docusaurus_ts=self.webpackChunkcypress_docusaurus_ts||[]).push([[6380],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>y});var o=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var a=o.createContext({}),p=function(e){var t=o.useContext(a),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=p(e.components);return o.createElement(a.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,a=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=p(n),d=i,y=m["".concat(a,".").concat(d)]||m[d]||c[d]||r;return n?o.createElement(y,s(s({ref:t},u),{},{components:n})):o.createElement(y,s({ref:t},u))}));function y(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,s=new Array(r);s[0]=d;var l={};for(var a in t)hasOwnProperty.call(t,a)&&(l[a]=t[a]);l.originalType=e,l[m]="string"==typeof e?e:i,s[1]=l;for(var p=2;p<r;p++)s[p]=n[p];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2347:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>s,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var o=n(7462),i=(n(7294),n(3905));const r={title:"Styling Components",sidebar_position:20},s=void 0,l={unversionedId:"guides/component-testing/styling-components",id:"guides/component-testing/styling-components",title:"Styling Components",description:"What you'll learn",source:"@site/docs/guides/component-testing/styling-components.mdx",sourceDirName:"guides/component-testing",slug:"/guides/component-testing/styling-components",permalink:"/cypress-documentation/guides/component-testing/styling-components",draft:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/guides/component-testing/styling-components.mdx",tags:[],version:"current",sidebarPosition:20,frontMatter:{title:"Styling Components",sidebar_position:20},sidebar:"guides",previous:{title:"Overview",permalink:"/cypress-documentation/guides/component-testing/overview"},next:{title:"Configuration",permalink:"/cypress-documentation/guides/component-testing/component-framework-configuration"}},a={},p=[{value:"Component Support File",id:"Component-Support-File",level:2},{value:"3rd Party CSS Libraries (Tailwind, Bootstrap, PopperJS)",id:"3rd-Party-CSS-Libraries-Tailwind-Bootstrap-PopperJS",level:2},{value:"Why Test Your Component&#39;s Styles?",id:"Why-Test-Your-Components-Styles",level:2},{value:"Importing Stylesheets",id:"Importing-Stylesheets",level:2},{value:"Rules for Setting Up Your Styles",id:"Rules-for-Setting-Up-Your-Styles",level:2},{value:"Global App Styles",id:"Global-App-Styles",level:3},{value:"CSS Reset or Normalize isn&#39;t applied",id:"CSS-Reset-or-Normalize-isnt-applied",level:3},{value:"Fonts: Everything is rendering in Times New Roman",id:"Fonts-Everything-is-rendering-in-Times-New-Roman",level:3},{value:"Icon Fonts: None of my icons are rendering",id:"Icon-Fonts-None-of-my-icons-are-rendering",level:3},{value:"Theme Providers: My components don&#39;t look right/compile because they can&#39;t access providers",id:"Theme-Providers-My-components-dont-look-rightcompile-because-they-cant-access-providers",level:3}],u=(m="Icon",function(e){return console.warn("Component "+m+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",e)});var m;const c={toc:p};function d(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("h2",{parentName:"admonition",id:"What-youll-learn"},(0,i.kt)(u,{name:"graduation-cap",mdxType:"Icon"})," What you'll learn"),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},"How to load CSS libraries like Tailwind or Bootstrap"),(0,i.kt)("li",{parentName:"ul"},"How to render icon fonts like Font Awesome"),(0,i.kt)("li",{parentName:"ul"},"Where to import your application's global stylesheets"),(0,i.kt)("li",{parentName:"ul"},"How to use ",(0,i.kt)("inlineCode",{parentName:"li"},"indexHtmlFile")," to define a custom DOM mounting point"))),(0,i.kt)("h1",{id:"Rendering-Components-Correctly"},"Rendering Components Correctly"),(0,i.kt)("p",null,"The first time you mount ",(0,i.kt)("em",{parentName:"p"},"any")," new component, you may notice that the component\ndoesn't look like it should. Unless your application is written ",(0,i.kt)("em",{parentName:"p"},"exclusively"),"\nusing Component-scoped CSS (e.g. Styled Components or Vue's Scoped Styles) you\nwill need to follow this guide in order to get your component looking ",(0,i.kt)("strong",{parentName:"p"},"and\nbehaving")," like it will in production."),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Ensure that whatever you're doing in production is happening within either the\nComponent HTML file or the Component Support File.")),(0,i.kt)("h2",{id:"Component-Support-File"},"Component Support File"),(0,i.kt)("p",null,"When you load a component or end-to-end spec file, it will first load something\ncalled a supportFile. By default, this is created for you during first-time\nsetup of Cypress Component Testing and is located at\n",(0,i.kt)("inlineCode",{parentName:"p"},"cypress/support/component.js"),". This file gives you the opportunity to set up\nyour spec's environment."),(0,i.kt)("p",null,"For component specs, you use this file to set up page-level concerns that would\nusually exist by the time you mount the component. Some examples include:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Run-time JavaScript code (state management, routers, UI libraries)"),(0,i.kt)("li",{parentName:"ol"},"Global styles (style resets, Tailwind)")),(0,i.kt)("p",null,"As a rule, your Component Support File should look ",(0,i.kt)("strong",{parentName:"p"},"very similar")," to your\napplication's main JavaScript (ie: main.js, index.js) and main CSS (ie:\nmain.css, index.css) files."),(0,i.kt)("h2",{id:"3rd-Party-CSS-Libraries-Tailwind-Bootstrap-PopperJS"},"3rd Party CSS Libraries (Tailwind, Bootstrap, PopperJS)"),(0,i.kt)("p",null,"Components can have three parts: markup, styles, and script logic. All three of\nthese work together in order to deliver a working component."),(0,i.kt)("p",null,"Styles are business logic, too."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Tailwind"),(0,i.kt)("li",{parentName:"ol"},"CSS Modules"),(0,i.kt)("li",{parentName:"ol"},"Scoped Styled"),(0,i.kt)("li",{parentName:"ol"},"Styled Components"),(0,i.kt)("li",{parentName:"ol"},"Regular Stylesheets"),(0,i.kt)("li",{parentName:"ol"},"UI Libraries")),(0,i.kt)("p",null,"This guide will help you setup your test infrastructure to render your\ncomponent's styles properly."),(0,i.kt)("p",null,"Depending on how your application is built, the first time you mount a new\ncomponent, it may be completely or somewhat unstyled."),(0,i.kt)("p",null,"This makes sense. Many applications have some amount of one-time setup that is\nrun outside of the component file."),(0,i.kt)("p",null,"We build our applications within the context that they're supposed to run in,\nand we make assumptions that our components will always be rendered within a\nroot-level component (such as an ",(0,i.kt)("inlineCode",{parentName:"p"},"<App>"),") or a top-level selector with style\nrules (such as ",(0,i.kt)("inlineCode",{parentName:"p"},"#app { /* styles in here */ }")," )"),(0,i.kt)("p",null,"When we attempt to isolate our component to put it under test, we need to put\nthat environment back together. We'll go into that in a moment. First, let's\ntalk about stylesheets, testing, and one of Cypress's biggest differences in\ncontrast to other component testing tools."),(0,i.kt)("h2",{id:"Why-Test-Your-Components-Styles"},"Why Test Your Component's Styles?"),(0,i.kt)("p",null,"Stylesheets are a critical part of your component's business logic. One of the\nbest examples of this is a modal component. Common modal bugs include: z-index\nissues, inability to dismiss the overlay, and inability to interact with the\nparent page ",(0,i.kt)("em",{parentName:"p"},"after")," dismissing the modal."),(0,i.kt)("p",null,"Node-based test runners like Jest or Vitest can't catch these kinds of issues\nbecause they render your styles in ",(0,i.kt)("strong",{parentName:"p"},"emulated DOM environments")," like JSDom.\nJSDom doesn't have a box model and certain kinds of assertions, such as if a\nparent is covering a child and preventing clicks, are not possible to test\nwithout a more realistic environment."),(0,i.kt)("p",null,"On the other hand, browser-based runners like Cypress allow you to render your\napplication's styles and components and allow Cypress's Driver to take advantage\nof the real box-model and style rendering engine. Cypress's commands like\n",(0,i.kt)("inlineCode",{parentName:"p"},"cy.click")," and assertions like ",(0,i.kt)("inlineCode",{parentName:"p"},"should('be.visible')")," have business logic that\nmakes sure the UI you're trying to assert on and interact with is visible and\ninteractible for your end users. This is a benefit unique to browser-based test\nrunners."),(0,i.kt)("h2",{id:"Importing-Stylesheets"},"Importing Stylesheets"),(0,i.kt)("p",null,"Each application or component library imports styles a little differently. We'll\ngo over a few methods and describe how you can quickly restructure your\ncomponents to become more testable."),(0,i.kt)("p",null,"If you do not follow this guide, your components will mount, but they won't look\ncorrect and you may not be able to benefit from some of the most valuable parts\nof Cypress. Namely, implicit checks for width, height, and overflow to ensure\nthat your components not only exist in the page's HTML but are also visible."),(0,i.kt)("h2",{id:"Rules-for-Setting-Up-Your-Styles"},"Rules for Setting Up Your Styles"),(0,i.kt)("p",null,"All of your application's styles need to end up in Cypress so that when your\ncomponent mounts, it looks right."),(0,i.kt)("p",null,"We expose two hooks for you to configure your styles:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"An HTML file called ",(0,i.kt)("inlineCode",{parentName:"li"},"cypress/support/component-index.html")),(0,i.kt)("li",{parentName:"ol"},"A JavaScript support file called ",(0,i.kt)("inlineCode",{parentName:"li"},"cypress/support/component.js"))),(0,i.kt)("p",null,"When creating a production-like test environment, you should ",(0,i.kt)("em",{parentName:"p"},"always")," mimic your\nown application's setup. If your application has multiple ",(0,i.kt)("inlineCode",{parentName:"p"},"<link>")," tags to load\nfonts or other stylesheets within the ",(0,i.kt)("inlineCode",{parentName:"p"},"head"),", ensure that the\n",(0,i.kt)("inlineCode",{parentName:"p"},"cypress/support/component-index.html")," file contains the same ",(0,i.kt)("inlineCode",{parentName:"p"},"<link>")," tags. The\nsame logic follows for any styles loaded in your Application's ",(0,i.kt)("inlineCode",{parentName:"p"},"main.js")," file.\nIf you import a ",(0,i.kt)("inlineCode",{parentName:"p"},"./styles.css")," at the top of your ",(0,i.kt)("inlineCode",{parentName:"p"},"main.js")," file, make sure to\nimport it in your ",(0,i.kt)("inlineCode",{parentName:"p"},"cypress/support/component.js")," file."),(0,i.kt)("p",null,"For this reason, it's strongly suggested to make a ",(0,i.kt)("inlineCode",{parentName:"p"},"src/setup.js")," file that will\nbe re-used in your ",(0,i.kt)("inlineCode",{parentName:"p"},"main.js")," entrypoint as well as in your test setup. An\nexample project structure would look like so:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"> /cypress\n>   /support\n>    /component.js\n> /src\n>  /main.js\n>  /main.css\n>  /setup.js\n")),(0,i.kt)("p",null,"The contents of ",(0,i.kt)("strong",{parentName:"p"},"setup.js")," may look like so:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import '~normalize/normalize.css'\nimport 'font-awesome'\nimport './main.css'\n\nexport const createStore = () => {\n  return /* store */\n}\n\nexport const createRouter = () => {\n  return /* router */\n}\n\nexport const createApp = () => {\n  return <App router={createRouter()} store={createStore()}></App>\n}\n")),(0,i.kt)("p",null,"and its usage in ",(0,i.kt)("inlineCode",{parentName:"p"},"main.js")," could look like so:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import { createApp } from './setup.js'\n\nReactDOM.render(createApp())\n")),(0,i.kt)("p",null,"and Cypress would re-use it in its support file"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"/* And that's it! */\nimport '../../src/setup.js'\n")),(0,i.kt)("p",null,"The rest of this section is dedicated to discussing specific style problems you\nmay have, including: Fonts, Icon Fonts, Style Resets, Global App Styles, and 3rd\nparty component library styles."),(0,i.kt)("h3",{id:"Global-App-Styles"},"Global App Styles"),(0,i.kt)("p",null,"Your global application styles are usually in one of the following places:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"A ",(0,i.kt)("inlineCode",{parentName:"li"},"styles.css")," file you import within the ",(0,i.kt)("inlineCode",{parentName:"li"},"head")," of your application.")),(0,i.kt)("p",null,"This should be loaded within your Cypress Index HTML file."),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Within a root-level component like ",(0,i.kt)("inlineCode",{parentName:"li"},"App.jsx"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"App.vue"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"App.svelte"),", etc.")),(0,i.kt)("p",null,"Decouple your Root CSS from your App or Entrypoint component by pulling out\nthese global styles into a top-level stylesheet. Both Vue and Svelte embed\nglobal application styles into the main entry point components. The rest of your\napplication expects to be rendered ",(0,i.kt)("em",{parentName:"p"},"within")," those components, and so any\nassumptions you made when writing those components must be replicated in your\ntest environment or else your components won't look right."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"<style>\n  /* In certain scaffolds, the App.vue file does not have a separate styles file */\n\n  #app {\n    font-family: Sans-serif;\n  }\n</style>\n")),(0,i.kt)("p",null,"Should become"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'/* App.vue */ <style src="./app.css" />\n')),(0,i.kt)("p",null,"and"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"/* cypress/support/component.js */ import '../../src/app.css'\n")),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"Within the ",(0,i.kt)("inlineCode",{parentName:"li"},"main.js")," file of your application (which subsequently mounts your\nroot-level component).")),(0,i.kt)("p",null,"Re-using stylesheets that are imported in the beginning of your application was\ncovered in the last section."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import './main.css'\n")),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},"Within a configuration file like ",(0,i.kt)("inlineCode",{parentName:"li"},"next.config.js")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"nuxt.config.js"),".")),(0,i.kt)("p",null,"You're usually providing public paths to these stylesheets. You can import the\nsame paths within your ",(0,i.kt)("inlineCode",{parentName:"p"},"cypress/support/component-index.html")," file."),(0,i.kt)("h3",{id:"CSS-Reset-or-Normalize-isnt-applied"},"CSS Reset or Normalize isn't applied"),(0,i.kt)("p",null,"Are you importing your normalize file within\n",(0,i.kt)("inlineCode",{parentName:"p"},"cypress/support/component-index.html")," or within ",(0,i.kt)("inlineCode",{parentName:"p"},"cypress/support/component.js"),"?"),(0,i.kt)("h3",{id:"Fonts-Everything-is-rendering-in-Times-New-Roman"},"Fonts: Everything is rendering in Times New Roman"),(0,i.kt)("p",null,"Most applications handle fonts in one of two ways."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Your ",(0,i.kt)("inlineCode",{parentName:"li"},"index.html")," loads external fonts in the ",(0,i.kt)("inlineCode",{parentName:"li"},"head")," tag.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<head>\n  <link rel="preconnect" href="https://fonts.googleapis.com" />\n  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />\n  <link\n    href="https://fonts.googleapis.com/css2?family=Readex+Pro:wght@200;300;400;500;600;700&family=Roboto&display=swap"\n    rel="stylesheet"\n  />\n</head>\n')),(0,i.kt)("p",null,"Or via an ",(0,i.kt)("inlineCode",{parentName:"p"},"@import")," statement"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"<head>\n  <style>\n    @import url('https://fonts.googleapis.com/css2?family=Readex+Pro:wght@200;300;400;500;600;700&family=Roboto&display=swap');\n  </style>\n</head>\n")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Your main stylesheet loads fonts")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-css"},"/* main.css */\n@font-face {\n  font-family: 'Fira Sans';\n  src: url('fonts/fira/eot/FiraSans-Regular.eot');\n  src: url('fonts/fira/eot/FiraSans-Regular.eot') format('embedded-opentype'), url('fonts/fira/woff2/FiraSans-Regular.woff2')\n      format('woff2'),\n    url('fonts/fira/woff/FiraSans-Regular.woff') format('woff'), url('fonts/fira/woff2/FiraSans-Regular.ttf')\n      format('truetype');\n  font-weight: normal;\n  font-style: normal;\n}\n")),(0,i.kt)("h3",{id:"Icon-Fonts-None-of-my-icons-are-rendering"},"Icon Fonts: None of my icons are rendering"),(0,i.kt)("h3",{id:"Theme-Providers-My-components-dont-look-rightcompile-because-they-cant-access-providers"},"Theme Providers: My components don't look right/compile because they can't access providers"),(0,i.kt)("p",null,"Theme Provider or other application-level wrappers like I18n or Material UI work\nby injecting themselves around your application. When you're component testing,\nyou haven't rendered the component hierarchy surrounding your component."),(0,i.kt)("p",null,"To solve issues like these, people review the Custom Commands and Wrappers"),(0,i.kt)("p",null,"To first explain why it's not right, you first have to explain what\nproduction-like even means."),(0,i.kt)("p",null,"So we have this before & after up, and now our job is to step through the\ncomponent under test and try to figure out where the differences between\nProduction and Test are."),(0,i.kt)("p",null,"Sometimes these are as simple as colors or fonts not lining up. Other times, the\nentire component or sections of it may not compile."),(0,i.kt)("p",null,"The reason this doesn't look right is because:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"My browser supports dark mode"),(0,i.kt)("li",{parentName:"ol"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"<App>")," component provides its own styles")))}d.isMDXComponent=!0}}]);