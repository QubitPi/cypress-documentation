"use strict";(self.webpackChunkcypress_docusaurus_ts=self.webpackChunkcypress_docusaurus_ts||[]).push([[7714],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(n),m=i,h=p["".concat(l,".").concat(m)]||p[m]||d[m]||r;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:i,o[1]=s;for(var u=2;u<r;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2505:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>u});var a=n(7462),i=(n(7294),n(3905));const r={title:"Smart Orchestration",sidebar_position:40},o=void 0,s={unversionedId:"guides/cloud/smart-orchestration",id:"guides/cloud/smart-orchestration",title:"Smart Orchestration",description:"Cypress Cloud provides four distinct Smart Orchestration features for use in CI",source:"@site/docs/guides/cloud/smart-orchestration.mdx",sourceDirName:"guides/cloud",slug:"/guides/cloud/smart-orchestration",permalink:"/cypress-documentation/guides/cloud/smart-orchestration",draft:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/guides/cloud/smart-orchestration.mdx",tags:[],version:"current",sidebarPosition:40,frontMatter:{title:"Smart Orchestration",sidebar_position:40},sidebar:"guides",previous:{title:"Runs",permalink:"/cypress-documentation/guides/cloud/runs"},next:{title:"Flaky Test Management",permalink:"/cypress-documentation/guides/cloud/flaky-test-management"}},l={},u=[{value:"Spec Prioritization",id:"Spec-Prioritization",level:2},{value:"Activate Spec Prioritization in Cypress Cloud",id:"Activate-Spec-Prioritization-in-Cypress-Cloud",level:3},{value:"Auto Cancellation",id:"Auto-Cancellation",level:2},{value:"Activate Auto Cancellation in Cypress Cloud",id:"Activate-Auto-Cancellation-in-Cypress-Cloud",level:3},{value:"Specifying failures before auto canceling in the CLI",id:"Specifying-failures-before-auto-canceling-in-the-CLI",level:3}],c=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",t)},p=c("Icon"),d=c("DocsImage"),m={toc:u};function h(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Cypress Cloud provides four distinct Smart Orchestration features for use in CI\nto speed up test runs, accelerate debugging workflows, and reduce costs:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/guides/guides/parallelization"},"Parallelization"),": Reduce test duration by\nrunning multiple test spec files simultaneously across available CI machines."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/guides/guides/parallelization#Balance-strategy"},"Load Balancing"),": Optimize CI\nresources and minimize test duration by intelligently prioritizing running of\ntest spec files during parallelization."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#Spec-Prioritization"},"Spec Prioritization"),": Quickly verify that your latest\nchanges fixed a build by prioritizing the specs that failed in the previous\nCypress run."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#Auto-Cancellation"},"Auto Cancellation"),": Save on CI resources by automatically\ncanceling a Cypress run upon the first test failure.")),(0,i.kt)("h2",{id:"Spec-Prioritization"},"Spec Prioritization"),(0,i.kt)("p",null,"It is often helpful to be ",(0,i.kt)("strong",{parentName:"p"},"aware of test failures earlier within a CI test run\nso that debugging and iterations can resume and progress much faster"),". Being\nable to catch issues sooner within the CI process can save valuable time in\ntroubleshooting failures and deploying fixes."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("strong",null,(0,i.kt)(p,{name:"graduation-cap",mdxType:"Icon"})," Consider the Scenario"),(0,i.kt)("p",{parentName:"admonition"},"For example, you have a test suite consisting of several spec files that take 30\nminutes to execute, but failures start to occur within one spec at the 20 minute\nmarker. A subsequent code change aimed at resolving the issue will have to be\nvalidated after running the CI build and waiting 20 minutes. This process and\nwaiting continues until the issue is fixed."),(0,i.kt)("p",{parentName:"admonition"},"By running failed specs first, the issues can be surfaced earlier and reduce\nthat 20 minute wait to potentially a few minutes. ",(0,i.kt)("strong",{parentName:"p"},"Considering that a test\nsuite has multiple spec files, this orchestration strategy will always save\ntime."))),(0,i.kt)("h3",{id:"Activate-Spec-Prioritization-in-Cypress-Cloud"},"Activate Spec Prioritization in Cypress Cloud"),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("strong",null,(0,i.kt)(p,{name:"star",mdxType:"Icon"})," Premium Cypress Cloud Feature"),(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("strong",{parentName:"p"},"Spec Prioritization")," is a ",(0,i.kt)("em",{parentName:"p"},"Smart Orchestration")," feature available to users\nwith a\n",(0,i.kt)("a",{parentName:"p",href:"https://cypress.io/pricing"},"Business or Enterprise tier Cypress Cloud plan"),".\nWondering if upgrading your Team tier subscription is worth it? Check out the\n",(0,i.kt)("a",{parentName:"p",href:"/guides/cloud/runs#Recommendations"},"recommendations")," on the run overview page\nto see how much time we predict these features would save you.")),(0,i.kt)("p",null,"Spec Prioritization is a ",(0,i.kt)("em",{parentName:"p"},"Smart Orchestration")," feature that is managed within a\nproject's settings."),(0,i.kt)("p",null,"To enable or disable this feature at the Project level (must be an admin user):"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Select the desired project within Projects view to visit Cypress Cloud."),(0,i.kt)("li",{parentName:"ol"},'Click "Project Settings" with the right-hand sidebar.'),(0,i.kt)("li",{parentName:"ol"},"Scroll to the Smart Orchestration section within Project Settings page."),(0,i.kt)("li",{parentName:"ol"},'Toggle "Spec Prioritization".')),(0,i.kt)(d,{src:"/img/guides/cloud/smart-orchestration/spec-prioritization-active.png",alt:"Enable Spec Prioritization",mdxType:"DocsImage"}),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("strong",null,"CI Tip: Reduce Costs"),(0,i.kt)("p",{parentName:"admonition"},"Note that Spec Prioritization ",(0,i.kt)("strong",{parentName:"p"},"alone")," will not save time as it purely alters\nthe order in which specs are run. However, when used in tandem with\n",(0,i.kt)("a",{parentName:"p",href:"#Auto-Cancellation"},"Auto Cancellation")," it can result in shorter test runs due\nto cancellation being triggered earlier, leading to significantly reduced CI\ncosts.")),(0,i.kt)("h2",{id:"Auto-Cancellation"},"Auto Cancellation"),(0,i.kt)("p",null,"Continuous Integration (CI) pipelines are typically costly processes that can\ndemand significant compute time. ",(0,i.kt)("strong",{parentName:"p"},"When a test failure occurs in CI, it often\ndoes not make sense to continue running the remainder of a test suite")," since\nthe process has to start again upon merging of subsequent fixes and other code\nchanges. When Auto Cancellation is enabled, once the number of failed tests goes\nover a preset threshold, the entire test run is canceled. Note that any\nin-progress specs will continue to run to completion."),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("strong",null,(0,i.kt)(p,{name:"check",mdxType:"Icon"})," Benefits"),(0,i.kt)("p",{parentName:"admonition"},"Canceling an ",(0,i.kt)("strong",{parentName:"p"},"entire")," test run, even if parallelized, upon the first test\nfailure will:"),(0,i.kt)("ol",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Save time"),". Resolve test outcomes faster."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Reduce CI costs"),". These cost savings can be significant for large test\nsuites."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Free-up CI resources")," for validating fixes, and helping other users."))),(0,i.kt)("h3",{id:"Activate-Auto-Cancellation-in-Cypress-Cloud"},"Activate Auto Cancellation in Cypress Cloud"),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("strong",null,(0,i.kt)(p,{name:"star",mdxType:"Icon"})," Premium Cypress Cloud Feature"),(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("strong",{parentName:"p"},"Auto Cancellation")," is a ",(0,i.kt)("em",{parentName:"p"},"Smart Orchestration")," feature available to users with\na ",(0,i.kt)("a",{parentName:"p",href:"https://cypress.io/pricing"},"Business or Enterprise tier Cypress Cloud plan"),".\nWondering if upgrading your Team tier subscription is worth it? Check out the\n",(0,i.kt)("a",{parentName:"p",href:"/guides/cloud/runs#Recommendations"},"recommendations")," on the run overview page\nto see how much time we predict these features would save you.")),(0,i.kt)("p",null,"Auto Cancellation is a ",(0,i.kt)("em",{parentName:"p"},"Smart Orchestration")," feature that is managed within a\nproject's settings."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("strong",null,"Consideration for Teams"),(0,i.kt)("p",{parentName:"admonition"},"If your development, testing, or QA teams operate in a highly collaborative\nworkflow where multiple people are working on various test failures at the same\ntime, it may be helpful to increase the failures threshold or even disable Auto\nCancellation altogether, so multiple failing tests can be surfaced for each test\nrun.")),(0,i.kt)("p",null,"To enable or disable this feature at the Project level (must be an admin user):"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Select the desired project within Projects view to visit Cypress Cloud."),(0,i.kt)("li",{parentName:"ol"},'Click "Project Settings" with the right-hand sidebar.'),(0,i.kt)("li",{parentName:"ol"},"Scroll to the Smart Orchestration section within Project Settings page."),(0,i.kt)("li",{parentName:"ol"},'Toggle "Auto Cancellation".'),(0,i.kt)("li",{parentName:"ol"},'Set the "failures before auto canceling" threshold (or just leave it at the\ndefault value of 1).')),(0,i.kt)(d,{src:"/img/guides/cloud/smart-orchestration/auto-cancellation-active.png",alt:"Enable Auto Cancellation",mdxType:"DocsImage"}),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("strong",null,"CI Tip: Save Time"),(0,i.kt)("p",{parentName:"admonition"},"In addition to Auto Cancellation, consider reducing CI costs further by enabling\n",(0,i.kt)("a",{parentName:"p",href:"#Spec-Prioritization"},"Spec Prioritization")," to surface test failures earlier in\nthe run, and reduce the time it takes to fix issues and deploy changes.")),(0,i.kt)("h3",{id:"Specifying-failures-before-auto-canceling-in-the-CLI"},"Specifying failures before auto canceling in the CLI"),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"auto-cancel-after-failures")," flag in the CLI is only available in Cypress\n12.6.0 and later. Including the flag in an older version will throw an error.")),(0,i.kt)("p",null,"With the Cypress CLI, you can specify the number of test failures to execute\nbefore canceling the run via a command flag. This allows more granular control\nof Auto Cancellation on a per-run basis."),(0,i.kt)("p",null,"Some common use cases for doing so might be:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Setting a lower-than-normal value on dev environments to fail a test suite\nearly for faster feedback"),(0,i.kt)("li",{parentName:"ul"},"Disabling Auto Cancellation on important branches that need the full test\nsuite to run every time"),(0,i.kt)("li",{parentName:"ul"},"Overriding the project value on a case-by-case basis")),(0,i.kt)("p",null,"Specifying the flag will override the project setting in Cypress Cloud, and not\nspecifying it will default to the value in the project settings."),(0,i.kt)("p",null,"To set it, pass the ",(0,i.kt)("inlineCode",{parentName:"p"},"--auto-cancel-after-failures")," flag to the ",(0,i.kt)("inlineCode",{parentName:"p"},"cypress run"),"\ncommand, and give it a numeric value:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"npx cypress run --record --key <<your_record_key>> --auto-cancel-after-failures 1\n")),(0,i.kt)("p",null,"You can also specify ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," for the value to disable Auto Cancellation for the\nrun:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"npx cypress run --record --key <<your_record_key>> --auto-cancel-after-failures false\n")),(0,i.kt)("p",null,"For more info on passing CLI flags, see our guide on the\n",(0,i.kt)("a",{parentName:"p",href:"/guides/guides/command-line"},"Cypress Command Line"),"."))}h.isMDXComponent=!0}}]);