"use strict";(self.webpackChunkcypress_docusaurus_ts=self.webpackChunkcypress_docusaurus_ts||[]).push([[6388],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(n),m=r,f=p["".concat(l,".").concat(m)]||p[m]||d[m]||o;return n?a.createElement(f,i(i({ref:t},u),{},{components:n})):a.createElement(f,i({ref:t},u))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9747:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>f,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const o={title:"Run Cancellation",sidebar_position:50},i=void 0,s={unversionedId:"guides/cloud/smart-orchestration/run-cancellation",id:"guides/cloud/smart-orchestration/run-cancellation",title:"Run Cancellation",description:"Continuous Integration (CI) pipelines are typically costly processes that can",source:"@site/docs/guides/cloud/smart-orchestration/run-cancellation.mdx",sourceDirName:"guides/cloud/smart-orchestration",slug:"/guides/cloud/smart-orchestration/run-cancellation",permalink:"/cypress-documentation/guides/cloud/smart-orchestration/run-cancellation",draft:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/guides/cloud/smart-orchestration/run-cancellation.mdx",tags:[],version:"current",lastUpdatedAt:1702621628,formattedLastUpdatedAt:"Dec 15, 2023",sidebarPosition:50,frontMatter:{title:"Run Cancellation",sidebar_position:50},sidebar:"guides",previous:{title:"Spec Prioritization",permalink:"/cypress-documentation/guides/cloud/smart-orchestration/spec-prioritization"},next:{title:"GitHub",permalink:"/cypress-documentation/guides/cloud/integrations/source-control/github"}},l={},c=[{value:"Activate Auto Cancellation in Cypress Cloud",id:"Activate-Auto-Cancellation-in-Cypress-Cloud",level:3},{value:"Specifying failures before auto canceling in the CLI",id:"Specifying-failures-before-auto-canceling-in-the-CLI",level:3}],u=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)},p=u("Icon"),d=u("DocsImage"),m={toc:c};function f(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Continuous Integration (CI) pipelines are typically costly processes that can\ndemand significant compute time. ",(0,r.kt)("strong",{parentName:"p"},"When a test failure occurs in CI, it often\ndoes not make sense to continue running the remainder of a test suite")," since\nthe process has to start again upon merging of subsequent fixes and other code\nchanges. When Auto Cancellation is enabled, once the number of failed tests goes\nover a preset threshold, the entire test run is canceled. Note that any\nin-progress specs will continue to run to completion."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("strong",null,(0,r.kt)(p,{name:"check",mdxType:"Icon"})," Benefits"),(0,r.kt)("p",{parentName:"admonition"},"Canceling an ",(0,r.kt)("strong",{parentName:"p"},"entire")," test run, even if parallelized, upon the first test\nfailure will:"),(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Save time"),". Resolve test outcomes faster."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Reduce CI costs"),". These cost savings can be significant for large test\nsuites."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Free-up CI resources")," for validating fixes, and helping other users."))),(0,r.kt)("h3",{id:"Activate-Auto-Cancellation-in-Cypress-Cloud"},"Activate Auto Cancellation in Cypress Cloud"),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("strong",null,(0,r.kt)(p,{name:"star",mdxType:"Icon"})," Premium Cypress Cloud Feature"),(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"Auto Cancellation")," is a ",(0,r.kt)("em",{parentName:"p"},"Smart Orchestration")," feature available to users with\na ",(0,r.kt)("a",{parentName:"p",href:"https://cypress.io/pricing"},"Business or Enterprise tier Cypress Cloud plan"),".\nWondering if upgrading your Team tier subscription is worth it? Check out the\n",(0,r.kt)("a",{parentName:"p",href:"/guides/cloud/recorded-runs#Recommendations"},"recommendations")," on the run\noverview page to see how much time we predict these features would save you.")),(0,r.kt)("p",null,"Auto Cancellation is a ",(0,r.kt)("em",{parentName:"p"},"Smart Orchestration")," feature that is managed within a\nproject's settings."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("strong",null,"Consideration for Teams"),(0,r.kt)("p",{parentName:"admonition"},"If your development, testing, or QA teams operate in a highly collaborative\nworkflow where multiple people are working on various test failures at the same\ntime, it may make sense to increase the failures threshold to surface more failures on each test run.")),(0,r.kt)("p",null,"To enable or disable this feature at the Project level (must be an admin user):"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Select the desired project within Projects view to visit Cypress Cloud."),(0,r.kt)("li",{parentName:"ol"},'Click "Project Settings" with the right-hand sidebar.'),(0,r.kt)("li",{parentName:"ol"},"Scroll to the Smart Orchestration section within Project Settings page."),(0,r.kt)("li",{parentName:"ol"},'Toggle "Auto Cancellation".'),(0,r.kt)("li",{parentName:"ol"},'Set the "failures before auto canceling" threshold (or just leave it at the\ndefault value of 1).')),(0,r.kt)(d,{src:"/img/guides/cloud/smart-orchestration/auto-cancellation-active.png",alt:"Enable Auto Cancellation",mdxType:"DocsImage"}),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("strong",null,"CI Tip: Save Time"),(0,r.kt)("p",{parentName:"admonition"},"In addition to Auto Cancellation, consider reducing CI costs further by enabling\n",(0,r.kt)("a",{parentName:"p",href:"/guides/cloud/smart-orchestration/spec-prioritization"},"Spec Prioritization")," to\nsurface test failures earlier in the run, and reduce the time it takes to fix\nissues and deploy changes.")),(0,r.kt)("h3",{id:"Specifying-failures-before-auto-canceling-in-the-CLI"},"Specifying failures before auto canceling in the CLI"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"auto-cancel-after-failures")," flag in the CLI is only available in Cypress\n",(0,r.kt)("inlineCode",{parentName:"p"},"12.6.0")," and later. Including the flag in an older version will throw an error.")),(0,r.kt)("p",null,"With the Cypress CLI, you can specify the number of test failures to execute\nbefore canceling the run via a command flag. This allows more granular control\nof Auto Cancellation on a per-run basis."),(0,r.kt)("p",null,"Some common use cases for doing so might be:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Setting a lower-than-normal value on dev environments to fail a test suite\nearly for faster feedback"),(0,r.kt)("li",{parentName:"ul"},"Disabling Auto Cancellation on important branches that need the full test\nsuite to run every time"),(0,r.kt)("li",{parentName:"ul"},"Overriding the project value on a case-by-case basis")),(0,r.kt)("p",null,"Specifying the flag will override the project setting in Cypress Cloud, and not\nspecifying it will default to the value in the project settings."),(0,r.kt)("p",null,"To set it, pass the ",(0,r.kt)("inlineCode",{parentName:"p"},"--auto-cancel-after-failures")," flag to the ",(0,r.kt)("inlineCode",{parentName:"p"},"cypress run"),"\ncommand, and give it a numeric value:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npx cypress run --record --key <<your_record_key>> --auto-cancel-after-failures 1\n")),(0,r.kt)("p",null,"You can also specify ",(0,r.kt)("inlineCode",{parentName:"p"},"false")," for the value to disable Auto Cancellation for the\nrun:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npx cypress run --record --key <<your_record_key>> --auto-cancel-after-failures false\n")),(0,r.kt)("p",null,"For more info on passing CLI flags, see our guide on the\n",(0,r.kt)("a",{parentName:"p",href:"/guides/guides/command-line"},"Cypress Command Line"),"."))}f.isMDXComponent=!0}}]);