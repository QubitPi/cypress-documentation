"use strict";(self.webpackChunkcypress_docusaurus_ts=self.webpackChunkcypress_docusaurus_ts||[]).push([[6478],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>f});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,l=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),c=p(n),u=i,f=c["".concat(s,".").concat(u)]||c[u]||m[u]||l;return n?a.createElement(f,r(r({ref:t},d),{},{components:n})):a.createElement(f,r({ref:t},d))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=n.length,r=new Array(l);r[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[c]="string"==typeof e?e:i,r[1]=o;for(var p=2;p<l;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8267:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>f,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var a=n(7462),i=(n(7294),n(3905));const l={title:"selectFile",slug:"/api/commands/selectfile"},r=void 0,o={unversionedId:"api/actions/selectfile",id:"api/actions/selectfile",title:"selectFile",description:"Selects a file or files in an HTML5 input element or simulates dragging a file",source:"@site/docs/api/actions/selectfile.mdx",sourceDirName:"api/actions",slug:"/api/commands/selectfile",permalink:"/cypress-documentation/api/commands/selectfile",draft:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/api/actions/selectfile.mdx",tags:[],version:"current",lastUpdatedAt:1696480553,formattedLastUpdatedAt:"Oct 5, 2023",frontMatter:{title:"selectFile",slug:"/api/commands/selectfile"},sidebar:"api",previous:{title:"select",permalink:"/cypress-documentation/api/commands/select"},next:{title:"trigger",permalink:"/cypress-documentation/api/commands/trigger"}},s={},p=[{value:"Syntax",id:"Syntax",level:2},{value:"Usage",id:"Usage",level:3},{value:"Arguments",id:"Arguments",level:3},{value:'Yields <Icon name="question-circle"/>',id:"Yields",level:3},{value:"Action",id:"Action",level:3},{value:"<code>select</code> (default)",id:"select-default",level:4},{value:"<code>drag-drop</code>",id:"drag-drop",level:4},{value:"Examples",id:"Examples",level:2},{value:"From a file on disk",id:"From-a-file-on-disk",level:3},{value:"On a hidden input",id:"On-a-hidden-input",level:3},{value:"From a fixture",id:"From-a-fixture",level:3},{value:"From an API response",id:"From-an-API-response",level:3},{value:"Processing data inside the test",id:"Processing-data-inside-the-test",level:3},{value:"Selecting multiple files",id:"Selecting-multiple-files",level:3},{value:"Custom fileName, mimeType and lastModified",id:"Custom-fileName-mimeType-and-lastModified",level:3},{value:"Dropping a file on the document",id:"Dropping-a-file-on-the-document",level:3},{value:"Notes",id:"Notes",level:2},{value:"Existence",id:"Existence",level:3},{value:"Default file existence assertion",id:"Default-file-existence-assertion",level:4},{value:"Actionability",id:"Actionability",level:3},{value:"The element must first reach actionability",id:"The-element-must-first-reach-actionability",level:4},{value:"Rules",id:"Rules",level:2},{value:'Requirements <Icon name="question-circle"/>',id:"Requirements",level:3},{value:'Assertions <Icon name="question-circle"/>',id:"Assertions",level:3},{value:'Timeouts <Icon name="question-circle"/>',id:"Timeouts",level:3},{value:"Command Log",id:"Command-Log",level:2},{value:"History",id:"History",level:2},{value:"Community Recognition",id:"Community-Recognition",level:3},{value:"See also",id:"See-also",level:2}],d=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",t)},c=d("Icon"),m=d("DocsImage"),u={toc:p};function f(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Selects a file or files in an HTML5 input element or simulates dragging a file\nor files into the browser."),(0,i.kt)("p",null,"It is ",(0,i.kt)("a",{parentName:"p",href:"/guides/core-concepts/retry-ability#Only-queries-are-retried"},"unsafe")," to\nchain further commands that rely on the subject after ",(0,i.kt)("inlineCode",{parentName:"p"},".selectFile()"),"."),(0,i.kt)("h2",{id:"Syntax"},"Syntax"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},".selectFile(file)\n.selectFile(file, options)\n.selectFile([file1, file2, ...])\n.selectFile([file1, file2, ...], options)\n")),(0,i.kt)("h3",{id:"Usage"},"Usage"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)(c,{name:"check-circle",color:"green",mdxType:"Icon"})," Correct Usage")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.get('input[type=file]').selectFile('file.json')\ncy.get('input[type=file]').selectFile(['file.json', 'file2.json'])\n\ncy.get('input[type=file]').selectFile({\n  contents: Cypress.Buffer.from('file contents'),\n  fileName: 'file.txt',\n  mimeType: 'text/plain',\n  lastModified: Date.now(),\n})\n\ncy.get('input[type=file]').selectFile('file.json', { action: 'drag-drop' })\ncy.document().selectFile('file.json', { action: 'drag-drop' })\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)(c,{name:"exclamation-triangle",color:"red",mdxType:"Icon"})," Incorrect Usage")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"// Errors, cannot be chained off 'cy'\ncy.selectFile('file.json')\n\n// Will attempt to find a file called 'file contents'\n// on disk, probably not what you intended\ncy.get('input[type=file]').selectFile('file contents')\n")),(0,i.kt)("h3",{id:"Arguments"},"Arguments"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)(c,{name:"angle-right",mdxType:"Icon"})," file")," ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"(String, Array, Object or\nCypress.Buffer)"))),(0,i.kt)("p",null,"Either a single file, or an array of files. A file can be:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"A path to a file within the project root (the directory that contains the\ndefault Cypress configuration file). Eg: ",(0,i.kt)("inlineCode",{parentName:"li"},"'path/to/file.json'")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"@alias")," - An alias of any type, previously stored using ",(0,i.kt)("inlineCode",{parentName:"li"},".as()"),". Eg:\n",(0,i.kt)("inlineCode",{parentName:"li"},"'@alias'")),(0,i.kt)("li",{parentName:"ul"},"A\n",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray"},(0,i.kt)("inlineCode",{parentName:"a"},"TypedArray")),"\ncontaining binary data, such as ",(0,i.kt)("inlineCode",{parentName:"li"},"Uint8Array.from('123')"),".\n",(0,i.kt)("a",{parentName:"li",href:"/api/utilities/buffer"},(0,i.kt)("inlineCode",{parentName:"a"},"Cypress.Buffer"))," instances, such as those returned by\n",(0,i.kt)("inlineCode",{parentName:"li"},"cy.readFile('file.json', { encoding: null })")," or created by\n",(0,i.kt)("inlineCode",{parentName:"li"},"Cypress.Buffer.from('foo')")," are ",(0,i.kt)("inlineCode",{parentName:"li"},"TypedArray")," instances."),(0,i.kt)("li",{parentName:"ul"},"An object with a non-null ",(0,i.kt)("inlineCode",{parentName:"li"},"contents")," property, specifying details about the\nfile. Eg: ",(0,i.kt)("inlineCode",{parentName:"li"},"{contents: '@alias', fileName: 'file.json'}"))),(0,i.kt)("p",null,"If an object is provided, it can have the following properties."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Option"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"contents")),(0,i.kt)("td",{parentName:"tr",align:null},"The contents of the file. This can be a string shorthand as described above, a ",(0,i.kt)("inlineCode",{parentName:"td"},"TypedArray")," instance containing binary data (such as a ",(0,i.kt)("inlineCode",{parentName:"td"},"Cypress.Buffer")," instance) or a non-TypedArray object, which will be converted into a string with ",(0,i.kt)("inlineCode",{parentName:"td"},"JSON.stringify()")," and ",(0,i.kt)("inlineCode",{parentName:"td"},"utf8")," encoded.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"fileName")),(0,i.kt)("td",{parentName:"tr",align:null},"The name of the file. If ",(0,i.kt)("inlineCode",{parentName:"td"},"contents")," is a path on disk or an alias from ",(0,i.kt)("inlineCode",{parentName:"td"},"cy.readFile()")," or ",(0,i.kt)("inlineCode",{parentName:"td"},"cy.fixture()"),", this defaults to the actual filename. In any other case, this defaults to an empty string.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"mimeType")),(0,i.kt)("td",{parentName:"tr",align:null},"The ",(0,i.kt)("a",{parentName:"td",href:"https://developer.mozilla.org/en-US/docs/Web/API/File/type"},"mimeType")," of the file. If omitted, it will be ",(0,i.kt)("a",{parentName:"td",href:"https://github.com/jshttp/mime-types#mimelookuppath"},"inferred")," from the file extension. If one cannot be inferred, it will default to an empty string.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"lastModified")),(0,i.kt)("td",{parentName:"tr",align:null},"The file's last modified timestamp, in milliseconds elapsed since the UNIX epoch (eg. ",(0,i.kt)("a",{parentName:"td",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/getTime"},(0,i.kt)("inlineCode",{parentName:"a"},"Date.prototype.getTime()")),"). This defaults to ",(0,i.kt)("inlineCode",{parentName:"td"},"Date.now()"),".")))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)(c,{name:"angle-right",mdxType:"Icon"})," options")," ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"(Object)"))),(0,i.kt)("p",null,"Pass in an options object to change the default behavior of ",(0,i.kt)("inlineCode",{parentName:"p"},".selectFile()"),"."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Option"),(0,i.kt)("th",{parentName:"tr",align:null},"Default"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"action")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"'select'")),(0,i.kt)("td",{parentName:"tr",align:null},"Switches modes. Valid values are ",(0,i.kt)("inlineCode",{parentName:"td"},"select")," and ",(0,i.kt)("inlineCode",{parentName:"td"},"drag-drop"),". See ",(0,i.kt)("a",{parentName:"td",href:"#Actions"},"Actions")," below for more details.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"animationDistanceThreshold")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/guides/references/configuration#Actionability"},(0,i.kt)("inlineCode",{parentName:"a"},"animationDistanceThreshold"))),(0,i.kt)("td",{parentName:"tr",align:null},"The distance in pixels an element must exceed over time to be ",(0,i.kt)("a",{parentName:"td",href:"/guides/core-concepts/interacting-with-elements#Animations"},"considered animating"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"force")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"false")),(0,i.kt)("td",{parentName:"tr",align:null},"Forces the action, disables ",(0,i.kt)("a",{parentName:"td",href:"#Assertions"},"waiting for actionability"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"log")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"true")),(0,i.kt)("td",{parentName:"tr",align:null},"Displays the command in the ",(0,i.kt)("a",{parentName:"td",href:"/guides/core-concepts/cypress-app#Command-Log"},"Command log"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"timeout")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/guides/references/configuration#Timeouts"},(0,i.kt)("inlineCode",{parentName:"a"},"defaultCommandTimeout"))),(0,i.kt)("td",{parentName:"tr",align:null},"Time to wait for ",(0,i.kt)("inlineCode",{parentName:"td"},".selectFile()")," to resolve before ",(0,i.kt)("a",{parentName:"td",href:"#Timeouts"},"timing out"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"waitForAnimations")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/guides/references/configuration#Actionability"},(0,i.kt)("inlineCode",{parentName:"a"},"waitForAnimations"))),(0,i.kt)("td",{parentName:"tr",align:null},"Whether to wait for elements to ",(0,i.kt)("a",{parentName:"td",href:"/guides/core-concepts/interacting-with-elements#Animations"},"finish animating")," before executing the command.")))),(0,i.kt)("h3",{id:"Yields"},"Yields ",(0,i.kt)("a",{parentName:"h3",href:"/guides/core-concepts/introduction-to-cypress#Subject-Management"},(0,i.kt)(c,{name:"question-circle",mdxType:"Icon"}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".selectFile()")," yields the same subject it was given."),(0,i.kt)("li",{parentName:"ul"},"It is ",(0,i.kt)("a",{parentName:"li",href:"/guides/core-concepts/retry-ability#Only-queries-are-retried"},"unsafe"),"\nto chain further commands that rely on the subject after ",(0,i.kt)("inlineCode",{parentName:"li"},".selectFile()"),".")),(0,i.kt)("h3",{id:"Action"},"Action"),(0,i.kt)("p",null,"Depending on the ",(0,i.kt)("inlineCode",{parentName:"p"},"action")," set in the ",(0,i.kt)("inlineCode",{parentName:"p"},"options")," argument, ",(0,i.kt)("inlineCode",{parentName:"p"},".selectFile()")," can\nsimulate two different user behaviors:"),(0,i.kt)("h4",{id:"select-default"},(0,i.kt)("inlineCode",{parentName:"h4"},"select")," (default)"),(0,i.kt)("p",null,"By default, ",(0,i.kt)("inlineCode",{parentName:"p"},".selectFile()")," runs in 'select' mode, mimicking a user selecting\none or more files on an HTML5 input element. In this mode, the\n",(0,i.kt)("a",{parentName:"p",href:"/guides/core-concepts/introduction-to-cypress#Subject-Management"},"subject")," must\nbe a single ",(0,i.kt)("inlineCode",{parentName:"p"},"input")," element with ",(0,i.kt)("inlineCode",{parentName:"p"},'type="file"'),", or a ",(0,i.kt)("inlineCode",{parentName:"p"},"label")," element connected\nto an input (either with its ",(0,i.kt)("inlineCode",{parentName:"p"},"for")," attribute or by containing the input)."),(0,i.kt)("h4",{id:"drag-drop"},(0,i.kt)("inlineCode",{parentName:"h4"},"drag-drop")),(0,i.kt)("p",null,"Setting the action to ",(0,i.kt)("inlineCode",{parentName:"p"},"drag-drop")," changes the behavior of the command to instead\nmimic a user dragging files from the operating system into the browser, and\ndropping them over the selected subject. In this mode, the subject can be any\nDOM element or the ",(0,i.kt)("inlineCode",{parentName:"p"},"document")," as a whole."),(0,i.kt)("h2",{id:"Examples"},"Examples"),(0,i.kt)("h3",{id:"From-a-file-on-disk"},"From a file on disk"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.get('input[type=file]').selectFile('path/to/file.json')\ncy.get('input[type=file]').selectFile('path/to/file.png')\n")),(0,i.kt)("p",null,"If given a path, ",(0,i.kt)("inlineCode",{parentName:"p"},".selectFile()")," will search for the file relative to the\nproject root and attach the file exactly as it exists on disk. This is the\npreferred way to work with files on disk, avoiding many encoding-related\npitfalls."),(0,i.kt)("h3",{id:"On-a-hidden-input"},"On a hidden input"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.get('input[type=file]').selectFile('file.json', { force: true })\n")),(0,i.kt)("p",null,"In many cases in modern applications, the underlying file input is hidden from\nview, and activated by a user clicking on a button. In these cases, you will\nneed to tell Cypress to ignore its actionability checks and select the file even\nthough a user would not be able to directly activate the file input."),(0,i.kt)("h3",{id:"From-a-fixture"},"From a fixture"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.fixture('file.json', { encoding: null }).as('myFixture')\ncy.get('input[type=file]').selectFile('@myFixture')\n")),(0,i.kt)("p",null,"Note the use of ",(0,i.kt)("inlineCode",{parentName:"p"},"null")," encoding. By default, ",(0,i.kt)("inlineCode",{parentName:"p"},"cy.fixture()")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"cy.readFile()"),"\nattempt to interpret files read from disk, which would result in a JSON file\nbeing decoded and re-encoded as a utf-8 string - the contents would be\npreserved, but formatting would not be and the encoding might change. See\n",(0,i.kt)("a",{parentName:"p",href:"/api/commands/fixture"},(0,i.kt)("inlineCode",{parentName:"a"},"cy.fixture"))," or ",(0,i.kt)("a",{parentName:"p",href:"/api/commands/readfile"},(0,i.kt)("inlineCode",{parentName:"a"},"cy.readFile")),"\nfor more details on file encoding."),(0,i.kt)("h3",{id:"From-an-API-response"},"From an API response"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.request('http://localhost:8888/users/827').its('body').as('responseBody')\n\ncy.get('input[type=file]').selectFile('@responseBody')\n")),(0,i.kt)("h3",{id:"Processing-data-inside-the-test"},"Processing data inside the test"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.readFile('users.json')\n  .then((users) => {\n    users[0].username = 'JohnCena'\n  })\n  .as('myFile')\n\ncy.get('input[type=file]').selectFile('@myFile')\n")),(0,i.kt)("h3",{id:"Selecting-multiple-files"},"Selecting multiple files"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.get('input[type=file]').selectFile([\n  'file1.json',\n  'file2.json',\n  'file3.json',\n])\n")),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"This will fail unless the file input has the ",(0,i.kt)("inlineCode",{parentName:"p"},"multiple")," property.")),(0,i.kt)("h3",{id:"Custom-fileName-mimeType-and-lastModified"},"Custom fileName, mimeType and lastModified"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.get('input[type=file][multiple]')\n  .selectFile([\n    {\n      contents: 'cypress/fixtures/example.json',\n    },\n    {\n      contents: 'cypress/fixtures/example.json',\n      fileName: 'file.png',\n    },\n    {\n      contents: 'cypress/fixtures/example.json',\n      fileName: 'file.png',\n      mimeType: 'text/plain',\n      lastModified: new Date('Feb 18 1989').valueOf(),\n    },\n  ])\n  .then(($input) => {\n    const files = $input[0].files\n\n    // If nothing is specified, the fileName and MIME type will be inferred from the path on disk.:\n    expect(files[0].name).to.eq('example.json')\n    expect(files[0].type).to.eq('application/json')\n\n    // If the fileName is given, the MIME type will be inferred based on that.\n    expect(files[1].name).to.eq('file.png')\n    expect(files[1].type).to.eq('image/png')\n\n    // But an explicitly specified MIME type is always used.\n    expect(files[2].name).to.eq('file.png')\n    expect(files[2].type).to.eq('text/plain')\n\n    // lastModified defaults to the current time, but can be overridden.\n    expect(files[0].lastModified).to.be.closeTo(Date.now(), 1000)\n    expect(files[1].lastModified).to.be.closeTo(Date.now(), 1000)\n    expect(files[2].lastModified).to.eql(new Date('Feb 18 1989').valueOf())\n  })\n")),(0,i.kt)("h3",{id:"Dropping-a-file-on-the-document"},"Dropping a file on the document"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.document().selectFile('file.json', { action: 'drag-drop' })\n")),(0,i.kt)("h2",{id:"Notes"},"Notes"),(0,i.kt)("h3",{id:"Existence"},"Existence"),(0,i.kt)("h4",{id:"Default-file-existence-assertion"},"Default file existence assertion"),(0,i.kt)("p",null,"Whenever resolving a file path, ",(0,i.kt)("inlineCode",{parentName:"p"},".selectFile()")," asserts that the file exists and\nwill fail if it does not exist. It will retry reading the file if it does not\ninitially exist until the file exists or the command times out."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"// will fail after the defaultCommandTimeout is reached\ncy.get('input[type=file]').selectFile('does-not-exist.yaml')\n")),(0,i.kt)("h3",{id:"Actionability"},"Actionability"),(0,i.kt)("h4",{id:"The-element-must-first-reach-actionability"},"The element must first reach actionability"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},".selectFile()"),' is an "action command" that follows all the rules of\n',(0,i.kt)("a",{parentName:"p",href:"/guides/core-concepts/interacting-with-elements"},"Actionability"),"."),(0,i.kt)("h2",{id:"Rules"},"Rules"),(0,i.kt)("h3",{id:"Requirements"},"Requirements ",(0,i.kt)("a",{parentName:"h3",href:"/guides/core-concepts/introduction-to-cypress#Chains-of-Commands"},(0,i.kt)(c,{name:"question-circle",mdxType:"Icon"}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".selectFile()")," requires being chained off a command that yields DOM\nelement(s). With the ",(0,i.kt)("inlineCode",{parentName:"li"},"input")," action (default), it further requires a single\n",(0,i.kt)("inlineCode",{parentName:"li"},"input")," element with ",(0,i.kt)("inlineCode",{parentName:"li"},'type="file"'),", or a ",(0,i.kt)("inlineCode",{parentName:"li"},"label")," element attached to one."),(0,i.kt)("li",{parentName:"ul"},"If given a path, ",(0,i.kt)("inlineCode",{parentName:"li"},".selectFile()")," requires the file must exist."),(0,i.kt)("li",{parentName:"ul"},"If given an alias, ",(0,i.kt)("inlineCode",{parentName:"li"},".selectFile()")," requires that the subject of the alias must\nnot be ",(0,i.kt)("inlineCode",{parentName:"li"},"null")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"undefined"),".")),(0,i.kt)("h3",{id:"Assertions"},"Assertions ",(0,i.kt)("a",{parentName:"h3",href:"/guides/core-concepts/introduction-to-cypress#Assertions"},(0,i.kt)(c,{name:"question-circle",mdxType:"Icon"}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".selectFile()")," will automatically wait for the element to reach an\n",(0,i.kt)("a",{parentName:"li",href:"/guides/core-concepts/interacting-with-elements"},"actionable state"),".")),(0,i.kt)("h3",{id:"Timeouts"},"Timeouts ",(0,i.kt)("a",{parentName:"h3",href:"/guides/core-concepts/introduction-to-cypress#Timeouts"},(0,i.kt)(c,{name:"question-circle",mdxType:"Icon"}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".selectFile()")," can time out waiting for the element to reach an\n",(0,i.kt)("a",{parentName:"li",href:"/guides/core-concepts/interacting-with-elements"},"actionable state"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".selectFile()")," can time out waiting for a file to exist on disk or for an\nalias to resolve.")),(0,i.kt)("h2",{id:"Command-Log"},"Command Log"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"Select file for input"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.get('.file-input').selectFile(Cypress.Buffer.from('Hello world'))\n")),(0,i.kt)("p",null,"The commands above will display in the Command Log as:"),(0,i.kt)(m,{src:"/img/api/selectfile/selectfile-command-log.png",alt:"Command log for selectFile",mdxType:"DocsImage"}),(0,i.kt)("p",null,"When clicking on ",(0,i.kt)("inlineCode",{parentName:"p"},"selectFile")," within the command log, the console outputs the\nfollowing:"),(0,i.kt)(m,{src:"/img/api/selectfile/selectfile-console.png",alt:"console.log for selectFile",mdxType:"DocsImage"}),(0,i.kt)("h2",{id:"History"},"History"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Version"),(0,i.kt)("th",{parentName:"tr",align:null},"Changes"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/guides/references/changelog#9.3.0"},"9.3.0")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},".selectFile()")," command added")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/guides/references/changelog#9.4.0"},"9.4.0")),(0,i.kt)("td",{parentName:"tr",align:null},"Support for ",(0,i.kt)("inlineCode",{parentName:"td"},"TypedArray")," and ",(0,i.kt)("inlineCode",{parentName:"td"},"mimeType")," property added. Default ",(0,i.kt)("inlineCode",{parentName:"td"},"fileName")," name is no longer lost when working with aliases.")))),(0,i.kt)("h3",{id:"Community-Recognition"},"Community Recognition"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},".selectFile()")," command draws heavy inspiration from the now-deprecated\nCypress File Upload plugin. It was made possible by\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/abramenal"},"@abramenal")," and contributors to the\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/abramenal/cypress-file-upload#contributors"},"cypress-file-upload"),"\nrepository."),(0,i.kt)("h2",{id:"See-also"},"See also"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/guides/core-concepts/variables-and-aliases"},"Guide: Variables and Aliases")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/api/commands/fixture"},(0,i.kt)("inlineCode",{parentName:"a"},".fixture()"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/api/commands/get"},(0,i.kt)("inlineCode",{parentName:"a"},".get()"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/api/commands/readfile"},(0,i.kt)("inlineCode",{parentName:"a"},".readFile()")))))}f.isMDXComponent=!0}}]);