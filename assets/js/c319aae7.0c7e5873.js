"use strict";(self.webpackChunkcypress_docusaurus_ts=self.webpackChunkcypress_docusaurus_ts||[]).push([[4992],{3154:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var i=t(5893),s=t(1151);const r={title:"GitLab Integration",sidebar_position:20,sidebar_label:"GitLab"},o=void 0,a={id:"guides/cloud/integrations/source-control/gitlab",title:"GitLab Integration",description:"Cypress Cloud can integrate your Cypress tests",source:"@site/docs/guides/cloud/integrations/source-control/gitlab.mdx",sourceDirName:"guides/cloud/integrations/source-control",slug:"/guides/cloud/integrations/source-control/gitlab",permalink:"/guides/cloud/integrations/source-control/gitlab",draft:!1,unlisted:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/guides/cloud/integrations/source-control/gitlab.mdx",tags:[],version:"current",lastUpdatedAt:1728611023,formattedLastUpdatedAt:"Oct 11, 2024",sidebarPosition:20,frontMatter:{title:"GitLab Integration",sidebar_position:20,sidebar_label:"GitLab"},sidebar:"guides",previous:{title:"GitHub",permalink:"/guides/cloud/integrations/source-control/github"},next:{title:"Bitbucket",permalink:"/guides/cloud/integrations/source-control/bitbucket"}},l={},c=[{value:"GitLab for Enterprise (Self-managed)",id:"GitLab-for-Enterprise-Self-managed",level:2},{value:"Installing the GitLab integration",id:"Installing-the-GitLab-integration",level:2},{value:"Configuring the GitLab integration",id:"Configuring-the-GitLab-integration",level:2},{value:"Status checks",id:"Status-checks",level:3},{value:"Merge Request comments",id:"Merge-Request-comments",level:3},{value:"Uninstalling the GitLab integration",id:"Uninstalling-the-GitLab-integration",level:2}];function d(e){const n={a:"a",admonition:"admonition",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",...(0,s.a)(),...e.components},{DocsImage:t,Icon:r,TestReplayInfo:o}=n;return t||h("DocsImage",!0),r||h("Icon",!0),o||h("TestReplayInfo",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://on.cypress.io/cloud",children:"Cypress Cloud"})," can integrate your Cypress tests\nwith your GitLab workflow via ",(0,i.jsx)(n.a,{href:"#Status-checks",children:"status checks"})," and\n",(0,i.jsx)(n.a,{href:"#Merge-Request-comments",children:"merge request comments"}),". A project first needs to be\n",(0,i.jsx)(n.a,{href:"/guides/cloud/account-management/projects",children:"set up to record"})," to Cypress Cloud\nto use GitLab integration."]}),"\n",(0,i.jsx)(t,{src:"/img/guides/cloud/integrations/gitlab/gitlab-merge-request-comment.jpg",width:800}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(r,{name:"exclamation-triangle"})," The user enabling the integration needs to have\nadmin access to GitLab."]})}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.p,{children:["GitLab Integration depends on your CI environment reliably providing a commit\nSHA (typically via an environment variable). This is not a problem for most\nusers, but if you are facing GitLab integration issues with your CI setup,\nplease make sure the git information is being sent properly by following\n",(0,i.jsx)(n.a,{href:"/guides/continuous-integration/introduction#Git-information",children:"these guidelines"}),".\nIf you still face issues after this, please\n",(0,i.jsx)(n.a,{href:"mailto:support@cypress.io",children:"contact us"}),"."]})}),"\n",(0,i.jsx)(n.h2,{id:"GitLab-for-Enterprise-Self-managed",children:"GitLab for Enterprise (Self-managed)"}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(r,{name:"star"})," ",(0,i.jsx)(n.strong,{children:"Premium Cypress Cloud Feature"})]}),(0,i.jsxs)(n.p,{children:["GitLab for Enterprise (Self-managed) is included in our\n",(0,i.jsx)(n.a,{href:"https://www.cypress.io/pricing",children:"Business and Enterprise paid pricing plans"}),"."]})]}),"\n",(0,i.jsx)(n.p,{children:"GitLab for Enterprise (Self-managed) Integration depends on your GitLab instance\nbeing able to reach our Cypress Cloud API on the open internet. If your instance\nis running behind a firewall, you may need to reconfigure your security\ninfrastructure to allow communication with our servers."}),"\n",(0,i.jsx)(n.h2,{id:"Installing-the-GitLab-integration",children:"Installing the GitLab integration"}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsx)(n.p,{children:"GitLab OAuth2 applications will allow Cypress Cloud to authenticate as the user\nthat registered the application. That means Cypress will have visibility into\nevery GitLab repo the registered user can access. If you want tighter control of\nthe repos that Cypress will see, consider creating a service account in GitLab\nwith more limited access permissions."})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Go to Cypress Cloud\n",(0,i.jsx)(n.a,{href:"https://cloud.cypress.io/organizations",children:"Organizations page"})," or open the\norganization switcher."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Select the organization you wish to integrate with a GitLab."}),"\n",(0,i.jsx)(t,{src:"/img/guides/cloud/organizations/select-cypress-organization.jpg",alt:"Select an organization",width:600}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Visit the selected organization's ",(0,i.jsx)(n.strong,{children:"Integrations"})," page via the side\nnavigation."]}),"\n",(0,i.jsx)(t,{src:"/img/guides/cloud/organizations/navigate-to-organization-integrations.jpg",alt:"Install Cypress GitLab from Integrations",width:600}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click the enable button under ",(0,i.jsx)(n.strong,{children:"GitLab"})," or ",(0,i.jsx)(n.strong,{children:"GitLab for Enterprise\n(Self-managed)"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Follow the instructions to create a new OAuth2 application in GitLab. See the\n",(0,i.jsx)(n.a,{href:"https://docs.gitlab.com/ee/integration/oauth_provider.html#adding-an-application-through-the-profile",children:"GitLab docs"}),"\nfor more details."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Copy the Application ID and Secret back to Cypress Cloud."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"(GitLab Self-managed only) Copy the base URL of your GitLab instance to the\nGitLab URL field in Cypress Cloud."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Connect your projects to a GitLab repo in ",(0,i.jsx)(n.strong,{children:"Project Settings \u2192 GitLab\nIntegration"})," or ",(0,i.jsx)(n.strong,{children:"GitLab for Enterprise Integration"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"(Optional) Configure the behavior for each project."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["If you are running the tests from within a restrictive VPN, see\n",(0,i.jsx)(n.a,{href:"/faq/questions/cloud-faq#Im-working-with-a-restrictive-VPN-Which-subdomains-do-I-have-to-allow-on-my-VPN-for-Cypress-Cloud-to-work-properly",children:"which subdomains to add to your allowlist for Cypress Cloud and your GitLab integration to work properly"})]})}),"\n",(0,i.jsx)(n.h2,{id:"Configuring-the-GitLab-integration",children:"Configuring the GitLab integration"}),"\n",(0,i.jsx)(n.h3,{id:"Status-checks",children:"Status checks"}),"\n",(0,i.jsxs)(n.p,{children:["By default, Cypress will post a ",(0,i.jsx)(n.strong,{children:"cypress/run"})," commit status containing the\nresults of the Cypress run. This will prevent your team from merging any MRs\nwith failing Cypress tests."]}),"\n",(0,i.jsxs)(n.p,{children:["Additionally, Cypress can post a ",(0,i.jsx)(n.strong,{children:"cypress/flake"})," commit status indicating\nwhether the Cypress run contained any flaky tests. This will prevent your team\nfrom merging any MRs with flaky tests."]}),"\n",(0,i.jsxs)(n.p,{children:["You can manage this behavior on your project's ",(0,i.jsx)(n.strong,{children:"Project Settings"})," page."]}),"\n",(0,i.jsx)(t,{src:"/img/guides/cloud/integrations/gitlab/gitlab-status-checks.jpg",width:800}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(r,{name:"star"})," ",(0,i.jsx)(n.strong,{children:"Premium Cypress Cloud Feature"})]}),(0,i.jsxs)(n.p,{children:["Reporting on flaky status checks is included in our\n",(0,i.jsx)(n.a,{href:"https://www.cypress.io/pricing",children:"Team, Business and Enterprise paid pricing plans"}),"."]})]}),"\n",(0,i.jsx)(n.h3,{id:"Merge-Request-comments",children:"Merge Request comments"}),"\n",(0,i.jsx)(n.p,{children:"By default, Cypress will post an MR comment summarizing the run when the run\ncompletes. It will include test results, run info, and a summary of tests that\nfailed or were flaky."}),"\n",(0,i.jsxs)(n.p,{children:["You can manage this behavior on your project's ",(0,i.jsx)(n.strong,{children:"Project Settings"})," page."]}),"\n",(0,i.jsx)(t,{src:"/img/guides/cloud/integrations/gitlab/gitlab-merge-requests.jpg",width:800}),"\n",(0,i.jsx)(o,{}),"\n",(0,i.jsx)(n.h2,{id:"Uninstalling-the-GitLab-integration",children:"Uninstalling the GitLab integration"}),"\n",(0,i.jsxs)(n.p,{children:["You can remove this integration by visiting the ",(0,i.jsx)(n.strong,{children:"Integrations \u2192 GitLab"})," or\n",(0,i.jsx)(n.strong,{children:"GitLab for Enterprise Integration"})," page of your organization. This will stop\nall commit checks and MR comments from Cypress."]})]})}function u(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}function h(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},1151:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>o});var i=t(7294);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);