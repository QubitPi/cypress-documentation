"use strict";(self.webpackChunkcypress_docusaurus_ts=self.webpackChunkcypress_docusaurus_ts||[]).push([[4637],{9909:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>i,default:()=>p,frontMatter:()=>c,metadata:()=>a,toc:()=>l});var s=t(5893),o=t(1151);const c={title:"Svelte Examples",sidebar_position:30},i=void 0,a={id:"guides/component-testing/svelte/examples",title:"Svelte Examples",description:"Mounting Components",source:"@site/docs/guides/component-testing/svelte/examples.mdx",sourceDirName:"guides/component-testing/svelte",slug:"/guides/component-testing/svelte/examples",permalink:"/guides/component-testing/svelte/examples",draft:!1,unlisted:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/guides/component-testing/svelte/examples.mdx",tags:[],version:"current",lastUpdatedAt:1728611023,formattedLastUpdatedAt:"Oct 11, 2024",sidebarPosition:30,frontMatter:{title:"Svelte Examples",sidebar_position:30},sidebar:"guides",previous:{title:"Svelte Overview",permalink:"/guides/component-testing/svelte/overview"},next:{title:"Svelte API",permalink:"/guides/component-testing/svelte/api"}},r={},l=[{value:"Mounting Components",id:"Mounting-Components",level:2},{value:"Using <code>cy.mount()</code>",id:"Using-cymount",level:3},{value:"Passing Data to a Component",id:"Passing-Data-to-a-Component",level:3},{value:"Testing Event Handlers",id:"Testing-Event-Handlers",level:3},{value:"Accessing the Component Instance",id:"Accessing-the-Component-Instance",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"Mounting-Components",children:"Mounting Components"}),"\n",(0,s.jsxs)(n.h3,{id:"Using-cymount",children:["Using ",(0,s.jsx)(n.code,{children:"cy.mount()"})]}),"\n",(0,s.jsxs)(n.p,{children:["To mount a component with ",(0,s.jsx)(n.code,{children:"cy.mount()"}),", import the component and pass it to the\nmethod:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { Stepper } from './stepper.svelte'\n\nit('mounts', () => {\n  cy.mount(Stepper)\n})\n"})}),"\n",(0,s.jsx)(n.h3,{id:"Passing-Data-to-a-Component",children:"Passing Data to a Component"}),"\n",(0,s.jsxs)(n.p,{children:["You can pass props to a component by setting props in the options: ",(0,s.jsx)(n.code,{children:"cy.mount()"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"it('mounts', () => {\n  cy.mount(Stepper, { props: { count: 100 } })\n})\n"})}),"\n",(0,s.jsx)(n.h3,{id:"Testing-Event-Handlers",children:"Testing Event Handlers"}),"\n",(0,s.jsxs)(n.p,{children:["To test emitted events from a Svelte component, we can use access the component\ninstances and use ",(0,s.jsx)(n.code,{children:"$on"})," method to listen to events raised. We can also pass in a\nCypress spy so we can query the spy later for results. In the example below, we\nlisten to the ",(0,s.jsx)(n.code,{children:"change"})," event and validate it was called as expected:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"it('clicking + fires a change event with the incremented value', () => {\n  const changeSpy = cy.spy().as('changeSpy')\n  cy.mount(Stepper).then(({ component }) => {\n    component.$on('change', changeSpy)\n  })\n  cy.get('[data-cy=increment]').click()\n  cy.get('@changeSpy').should('have.been.calledWithMatch', {\n    detail: { count: 1 },\n  })\n})\n"})}),"\n",(0,s.jsx)(n.h3,{id:"Accessing-the-Component-Instance",children:"Accessing the Component Instance"}),"\n",(0,s.jsxs)(n.p,{children:["There might be times when you might want to access the component instance\ndirectly in your tests. To do so, use ",(0,s.jsx)(n.code,{children:".then()"}),", which enables us to work with\nthe subject that was yielded from the ",(0,s.jsx)(n.code,{children:"cy.mount()"})," command."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"cy.mount(Stepper).then(({ component }) => {\n  //component is the rendered instance of Stepper\n})\n"})})]})}function p(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>i});var s=t(7294);const o={},c=s.createContext(o);function i(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);