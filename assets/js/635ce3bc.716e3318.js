"use strict";(self.webpackChunkcypress_docusaurus_ts=self.webpackChunkcypress_docusaurus_ts||[]).push([[7006],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(n),c=i,f=d["".concat(s,".").concat(c)]||d[c]||m[c]||r;return n?a.createElement(f,o(o({ref:t},u),{},{components:n})):a.createElement(f,o({ref:t},u))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:i,o[1]=l;for(var p=2;p<r;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},27:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>f,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var a=n(7462),i=(n(7294),n(3905));const r={title:"fixture"},o=void 0,l={unversionedId:"api/commands/fixture",id:"api/commands/fixture",title:"fixture",description:"Load a fixed set of data located in a file.",source:"@site/docs/api/commands/fixture.mdx",sourceDirName:"api/commands",slug:"/api/commands/fixture",permalink:"/cypress-documentation/api/commands/fixture",draft:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/api/commands/fixture.mdx",tags:[],version:"current",lastUpdatedAt:1698215491,formattedLastUpdatedAt:"Oct 25, 2023",frontMatter:{title:"fixture"},sidebar:"api",previous:{title:"exec",permalink:"/cypress-documentation/api/commands/exec"},next:{title:"focus",permalink:"/cypress-documentation/api/commands/focus"}},s={},p=[{value:"Syntax",id:"Syntax",level:2},{value:"Usage",id:"Usage",level:3},{value:"Arguments",id:"Arguments",level:3},{value:'Yields <Icon name="question-circle"/>',id:"Yields",level:3},{value:"Examples",id:"Examples",level:2},{value:"JSON",id:"JSON",level:3},{value:"Load a <code>users.json</code> fixture",id:"Load-a-usersjson-fixture",level:4},{value:"Omit the fixture file&#39;s extension",id:"Omit-the-fixture-files-extension",level:4},{value:"Use import statement",id:"Use-import-statement",level:4},{value:"Images",id:"Images",level:3},{value:"Image fixtures are sent as <code>base64</code> by default",id:"Image-fixtures-are-sent-as-base64-by-default",level:4},{value:"Change encoding of Image fixture",id:"Change-encoding-of-Image-fixture",level:4},{value:"Playing MP3 file",id:"Playing-MP3-file",level:3},{value:"Accessing Fixture Data",id:"Accessing-Fixture-Data",level:3},{value:"Using <code>.then()</code> to access fixture data",id:"Using-then-to-access-fixture-data",level:4},{value:"Using fixtures to bootstrap data",id:"Using-fixtures-to-bootstrap-data",level:4},{value:"Modifying fixture data before using it",id:"Modifying-fixture-data-before-using-it",level:4},{value:"Notes",id:"Notes",level:2},{value:"Shortcuts",id:"Shortcuts",level:3},{value:"Using the <code>fixture</code> <code>StaticResponse</code> property",id:"Using-the-fixture-StaticResponse-property",level:4},{value:"Validation",id:"Validation",level:3},{value:"Automated File Validation",id:"Automated-File-Validation",level:4},{value:"Encoding",id:"Encoding",level:3},{value:"Default Encoding",id:"Default-Encoding",level:4},{value:"<code>this</code> context",id:"this-context",level:3},{value:"Loaded just once",id:"Loaded-just-once",level:3},{value:"Rules",id:"Rules",level:2},{value:'Requirements <Icon name="question-circle"/>',id:"Requirements",level:3},{value:'Assertions <Icon name="question-circle"/>',id:"Assertions",level:3},{value:'Timeouts <Icon name="question-circle"/>',id:"Timeouts",level:3},{value:"Command Log",id:"Command-Log",level:2},{value:"See also",id:"See-also",level:2}],u=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",t)},d=u("Icon"),m=u("E2EOrCtTabs"),c={toc:p};function f(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Load a fixed set of data located in a file."),(0,i.kt)("h2",{id:"Syntax"},"Syntax"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.fixture(filePath)\ncy.fixture(filePath, encoding)\ncy.fixture(filePath, options)\ncy.fixture(filePath, encoding, options)\n")),(0,i.kt)("h3",{id:"Usage"},"Usage"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)(d,{name:"check-circle",color:"green",mdxType:"Icon"})," Correct Usage")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.fixture('users').as('usersJson') // load data from users.json\ncy.fixture('logo.png').then((logo) => {\n  // load data from logo.png\n})\n")),(0,i.kt)("h3",{id:"Arguments"},"Arguments"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)(d,{name:"angle-right",mdxType:"Icon"})," filePath")," ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"(String)"))),(0,i.kt)("p",null,"A path to a file within the\n",(0,i.kt)("a",{parentName:"p",href:"/guides/references/configuration#Folders-Files"},(0,i.kt)("inlineCode",{parentName:"a"},"fixturesFolder"))," , which\ndefaults to ",(0,i.kt)("inlineCode",{parentName:"p"},"cypress/fixtures"),"."),(0,i.kt)("p",null,"You can nest fixtures within folders and reference them by defining the path\nfrom the fixturesFolder:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.fixture('users/admin.json') // Get data from {fixturesFolder}/users/admin.json\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)(d,{name:"angle-right",mdxType:"Icon"})," encoding")," ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"(String)"))),(0,i.kt)("p",null,"The encoding to be used when reading the file. The following encodings are\nsupported:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"'ascii'")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"'base64'")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"'binary'")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"'hex'")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"'latin1'")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"'utf8'")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"'utf-8'")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"'ucs2'")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"'ucs-2'")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"'utf16le'")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"'utf-16le'")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"null"))),(0,i.kt)("p",null,"Using ",(0,i.kt)("inlineCode",{parentName:"p"},"null")," explicitly will return the fixture as a\n",(0,i.kt)("a",{parentName:"p",href:"/api/utilities/buffer"},(0,i.kt)("inlineCode",{parentName:"a"},"Cypress.Buffer"))," instance, regardless of file\nextension."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)(d,{name:"angle-right",mdxType:"Icon"})," options")," ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"(Object)"))),(0,i.kt)("p",null,"Pass in an options object to change the default behavior of ",(0,i.kt)("inlineCode",{parentName:"p"},"cy.fixture()"),"."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Option"),(0,i.kt)("th",{parentName:"tr",align:null},"Default"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"timeout")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/guides/references/configuration#Timeouts"},(0,i.kt)("inlineCode",{parentName:"a"},"responseTimeout"))),(0,i.kt)("td",{parentName:"tr",align:null},"Time to wait for ",(0,i.kt)("inlineCode",{parentName:"td"},"cy.fixture()")," to resolve before ",(0,i.kt)("a",{parentName:"td",href:"#Timeouts"},"timing out"))))),(0,i.kt)("h3",{id:"Yields"},"Yields ",(0,i.kt)("a",{parentName:"h3",href:"/guides/core-concepts/introduction-to-cypress#Subject-Management"},(0,i.kt)(d,{name:"question-circle",mdxType:"Icon"}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cy.fixture()")," yields the contents of the file. Formatting is determined by\nits file extension."),(0,i.kt)("li",{parentName:"ul"},"The yielded subject is ",(0,i.kt)("strong",{parentName:"li"},"not")," updated if the contents change on disk.")),(0,i.kt)("h2",{id:"Examples"},"Examples"),(0,i.kt)("h3",{id:"JSON"},"JSON"),(0,i.kt)("h4",{id:"Load-a-usersjson-fixture"},"Load a ",(0,i.kt)("inlineCode",{parentName:"h4"},"users.json")," fixture"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.fixture('users.json').as('usersData')\n")),(0,i.kt)("h4",{id:"Omit-the-fixture-files-extension"},"Omit the fixture file's extension"),(0,i.kt)("p",null,"When no extension is passed to ",(0,i.kt)("inlineCode",{parentName:"p"},"cy.fixture()"),", Cypress will search for files\nwith the specified name within the\n",(0,i.kt)("a",{parentName:"p",href:"/guides/references/configuration#Folders-Files"},(0,i.kt)("inlineCode",{parentName:"a"},"fixturesFolder"))," (which\ndefaults to ",(0,i.kt)("inlineCode",{parentName:"p"},"cypress/fixtures"),") and resolve the first one."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.fixture('admin').as('adminJSON')\n")),(0,i.kt)("p",null,"The example above would resolve in the following order:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"cypress/fixtures/admin.json")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"cypress/fixtures/admin.js")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"cypress/fixtures/admin.coffee")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"cypress/fixtures/admin.html")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"cypress/fixtures/admin.txt")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"cypress/fixtures/admin.csv")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"cypress/fixtures/admin.png")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"cypress/fixtures/admin.jpg")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"cypress/fixtures/admin.jpeg")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"cypress/fixtures/admin.gif")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"cypress/fixtures/admin.tif")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"cypress/fixtures/admin.tiff")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"cypress/fixtures/admin.zip"))),(0,i.kt)("h4",{id:"Use-import-statement"},"Use import statement"),(0,i.kt)("p",null,"If you are loading a JSON fixture, you can simply use the ",(0,i.kt)("inlineCode",{parentName:"p"},"import")," statement and\nlet the bundler load it:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"// cypress/e2e/spec.cy.js\nimport user from '../fixtures/user.json'\nit('loads the same object', () => {\n  cy.fixture('user').then((userFixture) => {\n    expect(user, 'the same data').to.deep.equal(userFixture)\n  })\n})\n")),(0,i.kt)("h3",{id:"Images"},"Images"),(0,i.kt)("h4",{id:"Image-fixtures-are-sent-as-base64-by-default"},"Image fixtures are sent as ",(0,i.kt)("inlineCode",{parentName:"h4"},"base64")," by default"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.fixture('images/logo.png').then((logo) => {\n  // logo will be encoded as base64\n  // and should look something like this:\n  // aIJKnwxydrB10NVWqhlmmC+ZiWs7otHotSAAAOw==...\n})\n")),(0,i.kt)("h4",{id:"Change-encoding-of-Image-fixture"},"Change encoding of Image fixture"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.fixture('images/logo.png', null).then((logo) => {\n  // logo will be read as a buffer\n  // and should look something like this:\n  // Buffer([0, 0, ...])\n  expect(Cypress.Buffer.isBuffer(logo)).to.be.true\n})\n")),(0,i.kt)("h3",{id:"Playing-MP3-file"},"Playing MP3 file"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.fixture('audio/sound.mp3', 'base64').then((mp3) => {\n  const uri = 'data:audio/mp3;base64,' + mp3\n  const audio = new Audio(uri)\n\n  audio.play()\n})\n")),(0,i.kt)("h3",{id:"Accessing-Fixture-Data"},"Accessing Fixture Data"),(0,i.kt)("h4",{id:"Using-then-to-access-fixture-data"},"Using ",(0,i.kt)("inlineCode",{parentName:"h4"},".then()")," to access fixture data"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.fixture('users').then((json) => {\n  cy.intercept('GET', '/users/**', json)\n})\n")),(0,i.kt)("h4",{id:"Using-fixtures-to-bootstrap-data"},"Using fixtures to bootstrap data"),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("a",{parentName:"p",href:"/examples/recipes#Server-Communication"},"Check out our example recipe using ",(0,i.kt)("inlineCode",{parentName:"a"},"cy.fixture()")," to bootstrap data for our application."))),(0,i.kt)("h4",{id:"Modifying-fixture-data-before-using-it"},"Modifying fixture data before using it"),(0,i.kt)("p",null,"You can modify fixture data directly before visiting a URL or mounting a\ncomponent that makes a network request to that URL."),(0,i.kt)("visit-mount-example",null,(0,i.kt)(m,{mdxType:"E2EOrCtTabs"},(0,i.kt)("pre",{parentName:"visit-mount-example"},(0,i.kt)("code",{parentName:"pre",className:"language-js"},"cy.fixture('user').then((user) => {\n  user.firstName = 'Jane'\n  cy.intercept('GET', '/users/1', user).as('getUser')\n})\n\ncy.visit('/users')\ncy.wait('@getUser').then(({ request }) => {\n  expect(request.body.firstName).to.eq('Jane')\n})\n")),(0,i.kt)("pre",{parentName:"visit-mount-example"},(0,i.kt)("code",{parentName:"pre",className:"language-js"},"cy.fixture('user').then((user) => {\n  user.firstName = 'Jane'\n  cy.intercept('GET', '/users/1', user).as('getUser')\n})\n\ncy.mount(<Users />)\ncy.wait('@getUser').then(({ request }) => {\n  expect(request.body.firstName).to.eq('Jane')\n})\n")))),(0,i.kt)("h2",{id:"Notes"},"Notes"),(0,i.kt)("h3",{id:"Shortcuts"},"Shortcuts"),(0,i.kt)("h4",{id:"Using-the-fixture-StaticResponse-property"},"Using the ",(0,i.kt)("inlineCode",{parentName:"h4"},"fixture")," ",(0,i.kt)("inlineCode",{parentName:"h4"},"StaticResponse")," property"),(0,i.kt)("p",null,"Fixtures can also be referenced directly without using the ",(0,i.kt)("inlineCode",{parentName:"p"},".fixture()")," command\nby using the special property ",(0,i.kt)("inlineCode",{parentName:"p"},"fixture")," on the\n",(0,i.kt)("a",{parentName:"p",href:"/api/commands/intercept"},(0,i.kt)("inlineCode",{parentName:"a"},"cy.intercept()"))," ",(0,i.kt)("inlineCode",{parentName:"p"},"StaticResponse")," object."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.intercept('GET', '/users/**', { fixture: 'users' })\n")),(0,i.kt)("h3",{id:"Validation"},"Validation"),(0,i.kt)("h4",{id:"Automated-File-Validation"},"Automated File Validation"),(0,i.kt)("p",null,"Cypress automatically validates your fixtures. If your ",(0,i.kt)("inlineCode",{parentName:"p"},".json"),", ",(0,i.kt)("inlineCode",{parentName:"p"},".js"),", or\n",(0,i.kt)("inlineCode",{parentName:"p"},".coffee")," files contain syntax errors, they will be shown in the Command Log."),(0,i.kt)("h3",{id:"Encoding"},"Encoding"),(0,i.kt)("h4",{id:"Default-Encoding"},"Default Encoding"),(0,i.kt)("p",null,"Cypress automatically determines the encoding for the following file types:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".json")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".js")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".coffee")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".html")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".txt")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".csv")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".png")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".jpg")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".jpeg")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".gif")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".tif")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".tiff")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".zip"))),(0,i.kt)("p",null,"For other types of files, they will be read as ",(0,i.kt)("inlineCode",{parentName:"p"},"utf8")," by default, unless\nspecified in the second argument of ",(0,i.kt)("inlineCode",{parentName:"p"},"cy.fixture()"),". You can specify ",(0,i.kt)("inlineCode",{parentName:"p"},"null")," as\nthe encoding in order to read the file as a\n",(0,i.kt)("a",{parentName:"p",href:"/api/utilities/buffer"},(0,i.kt)("inlineCode",{parentName:"a"},"Cypress.Buffer"))," instance instead."),(0,i.kt)("h3",{id:"this-context"},(0,i.kt)("inlineCode",{parentName:"h3"},"this")," context"),(0,i.kt)("p",null,"If you store and access the fixture data using ",(0,i.kt)("inlineCode",{parentName:"p"},"this")," test context object, make\nsure to use ",(0,i.kt)("inlineCode",{parentName:"p"},"function () { ... }")," callbacks. Otherwise the test engine will NOT\nhave ",(0,i.kt)("inlineCode",{parentName:"p"},"this")," pointing at the test context."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"describe('User page', () => {\n  beforeEach(function () {\n    // \"this\" points at the test context object\n    cy.fixture('user').then((user) => {\n      // \"this\" is still the test context object\n      this.user = user\n    })\n  })\n\n  // the test callback is in \"function () { ... }\" form\n  it('has user', function () {\n    // this.user exists\n    expect(this.user.firstName).to.equal('Jane')\n  })\n})\n")),(0,i.kt)("h3",{id:"Loaded-just-once"},"Loaded just once"),(0,i.kt)("p",null,"Please keep in mind that fixture files are assumed to be unchanged during the\ntest, and thus Cypress loads them just once. Even if you overwrite the fixture\nfile itself, the already loaded fixture data remains the same."),(0,i.kt)("p",null,"If you wish to dynamically change the contents of a file during your tests,\nconsider ",(0,i.kt)("a",{parentName:"p",href:"/api/commands/readfile"},(0,i.kt)("inlineCode",{parentName:"a"},"cy.readFile()"))," instead."),(0,i.kt)("p",null,"For example, if you want to reply to a network request with different object,\nthe following ",(0,i.kt)("strong",{parentName:"p"},"will not work"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"// \ud83d\udea8 DOES NOT WORK\ncy.intercept('GET', '/todos/1', { fixture: 'todo' }).as('todo')\n// application requests the /todos/1 resource\n// the intercept replies with the object from todo.json file\n\ncy.wait('@todo').then(() => {\n  cy.writeFile('/cypress/fixtures/todo.json', { title: 'New data' })\n})\n// application requests the /todos/1 resource again\n// the intercept replies with the originally loaded object\n// from the todo.json file and NOT { \"title\": \"New data\" }\n")),(0,i.kt)("p",null,"In this situation, avoid using the fixture file and instead respond to the\nnetwork request with the object"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"// \u2705 RESPOND WITH OBJECT\ncy.fixture('todo.json').then((todo) => {\n  cy.intercept('GET', '/todos/1', { body: todo }).as('todo')\n  // application requests the /todos/1 resource\n  // the intercept replies with the initial object\n\n  cy.wait('@todo').then(() => {\n    // modify the response object\n    todo.title = 'New data'\n    // and override the intercept\n    cy.intercept('GET', '/todos/1', { body: todo })\n  })\n})\n")),(0,i.kt)("h2",{id:"Rules"},"Rules"),(0,i.kt)("h3",{id:"Requirements"},"Requirements ",(0,i.kt)("a",{parentName:"h3",href:"/guides/core-concepts/introduction-to-cypress#Chains-of-Commands"},(0,i.kt)(d,{name:"question-circle",mdxType:"Icon"}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cy.fixture()")," requires being chained off of ",(0,i.kt)("inlineCode",{parentName:"li"},"cy"),".")),(0,i.kt)("h3",{id:"Assertions"},"Assertions ",(0,i.kt)("a",{parentName:"h3",href:"/guides/core-concepts/introduction-to-cypress#Assertions"},(0,i.kt)(d,{name:"question-circle",mdxType:"Icon"}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cy.fixture()")," will only run assertions you have chained once, and will not\n",(0,i.kt)("a",{parentName:"li",href:"/guides/core-concepts/retry-ability"},"retry"),".")),(0,i.kt)("h3",{id:"Timeouts"},"Timeouts ",(0,i.kt)("a",{parentName:"h3",href:"/guides/core-concepts/introduction-to-cypress#Timeouts"},(0,i.kt)(d,{name:"question-circle",mdxType:"Icon"}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cy.fixture()")," should never time out.")),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Because ",(0,i.kt)("inlineCode",{parentName:"p"},"cy.fixture()")," is asynchronous it is technically possible for there to\nbe a timeout while talking to the internal Cypress automation APIs. But for\npractical purposes it should never happen.")),(0,i.kt)("h2",{id:"Command-Log"},"Command Log"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cy.fixture()")," does ",(0,i.kt)("em",{parentName:"li"},"not")," log in the Command Log")),(0,i.kt)("h2",{id:"See-also"},"See also"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/guides/core-concepts/variables-and-aliases"},"Guide: Variables and Aliases")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/api/commands/intercept"},(0,i.kt)("inlineCode",{parentName:"a"},"cy.intercept()"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/api/commands/then"},(0,i.kt)("inlineCode",{parentName:"a"},".then()"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/api/commands/readfile"},(0,i.kt)("inlineCode",{parentName:"a"},".readFile()"))," for a similar command without caching\nand with builtin retryability"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/examples/recipes#Server-Communication"},"Recipe: Bootstrapping App Test Data")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/cypress-io/testing-workshop-cypress#fixtures"},"Fixtures"),"\nsection of the Cypress Testing Workshop"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://glebbahmutov.com/blog/fixtures-in-custom-commands/"},"Blog: Load Fixtures from Cypress Custom Commands"),"\nexplains how to load or import fixtures to be used in the Cypress custom\ncommands.")))}f.isMDXComponent=!0}}]);