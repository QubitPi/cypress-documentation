"use strict";(self.webpackChunkcypress_docusaurus_ts=self.webpackChunkcypress_docusaurus_ts||[]).push([[2333],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>k});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),m=p(n),u=i,k=m["".concat(s,".").concat(u)]||m[u]||c[u]||r;return n?a.createElement(k,l(l({ref:t},d),{},{components:n})):a.createElement(k,l({ref:t},d))}));function k(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[m]="string"==typeof e?e:i,l[1]=o;for(var p=2;p<r;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5897:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var a=n(7462),i=(n(7294),n(3905));const r={title:"visit",e2eSpecific:!0},l=void 0,o={unversionedId:"api/commands/visit",id:"api/commands/visit",title:"visit",description:"Visit a remote URL.",source:"@site/docs/api/commands/visit.mdx",sourceDirName:"api/commands",slug:"/api/commands/visit",permalink:"/cypress-documentation/api/commands/visit",draft:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/api/commands/visit.mdx",tags:[],version:"current",lastUpdatedAt:1696480060,formattedLastUpdatedAt:"Oct 5, 2023",frontMatter:{title:"visit",e2eSpecific:!0},sidebar:"api",previous:{title:"viewport",permalink:"/cypress-documentation/api/commands/viewport"},next:{title:"wait",permalink:"/cypress-documentation/api/commands/wait"}},s={},p=[{value:"Syntax",id:"Syntax",level:2},{value:"Usage",id:"Usage",level:3},{value:"Arguments",id:"Arguments",level:3},{value:'Yields <Icon name="question-circle"/>',id:"Yields",level:3},{value:"Examples",id:"Examples",level:2},{value:"URL",id:"URL",level:3},{value:"Visit a local server running on <code>http://localhost:8000</code>",id:"Visit-a-local-server-running-on-httplocalhost8000",level:4},{value:"Options",id:"Options",level:3},{value:"Change the default timeout",id:"Change-the-default-timeout",level:4},{value:"Add basic auth headers",id:"Add-basic-auth-headers",level:4},{value:"Provide an <code>onBeforeLoad</code> callback function",id:"Provide-an-onBeforeLoad-callback-function",level:4},{value:"Provide an <code>onLoad</code> callback function",id:"Provide-an-onLoad-callback-function",level:4},{value:"Add query parameters",id:"Add-query-parameters",level:4},{value:"Submit a form",id:"Submit-a-form",level:4},{value:"Notes",id:"Notes",level:2},{value:"Prefixes",id:"Prefixes",level:3},{value:"Visit is automatically prefixed with <code>baseUrl</code>",id:"Visit-is-automatically-prefixed-with-baseUrl",level:4},{value:"Visit local files",id:"Visit-local-files",level:4},{value:"Visit local file when <code>baseUrl</code> is set",id:"Visit-local-file-when-baseUrl-is-set",level:5},{value:"Redirects",id:"Redirects",level:3},{value:"Visit will automatically follow redirects",id:"Visit-will-automatically-follow-redirects",level:4},{value:"Protocol",id:"Protocol",level:3},{value:"Protocol can be omitted from common hosts",id:"Protocol-can-be-omitted-from-common-hosts",level:4},{value:"Window",id:"Window",level:3},{value:"Visit will always yield the remote page&#39;s <code>window</code> object when it resolves",id:"Visit-will-always-yield-the-remote-pages-window-object-when-it-resolves",level:4},{value:"User agent",id:"User-agent",level:3},{value:"Routing",id:"Routing",level:3},{value:"Prevent requests before a remote page initially loads",id:"Prevent-requests-before-a-remote-page-initially-loads",level:4},{value:"Rules",id:"Rules",level:2},{value:'Requirements <Icon name="question-circle"/>',id:"Requirements",level:3},{value:'Assertions <Icon name="question-circle"/>',id:"Assertions",level:3},{value:'Timeouts <Icon name="question-circle"/>',id:"Timeouts",level:3},{value:"Visiting cross-origin sites",id:"Visiting-cross-origin-sites",level:2},{value:"Command Log",id:"Command-Log",level:2},{value:"History",id:"History",level:2},{value:"See also",id:"See-also",level:2}],d=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",t)},m=d("Icon"),c=d("CypressConfigFileTabs"),u=d("DocsImage"),k={toc:p};function h(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},k,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Visit a remote URL."),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("strong",null,"Best Practice"),(0,i.kt)("p",{parentName:"admonition"},"We recommend setting a ",(0,i.kt)("inlineCode",{parentName:"p"},"baseUrl")," when using ",(0,i.kt)("inlineCode",{parentName:"p"},"cy.visit()"),"."),(0,i.kt)("p",{parentName:"admonition"},"Read about\n",(0,i.kt)("a",{parentName:"p",href:"/guides/references/best-practices#Setting-a-global-baseUrl"},"best practices"),"\nhere.")),(0,i.kt)("h2",{id:"Syntax"},"Syntax"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.visit(url)\ncy.visit(url, options)\ncy.visit(options)\n")),(0,i.kt)("h3",{id:"Usage"},"Usage"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)(m,{name:"check-circle",color:"green",mdxType:"Icon"})," Correct Usage")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.visit('/') // visits the baseUrl\ncy.visit('index.html') // visits the local file \"index.html\" if baseUrl is null\ncy.visit('http://localhost:3000') // specify full URL if baseUrl is null or the domain is different the baseUrl\ncy.visit({\n  url: '/pages/hello.html',\n  method: 'GET',\n})\n")),(0,i.kt)("h3",{id:"Arguments"},"Arguments"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)(m,{name:"angle-right",mdxType:"Icon"})," url")," ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"(String)"))),(0,i.kt)("p",null,"The URL to visit."),(0,i.kt)("p",null,"Cypress will prefix the URL with the ",(0,i.kt)("inlineCode",{parentName:"p"},"baseUrl")," configured in your\n",(0,i.kt)("a",{parentName:"p",href:"/guides/references/configuration#Global"},"global configuration")," if set."),(0,i.kt)("p",null,"If the ",(0,i.kt)("inlineCode",{parentName:"p"},"baseUrl")," has not been set, you will need to specify a fully qualified\nURL or Cypress will attempt to act as your web server. See the\n",(0,i.kt)("a",{parentName:"p",href:"#Prefixes"},"prefixes notes")," for more details."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Note:")," visiting a new domain requires the Cypress window to reload. You\ncannot visit different super domains in a single test."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)(m,{name:"angle-right",mdxType:"Icon"})," options")," ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"(Object)"))),(0,i.kt)("p",null,"Pass in an options object to control the behavior of ",(0,i.kt)("inlineCode",{parentName:"p"},"cy.visit()"),"."),(0,i.kt)("p",null,"By default, the ",(0,i.kt)("inlineCode",{parentName:"p"},"cy.visit()")," commands' will use the ",(0,i.kt)("inlineCode",{parentName:"p"},"pageLoadTimeout")," and\n",(0,i.kt)("inlineCode",{parentName:"p"},"baseUrl")," set globally in your\n",(0,i.kt)("a",{parentName:"p",href:"/guides/references/configuration#Global"},"configuration"),"."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Option"),(0,i.kt)("th",{parentName:"tr",align:null},"Default"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"url")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"null")),(0,i.kt)("td",{parentName:"tr",align:null},"The URL to visit. This value will be appended to the ",(0,i.kt)("inlineCode",{parentName:"td"},"baseUrl")," if one is configured. Behaves the same as the ",(0,i.kt)("inlineCode",{parentName:"td"},"url")," argument.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"method")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"GET")),(0,i.kt)("td",{parentName:"tr",align:null},"The HTTP method to use in the visit. Can be ",(0,i.kt)("inlineCode",{parentName:"td"},"GET")," or ",(0,i.kt)("inlineCode",{parentName:"td"},"POST"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"body")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"null")),(0,i.kt)("td",{parentName:"tr",align:null},"An optional body to send along with a ",(0,i.kt)("inlineCode",{parentName:"td"},"POST")," request. If it is a string, it will be passed along unmodified. If it is an object, it will be URL encoded to a string and sent with a ",(0,i.kt)("inlineCode",{parentName:"td"},"Content-Type: application/x-www-urlencoded")," header.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"headers")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"{}")),(0,i.kt)("td",{parentName:"tr",align:null},"An object that maps HTTP header names to values to be sent along with the request. ",(0,i.kt)("em",{parentName:"td"},"Note:")," ",(0,i.kt)("inlineCode",{parentName:"td"},"headers")," will only be sent for the initial ",(0,i.kt)("inlineCode",{parentName:"td"},"cy.visit()")," request, not for any subsequent requests.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"qs")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"null")),(0,i.kt)("td",{parentName:"tr",align:null},"Query parameters to append to the ",(0,i.kt)("inlineCode",{parentName:"td"},"url")," of the request")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"log")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"true")),(0,i.kt)("td",{parentName:"tr",align:null},"Displays the command in the ",(0,i.kt)("a",{parentName:"td",href:"/guides/core-concepts/cypress-app#Command-Log"},"Command log"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"auth")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"null")),(0,i.kt)("td",{parentName:"tr",align:null},"Adds Basic Authorization headers")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"failOnStatusCode")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"true")),(0,i.kt)("td",{parentName:"tr",align:null},"Whether to fail on response codes other than ",(0,i.kt)("inlineCode",{parentName:"td"},"2xx")," and ",(0,i.kt)("inlineCode",{parentName:"td"},"3xx"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"onBeforeLoad")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"function")),(0,i.kt)("td",{parentName:"tr",align:null},"Called before your page has loaded all of its resources.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"onLoad")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"function")),(0,i.kt)("td",{parentName:"tr",align:null},"Called once your page has fired its load event.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"retryOnStatusCodeFailure")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"false")),(0,i.kt)("td",{parentName:"tr",align:null},"Whether Cypress should automatically retry status code errors under the hood. Cypress will retry a request up to 4 times if this is set to true.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"retryOnNetworkFailure")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"true")),(0,i.kt)("td",{parentName:"tr",align:null},"Whether Cypress should automatically retry transient network errors under the hood. Cypress will retry a request up to 4 times if this is set to true.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"timeout")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/guides/references/configuration#Timeouts"},(0,i.kt)("inlineCode",{parentName:"a"},"pageLoadTimeout"))),(0,i.kt)("td",{parentName:"tr",align:null},"Time to wait for ",(0,i.kt)("inlineCode",{parentName:"td"},"cy.visit()")," to resolve before ",(0,i.kt)("a",{parentName:"td",href:"#Timeouts"},"timing out")," Note: Network requests are limited by the underlying operating system, and may still time out if this value is increased.")))),(0,i.kt)("p",null,"You can also set all ",(0,i.kt)("inlineCode",{parentName:"p"},"cy.visit()")," commands' ",(0,i.kt)("inlineCode",{parentName:"p"},"pageLoadTimeout")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"baseUrl"),"\nglobally in the ",(0,i.kt)("a",{parentName:"p",href:"/guides/references/configuration"},"Cypress configuration"),"."),(0,i.kt)("h3",{id:"Yields"},"Yields ",(0,i.kt)("a",{parentName:"h3",href:"/guides/core-concepts/introduction-to-cypress#Subject-Management"},(0,i.kt)(m,{name:"question-circle",mdxType:"Icon"}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cy.visit()")," yields the ",(0,i.kt)("inlineCode",{parentName:"li"},"window")," object after the page finishes loading."),(0,i.kt)("li",{parentName:"ul"},"It is ",(0,i.kt)("a",{parentName:"li",href:"/guides/core-concepts/retry-ability#Only-queries-are-retried"},"unsafe"),"\nto chain further commands that rely on the yielded ",(0,i.kt)("inlineCode",{parentName:"li"},"window")," after\n",(0,i.kt)("inlineCode",{parentName:"li"},"cy.visit()"),".")),(0,i.kt)("p",null,"Let's confirm the ",(0,i.kt)("inlineCode",{parentName:"p"},"window.navigator.language")," after visiting the site:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.visit('/') // yields the window object\n  .its('navigator.language') // yields window.navigator.language\n  .should('equal', 'en-US') // asserts the expected value\n")),(0,i.kt)("h2",{id:"Examples"},"Examples"),(0,i.kt)("h3",{id:"URL"},"URL"),(0,i.kt)("h4",{id:"Visit-a-local-server-running-on-httplocalhost8000"},"Visit a local server running on ",(0,i.kt)("inlineCode",{parentName:"h4"},"http://localhost:8000")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"cy.visit()")," resolves when the remote page fires its ",(0,i.kt)("inlineCode",{parentName:"p"},"load")," event."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.visit('http://localhost:8000')\n")),(0,i.kt)("h3",{id:"Options"},"Options"),(0,i.kt)("h4",{id:"Change-the-default-timeout"},"Change the default timeout"),(0,i.kt)("p",null,"Overrides the ",(0,i.kt)("inlineCode",{parentName:"p"},"pageLoadTimeout")," set globally in your\n",(0,i.kt)("a",{parentName:"p",href:"/guides/references/configuration"},"configuration")," for this page load."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"// Wait 30 seconds for page 'load' event\ncy.visit('/index.html', { timeout: 30000 })\n")),(0,i.kt)("h4",{id:"Add-basic-auth-headers"},"Add basic auth headers"),(0,i.kt)("p",null,"Cypress will automatically apply the right authorization headers if you're\nattempting to visit an application that requires\n",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication"},"Basic Authentication"),"."),(0,i.kt)("p",null,"Provide the ",(0,i.kt)("inlineCode",{parentName:"p"},"username")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"password")," in the ",(0,i.kt)("inlineCode",{parentName:"p"},"auth")," object. Then all subsequent\nrequests matching the origin you're testing will have these attached at the\nnetwork level."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.visit('https://example.cypress.io/', {\n  auth: {\n    username: 'wile',\n    password: 'coyote',\n  },\n})\n")),(0,i.kt)("p",null,"You can also provide the username and password directly in the URL."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"// this is the same thing as providing the auth object\ncy.visit('https://wile:coyote@example.cypress.io')\n")),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Cypress will automatically attach this header at the network proxy level,\noutside of the browser. Therefore you ",(0,i.kt)("strong",{parentName:"p"},"will not")," see this header in the Dev\nTools.")),(0,i.kt)("h4",{id:"Provide-an-onBeforeLoad-callback-function"},"Provide an ",(0,i.kt)("inlineCode",{parentName:"h4"},"onBeforeLoad")," callback function"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"onBeforeLoad")," is called as soon as possible, before your page has loaded all of\nits resources. Your scripts will not be ready at this point, but it's a great\nhook to potentially manipulate the page."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.visit('http://localhost:3000/#dashboard', {\n  onBeforeLoad: (contentWindow) => {\n    // contentWindow is the remote page's window object\n  },\n})\n")),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Check out our example recipes using ",(0,i.kt)("inlineCode",{parentName:"p"},"cy.visit()"),"'s ",(0,i.kt)("inlineCode",{parentName:"p"},"onBeforeLoad")," option to:"),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/examples/recipes#Server-Communication"},"Bootstrapping your App")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/examples/recipes#Logging-In"},"Set a token to ",(0,i.kt)("inlineCode",{parentName:"a"},"localStorage")," for login during Single Sign On")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/examples/recipes#Stubbing-and-spying"},"Stub ",(0,i.kt)("inlineCode",{parentName:"a"},"window.fetch"))))),(0,i.kt)("h4",{id:"Provide-an-onLoad-callback-function"},"Provide an ",(0,i.kt)("inlineCode",{parentName:"h4"},"onLoad")," callback function"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"onLoad")," is called once your page has fired its ",(0,i.kt)("inlineCode",{parentName:"p"},"load")," event. All of the\nscripts, stylesheets, html and other resources are guaranteed to be available at\nthis point."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.visit('http://localhost:3000/#/users', {\n  onLoad: (contentWindow) => {\n    // contentWindow is the remote page's window object\n    if (contentWindow.angular) {\n      // do something\n    }\n  },\n})\n")),(0,i.kt)("h4",{id:"Add-query-parameters"},"Add query parameters"),(0,i.kt)("p",null,"You can provide query parameters as an object to ",(0,i.kt)("inlineCode",{parentName:"p"},"cy.visit()")," by passing ",(0,i.kt)("inlineCode",{parentName:"p"},"qs")," to\n",(0,i.kt)("inlineCode",{parentName:"p"},"options"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"// visits http://localhost:3500/users?page=1&role=admin\ncy.visit('http://localhost:3500/users', {\n  qs: {\n    page: '1',\n    role: 'admin',\n  },\n})\n")),(0,i.kt)("p",null,"The parameters passed to ",(0,i.kt)("inlineCode",{parentName:"p"},"qs")," will be merged into existing query parameters on\nthe ",(0,i.kt)("inlineCode",{parentName:"p"},"url"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"// visits https://example.cypress.io/users?page=1&admin=true\ncy.visit('https://example.cypress.io/users?page=1', {\n  qs: { admin: true },\n})\n")),(0,i.kt)("h4",{id:"Submit-a-form"},"Submit a form"),(0,i.kt)("p",null,"To send a request that looks like a user submitting an HTML form, use a ",(0,i.kt)("inlineCode",{parentName:"p"},"POST"),"\nmethod with a ",(0,i.kt)("inlineCode",{parentName:"p"},"body")," containing the form values:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.visit({\n  url: 'http://localhost:3000/cgi-bin/newsletterSignup',\n  method: 'POST',\n  body: {\n    name: 'George P. Burdell',\n    email: 'burdell@microsoft.com',\n  },\n})\n")),(0,i.kt)("h2",{id:"Notes"},"Notes"),(0,i.kt)("h3",{id:"Prefixes"},"Prefixes"),(0,i.kt)("h4",{id:"Visit-is-automatically-prefixed-with-baseUrl"},"Visit is automatically prefixed with ",(0,i.kt)("inlineCode",{parentName:"h4"},"baseUrl")),(0,i.kt)("p",null,"Cypress will prefix the URL with the ",(0,i.kt)("inlineCode",{parentName:"p"},"baseUrl")," if it has been set. Configure\n",(0,i.kt)("inlineCode",{parentName:"p"},"baseUrl")," in the ",(0,i.kt)("a",{parentName:"p",href:"/guides/references/configuration"},"Cypress configuration")," to\nprevent repeating yourself in every ",(0,i.kt)("inlineCode",{parentName:"p"},"cy.visit()")," command."),(0,i.kt)("cypress-config-example",null,(0,i.kt)(c,{mdxType:"CypressConfigFileTabs"},(0,i.kt)("pre",{parentName:"cypress-config-example"},(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const { defineConfig } = require('cypress')\n\nmodule.exports = defineConfig({\n  e2e: {\n    baseUrl: 'http://localhost:3000/#/',\n  },\n})\n")),(0,i.kt)("pre",{parentName:"cypress-config-example"},(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"import { defineConfig } from 'cypress'\n\nexport default defineConfig({\n  e2e: {\n    baseUrl: 'http://localhost:3000/#/',\n  },\n})\n")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.visit('dashboard') // Visits http://localhost:3000/#/dashboard\n")),(0,i.kt)("p",null,"If you would like to visit a different host when the ",(0,i.kt)("inlineCode",{parentName:"p"},"baseUrl")," has been set,\nprovide the fully qualified URL you would like to go to."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.visit('https://example.cypress.io')\n")),(0,i.kt)("h4",{id:"Visit-local-files"},"Visit local files"),(0,i.kt)("p",null,"Cypress will automatically attempt to serve your files if you don't provide a\nhost and ",(0,i.kt)("inlineCode",{parentName:"p"},"baseUrl")," ",(0,i.kt)("strong",{parentName:"p"},"is not defined"),". The path should be relative to your\nproject's root folder (the directory that contains the\n",(0,i.kt)("a",{parentName:"p",href:"/guides/references/configuration"},"Cypress configuration file"),")."),(0,i.kt)("p",null,"Having Cypress serve your files is useful in smaller projects and example apps,\nbut isn't recommended for production apps. It is always better to run your own\nserver and provide the url to Cypress."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.visit('app/index.html')\n")),(0,i.kt)("h5",{id:"Visit-local-file-when-baseUrl-is-set"},"Visit local file when ",(0,i.kt)("inlineCode",{parentName:"h5"},"baseUrl")," is set"),(0,i.kt)("p",null,"If you have ",(0,i.kt)("inlineCode",{parentName:"p"},"baseUrl")," set, but need to visit a local file in a single test or a\ngroup of tests, disable the ",(0,i.kt)("inlineCode",{parentName:"p"},"baseUrl")," using\n",(0,i.kt)("a",{parentName:"p",href:"/guides/references/configuration#Test-Configuration"},"per-test configuration"),".\nImagine this Cypress configuration:"),(0,i.kt)("cypress-config-example",null,(0,i.kt)(c,{mdxType:"CypressConfigFileTabs"},(0,i.kt)("pre",{parentName:"cypress-config-example"},(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const { defineConfig } = require('cypress')\n\nmodule.exports = defineConfig({\n  e2e: {\n    baseUrl: 'https://example.cypress.io',\n  },\n})\n")),(0,i.kt)("pre",{parentName:"cypress-config-example"},(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"import { defineConfig } from 'cypress'\n\nexport default defineConfig({\n  e2e: {\n    baseUrl: 'https://example.cypress.io',\n  },\n})\n")))),(0,i.kt)("p",null,"The first test visits the ",(0,i.kt)("inlineCode",{parentName:"p"},"baseUrl"),", while the second test visits the local\nfile."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"it('visits base url', () => {\n  cy.visit('/')\n  cy.contains('h1', 'Kitchen Sink')\n})\nit('visits local file', { baseUrl: null }, () => {\n  cy.visit('index.html')\n  cy.contains('local file')\n})\n")),(0,i.kt)("h3",{id:"Redirects"},"Redirects"),(0,i.kt)("h4",{id:"Visit-will-automatically-follow-redirects"},"Visit will automatically follow redirects"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"// we aren't logged in, so our web server\n// redirected us to /login\ncy.visit('http://localhost:3000/admin')\ncy.url().should('match', /login/)\n")),(0,i.kt)("h3",{id:"Protocol"},"Protocol"),(0,i.kt)("h4",{id:"Protocol-can-be-omitted-from-common-hosts"},"Protocol can be omitted from common hosts"),(0,i.kt)("p",null,"Cypress automatically prepends the ",(0,i.kt)("inlineCode",{parentName:"p"},"http://")," protocol to common hosts. If you're\nnot using one of these 3 hosts, then make sure to provide the protocol."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.visit('localhost:3000') // Visits http://localhost:3000\ncy.visit('0.0.0.0:3000') // Visits http://0.0.0.0:3000\ncy.visit('127.0.0.1:3000') // Visits http://127.0.0.1:3000\n")),(0,i.kt)("h3",{id:"Window"},"Window"),(0,i.kt)("h4",{id:"Visit-will-always-yield-the-remote-pages-window-object-when-it-resolves"},"Visit will always yield the remote page's ",(0,i.kt)("inlineCode",{parentName:"h4"},"window")," object when it resolves"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.visit('index.html').then((contentWindow) => {\n  // contentWindow is the remote page's window object\n})\n")),(0,i.kt)("h3",{id:"User-agent"},"User agent"),(0,i.kt)("p",null,"Trying to change the ",(0,i.kt)("inlineCode",{parentName:"p"},"User-Agent"),"?"),(0,i.kt)("p",null,"See\n",(0,i.kt)("a",{parentName:"p",href:"/faq/questions/using-cypress-faq#Can-I-override-or-change-the-default-user-agent-the-browser-uses"},"how to override the browser's default user agent"),"."),(0,i.kt)("h3",{id:"Routing"},"Routing"),(0,i.kt)("h4",{id:"Prevent-requests-before-a-remote-page-initially-loads"},"Prevent requests before a remote page initially loads"),(0,i.kt)("p",null,"One common scenario Cypress supports is visiting a remote page and also\npreventing any Ajax requests from immediately going out."),(0,i.kt)("p",null,"You may think this works:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"// this code may not work depending on implementation\ncy.visit('http://localhost:8000/#/app')\ncy.intercept('/users/**', { fixture: 'users' })\n")),(0,i.kt)("p",null,"But if your app makes a request upon being initialized, ",(0,i.kt)("em",{parentName:"p"},"the above code will not\nwork"),". ",(0,i.kt)("inlineCode",{parentName:"p"},"cy.visit()")," will resolve once its ",(0,i.kt)("inlineCode",{parentName:"p"},"load")," event fires. The\n",(0,i.kt)("a",{parentName:"p",href:"/api/commands/intercept"},(0,i.kt)("inlineCode",{parentName:"a"},"cy.intercept()"))," command is not processed until\n",(0,i.kt)("em",{parentName:"p"},"after")," ",(0,i.kt)("inlineCode",{parentName:"p"},"cy.visit()")," resolves."),(0,i.kt)("p",null,"Many applications will have already begun routing, initialization, and requests\nby the time the ",(0,i.kt)("inlineCode",{parentName:"p"},"cy.visit()")," in the above code resolves. Therefore creating a\n",(0,i.kt)("a",{parentName:"p",href:"/api/commands/intercept"},(0,i.kt)("inlineCode",{parentName:"a"},"cy.intercept()"))," route will happen too late, and\nCypress will not process the requests."),(0,i.kt)("p",null,"Luckily Cypress supports this use case. Reverse the order of the commands:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"// this code is probably what you want\ncy.intercept('/users/**', {...})\ncy.visit('http://localhost:8000/#/app')\n")),(0,i.kt)("p",null,"Cypress will automatically apply the routes to the very next ",(0,i.kt)("inlineCode",{parentName:"p"},"cy.visit()")," and\ndoes so immediately before any of your application code runs."),(0,i.kt)("h2",{id:"Rules"},"Rules"),(0,i.kt)("h3",{id:"Requirements"},"Requirements ",(0,i.kt)("a",{parentName:"h3",href:"/guides/core-concepts/introduction-to-cypress#Chains-of-Commands"},(0,i.kt)(m,{name:"question-circle",mdxType:"Icon"}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cy.visit()")," requires being chained off of ",(0,i.kt)("inlineCode",{parentName:"li"},"cy"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cy.visit()")," requires the response to be ",(0,i.kt)("inlineCode",{parentName:"li"},"content-type: text/html"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cy.visit()")," requires the response code to be ",(0,i.kt)("inlineCode",{parentName:"li"},"2xx")," after following redirects."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cy.visit()")," requires the load ",(0,i.kt)("inlineCode",{parentName:"li"},"load")," event to eventually fire.")),(0,i.kt)("h3",{id:"Assertions"},"Assertions ",(0,i.kt)("a",{parentName:"h3",href:"/guides/core-concepts/introduction-to-cypress#Assertions"},(0,i.kt)(m,{name:"question-circle",mdxType:"Icon"}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cy.visit()")," will automatically wait for assertions you have chained to pass")),(0,i.kt)("h3",{id:"Timeouts"},"Timeouts ",(0,i.kt)("a",{parentName:"h3",href:"/guides/core-concepts/introduction-to-cypress#Timeouts"},(0,i.kt)(m,{name:"question-circle",mdxType:"Icon"}))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cy.visit()")," can time out waiting for the page to fire its ",(0,i.kt)("inlineCode",{parentName:"li"},"load")," event."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cy.visit()")," can time out waiting for assertions you've added to pass.")),(0,i.kt)("h2",{id:"Visiting-cross-origin-sites"},"Visiting cross-origin sites"),(0,i.kt)("p",null,"After visiting a cross-origin site, to interact with the content, you must use a\n",(0,i.kt)("a",{parentName:"p",href:"/api/commands/origin"},(0,i.kt)("inlineCode",{parentName:"a"},"cy.origin()"))," block."),(0,i.kt)("p",null,"When visiting a cross-origin site, the ",(0,i.kt)("inlineCode",{parentName:"p"},"onBeforeLoad")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"onLoad")," options are\nnot supported."),(0,i.kt)("h2",{id:"Command-Log"},"Command Log"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"Visit example application in a ",(0,i.kt)("inlineCode",{parentName:"em"},"beforeEach")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"beforeEach(() => {\n  cy.visit('https://example.cypress.io/commands/viewport')\n})\n")),(0,i.kt)("p",null,"The commands above will display in the Command Log as:"),(0,i.kt)(u,{src:"/img/api/visit/visit-example-page-in-before-each-of-test.png",alt:"Command Log visit",mdxType:"DocsImage"}),(0,i.kt)("p",null,"When clicking on ",(0,i.kt)("inlineCode",{parentName:"p"},"visit")," within the command log, the console outputs the\nfollowing:"),(0,i.kt)(u,{src:"/img/api/visit/visit-shows-any-redirect-or-cookies-set-in-the-console.png",alt:"console Log visit",mdxType:"DocsImage"}),(0,i.kt)("h2",{id:"History"},"History"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Version"),(0,i.kt)("th",{parentName:"tr",align:null},"Changes"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/guides/references/changelog#11-0-0"},"11.0.0")),(0,i.kt)("td",{parentName:"tr",align:null},"Removed ",(0,i.kt)("inlineCode",{parentName:"td"},"experimentalSessionAndOrigin")," reference")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/guides/references/changelog#3-5-0"},"3.5.0")),(0,i.kt)("td",{parentName:"tr",align:null},"Added support for options ",(0,i.kt)("inlineCode",{parentName:"td"},"qs"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/guides/references/changelog#3-3-0"},"3.3.0")),(0,i.kt)("td",{parentName:"tr",align:null},"Added support for options ",(0,i.kt)("inlineCode",{parentName:"td"},"retryOnStatusCodeFailure")," and ",(0,i.kt)("inlineCode",{parentName:"td"},"retryOnNetworkFailure"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/guides/references/changelog#3-2-0"},"3.2.0")),(0,i.kt)("td",{parentName:"tr",align:null},"Added options ",(0,i.kt)("inlineCode",{parentName:"td"},"url"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"method"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"body"),", and ",(0,i.kt)("inlineCode",{parentName:"td"},"headers"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/guides/references/changelog#1-1-3"},"1.1.3")),(0,i.kt)("td",{parentName:"tr",align:null},"Added option ",(0,i.kt)("inlineCode",{parentName:"td"},"failOnStatusCode"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/guides/references/changelog#0-18-2"},"0.18.2")),(0,i.kt)("td",{parentName:"tr",align:null},"Automatically send ",(0,i.kt)("inlineCode",{parentName:"td"},"Accept: text/html,*/*")," request header")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/guides/references/changelog#0-18-2"},"0.18.2")),(0,i.kt)("td",{parentName:"tr",align:null},"Automatically send ",(0,i.kt)("inlineCode",{parentName:"td"},"User-Agent")," header")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/guides/references/changelog#0-17-0"},"0.17.0")),(0,i.kt)("td",{parentName:"tr",align:null},"Cannot ",(0,i.kt)("inlineCode",{parentName:"td"},"cy.visit()")," two different super domains in a single test")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/guides/references/changelog#0-6-8"},"0.6.8")),(0,i.kt)("td",{parentName:"tr",align:null},"Added option ",(0,i.kt)("inlineCode",{parentName:"td"},"log"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/guides/references/changelog#0-4-3"},"0.4.3")),(0,i.kt)("td",{parentName:"tr",align:null},"Added option ",(0,i.kt)("inlineCode",{parentName:"td"},"onBeforeLoad"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/guides/references/changelog#0-3.3"},"< 0.3.3")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"cy.visit()")," command added")))),(0,i.kt)("h2",{id:"See-also"},"See also"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/api/commands/go"},(0,i.kt)("inlineCode",{parentName:"a"},"cy.go()"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/api/commands/reload"},(0,i.kt)("inlineCode",{parentName:"a"},"cy.reload()"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/api/commands/request"},(0,i.kt)("inlineCode",{parentName:"a"},"cy.request()"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/examples/recipes#Server-Communication"},"Recipe: Bootstrapping your App")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/examples/recipes#Logging-In"},"Recipe: Logging In - Single Sign on")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/examples/recipes#Stubbing-and-spying"},"Recipe: Stubbing ",(0,i.kt)("inlineCode",{parentName:"a"},"window.fetch")))))}h.isMDXComponent=!0}}]);