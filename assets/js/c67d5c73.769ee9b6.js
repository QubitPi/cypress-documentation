"use strict";(self.webpackChunkcypress_docusaurus_ts=self.webpackChunkcypress_docusaurus_ts||[]).push([[4176],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var p=a.createContext({}),l=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=l(e.components);return a.createElement(p.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,s=e.mdxType,o=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=l(n),m=s,h=u["".concat(p,".").concat(m)]||u[m]||d[m]||o;return n?a.createElement(h,r(r({ref:t},c),{},{components:n})):a.createElement(h,r({ref:t},c))}));function h(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var o=n.length,r=new Array(o);r[0]=m;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[u]="string"==typeof e?e:s,r[1]=i;for(var l=2;l<o;l++)r[l]=n[l];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3949:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>y,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var a=n(7462),s=(n(7294),n(3905));const o={title:"Cypress Component Testing",sidebar_position:20,sidebar_label:"Getting Started"},r=void 0,i={unversionedId:"guides/component-testing/getting-started",id:"guides/component-testing/getting-started",title:"Cypress Component Testing",description:"Getting started with Component Testing is super simple. Follow the guide below for a step by step guide on how to configure your project and quickly begin writing your first tests in just a few seconds.",source:"@site/docs/guides/component-testing/getting-started.mdx",sourceDirName:"guides/component-testing",slug:"/guides/component-testing/getting-started",permalink:"/cypress-documentation/guides/component-testing/getting-started",draft:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/guides/component-testing/getting-started.mdx",tags:[],version:"current",lastUpdatedAt:1696481464,formattedLastUpdatedAt:"Oct 5, 2023",sidebarPosition:20,frontMatter:{title:"Cypress Component Testing",sidebar_position:20,sidebar_label:"Getting Started"},sidebar:"guides",previous:{title:"Overview",permalink:"/cypress-documentation/guides/component-testing/overview"},next:{title:"Styling Components",permalink:"/cypress-documentation/guides/component-testing/styling-components"}},p={},l=[{value:"Getting Started",id:"Getting-Started",level:2},{value:"Install Cypress",id:"Install-Cypress",level:3},{value:"Open Cypress:",id:"Open-Cypress",level:3},{value:"Configuring Component Testing",id:"Configuring-Component-Testing",level:2},{value:"Select Testing Type",id:"Select-Testing-Type",level:3},{value:"Project Setup",id:"Project-Setup",level:3},{value:"Installing Dependencies",id:"Installing-Dependencies",level:3},{value:"Config Files",id:"Config-Files",level:3},{value:"Choose A Browser",id:"Choose-A-Browser",level:3},{value:"Writing Your First Test",id:"Writing-Your-First-Test",level:2},{value:"Frameworks",id:"Frameworks",level:3},{value:"Your First Component Test",id:"Your-First-Component-Test",level:3},{value:"Test Explanation",id:"Test-Explanation",level:3},{value:"Running the Test",id:"Running-the-Test",level:2},{value:"Selectors &amp; Assertions",id:"Selectors--Assertions",level:3},{value:"Passing Props to Components",id:"Passing-Props-to-Components",level:3},{value:"Testing Interactions",id:"Testing-Interactions",level:3},{value:"Testing Components with Events",id:"Testing-Components-with-Events",level:2},{value:"Using Spies",id:"Using-Spies",level:3},{value:"What&#39;s Next?",id:"Whats-Next",level:2}],c=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,s.kt)("div",t)},u=c("DocsVideo"),d=c("DocsImage"),m=c("Tabs"),h=c("TabItem"),g={toc:l};function y(e){let{components:t,...n}=e;return(0,s.kt)("wrapper",(0,a.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"Getting started with Component Testing is super simple. Follow the guide below for a step by step guide on how to configure your project and quickly begin writing your first tests in just a few seconds."),(0,s.kt)("h2",{id:"Getting-Started"},"Getting Started"),(0,s.kt)(u,{src:"/img/snippets/getting-started-with-ct.mp4",title:"Getting Started With Component Testing",mdxType:"DocsVideo"}),(0,s.kt)("h3",{id:"Install-Cypress"},"Install Cypress"),(0,s.kt)("p",null,"To begin we need to install Cypress in your project if you have not already done so."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"npm install cypress -D\n")),(0,s.kt)("h3",{id:"Open-Cypress"},"Open Cypress:"),(0,s.kt)("p",null,"Once Cypress has been installed you can launch Cypress using the following command:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"npx cypress open\n")),(0,s.kt)("admonition",{type:"info"},(0,s.kt)("p",{parentName:"admonition"},"You can also launch Cypress for a specific ",(0,s.kt)("a",{parentName:"p",href:"/guides/core-concepts/testing-types"},"Testing Type")," using either ",(0,s.kt)("inlineCode",{parentName:"p"},"--e2e")," or in this case the ",(0,s.kt)("inlineCode",{parentName:"p"},"--component")," ",(0,s.kt)("a",{parentName:"p",href:"/guides/guides/command-line#Options"},"CLI Option"),".")),(0,s.kt)("p",null,"Next, the Cypress Launchpad will guide you through configuring your project."),(0,s.kt)("h2",{id:"Configuring-Component-Testing"},"Configuring Component Testing"),(0,s.kt)("h3",{id:"Select-Testing-Type"},"Select Testing Type"),(0,s.kt)("p",null,'Whenever you run Cypress for the first time, the app will prompt you to set up\neither E2E Testing or Component Testing. Click on "Component Testing" to start\nthe configuration wizard.'),(0,s.kt)("admonition",{type:"info"},(0,s.kt)("p",{parentName:"admonition"},"For more information on how to choose a testing type, we recommend this ",(0,s.kt)("a",{parentName:"p",href:"/guides/core-concepts/testing-types"},"Testing Types Guide"))),(0,s.kt)(d,{src:"/img/guides/component-testing/select-test-type.jpg",caption:"Choose Component Testing",mdxType:"DocsImage"}),(0,s.kt)("h3",{id:"Project-Setup"},"Project Setup"),(0,s.kt)("p",null,"The Project Setup screen will automatically detect your framework and bundler. In this example we will use ",(0,s.kt)("a",{parentName:"p",href:"https://react.dev/"},"React")," and ",(0,s.kt)("a",{parentName:"p",href:"https://vitejs.dev/"},"Vite"),'.\nClick "Next Step" to continue.'),(0,s.kt)(d,{src:"/img/guides/component-testing/project-setup-react.jpg",caption:"React and Vite are automatically detected",mdxType:"DocsImage"}),(0,s.kt)("h3",{id:"Installing-Dependencies"},"Installing Dependencies"),(0,s.kt)("p",null,'The next screen checks that all the required dependencies are installed. All the\nitems should have green checkboxes on them, indicating everything is good, so\nclick "Continue".'),(0,s.kt)(d,{src:"/img/guides/component-testing/dependency-detection-react.jpg",caption:"All necessary dependencies are installed",mdxType:"DocsImage"}),(0,s.kt)("h3",{id:"Config-Files"},"Config Files"),(0,s.kt)("p",null,'Next, Cypress generates all the necessary configuration files and gives you a\nlist of all the changes it made to your project. Click "Continue".'),(0,s.kt)(d,{src:"/img/guides/component-testing/scaffolded-files.jpg",caption:"The Cypress launchpad will scaffold all of these files for you",mdxType:"DocsImage"}),(0,s.kt)("h3",{id:"Choose-A-Browser"},"Choose A Browser"),(0,s.kt)("p",null,"After setting up component testing, you will be at the browser selection screen."),(0,s.kt)("p",null,'Pick the browser of your choice and click the "Start Component Testing" button\nto open the Cypress App.'),(0,s.kt)(d,{src:"/img/guides/component-testing/select-browser.jpg",caption:"Choose your browser",mdxType:"DocsImage"}),(0,s.kt)("h2",{id:"Writing-Your-First-Test"},"Writing Your First Test"),(0,s.kt)("p",null,"At this point, your project is configured to use Cypress Component Testing. However, when the test runner appears, it won't find any specs because we haven't created\nany yet. Now we need write our first Component Test."),(0,s.kt)(d,{src:"/img/guides/component-testing/create-your-first-spec-cfc.png",mdxType:"DocsImage"}),(0,s.kt)("h3",{id:"Frameworks"},"Frameworks"),(0,s.kt)("p",null,"Cypress currently has official mounting libraries for\n",(0,s.kt)("a",{parentName:"p",href:"/guides/component-testing/react/overview"},"React"),",\n",(0,s.kt)("a",{parentName:"p",href:"/guides/component-testing/angular/overview"},"Angular"),",\n",(0,s.kt)("a",{parentName:"p",href:"/guides/component-testing/vue/overview"},"Vue"),", and\n",(0,s.kt)("a",{parentName:"p",href:"/guides/component-testing/svelte/overview"},"Svelte"),".\nIn addition to our official framework support there are many community plugins such as\n",(0,s.kt)("a",{parentName:"p",href:"https://github.com/qwikifiers/cypress-qwik"},"Qwik")," and ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/redfox-mx/cypress-lit"},"Lit"),"."),(0,s.kt)("h3",{id:"Your-First-Component-Test"},"Your First Component Test"),(0,s.kt)("p",null,"Though every framework is different and has its own unique nuances, in general, writing tests is very similar.\nLet's look at how a basic test is written for a ",(0,s.kt)("inlineCode",{parentName:"p"},"StepperComponent"),"."),(0,s.kt)("p",null,"Let's assume the Stepper Component consists of two ",(0,s.kt)("inlineCode",{parentName:"p"},"buttons"),", one used to ",(0,s.kt)("strong",{parentName:"p"},"decrement")," the counter and one\nto ",(0,s.kt)("strong",{parentName:"p"},"increment")," it as well as a ",(0,s.kt)("inlineCode",{parentName:"p"},"span")," tag that sits in the middle of the buttons to show the\ncurrent value of the counter."),(0,s.kt)("admonition",{type:"info"},(0,s.kt)("p",{parentName:"admonition"},"To see examples of the Stepper Component and its tests in each Framework, visit our ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/cypress-io/component-testing-quickstart-apps"},"Component Testing Quick Start Apps Repo"))),(0,s.kt)(m,{groupId:"frameworks",mdxType:"Tabs"},(0,s.kt)(h,{value:"React",active:!0,mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react'\nimport Stepper from './Stepper'\n\ndescribe('<Stepper />', () => {\n  it('mounts', () => {\n    // see: https://on.cypress.io/mounting-react\n    cy.mount(<Stepper />)\n  })\n})\n"))),(0,s.kt)(h,{value:"Angular",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript"},"import { StepperComponent } from './stepper.component'\n\ndescribe('StepperComponent', () => {\n  it('mounts', () => {\n    // see: https://on.cypress.io/mounting-angular\n    cy.mount(StepperComponent)\n  })\n})\n"))),(0,s.kt)(h,{value:"Vue",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"import Stepper from './Stepper.vue'\n\ndescribe('<Stepper />', () => {\n  it('mounts', () => {\n    // see: https://on.cypress.io/mounting-vue\n    cy.mount(Stepper)\n  })\n})\n"))),(0,s.kt)(h,{value:"Svelte",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"import Stepper from './Stepper.svelte'\n\ndescribe('Stepper', () => {\n  it('mounts', () => {\n    // see: https://on.cypress.io/mounting-svelte\n    cy.mount(Stepper)\n  })\n})\n")))),(0,s.kt)("h3",{id:"Test-Explanation"},"Test Explanation"),(0,s.kt)("p",null,"Let's break down the spec. First, we import the ",(0,s.kt)("inlineCode",{parentName:"p"},"Stepper")," component. Then, we\norganize our tests using the functions ",(0,s.kt)("inlineCode",{parentName:"p"},"describe")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"it"),", which allows us to\ngroup tests into sections by using method blocks. These are global functions\nprovided by Cypress, which means you don't have to import them directly to use\nthem. The top-level ",(0,s.kt)("inlineCode",{parentName:"p"},"describe")," block will be the container for all our tests in\na file, and each ",(0,s.kt)("inlineCode",{parentName:"p"},"it")," represents an individual test. The ",(0,s.kt)("inlineCode",{parentName:"p"},"describe")," function\ntakes two parameters, the first of which is the name of the test suite, and the\nsecond is a function that will execute the tests."),(0,s.kt)("p",null,"We defined a test using the ",(0,s.kt)("inlineCode",{parentName:"p"},"it")," function inside ",(0,s.kt)("inlineCode",{parentName:"p"},"describe"),". The first parameter\nto ",(0,s.kt)("inlineCode",{parentName:"p"},"it")," is a brief description of the spec, and the second parameter is a\nfunction that contains the test code. In our example above, we only have one\ntest, but soon we'll see how we can add multiple ",(0,s.kt)("inlineCode",{parentName:"p"},"it")," blocks inside of a\n",(0,s.kt)("inlineCode",{parentName:"p"},"describe")," for a series of tests."),(0,s.kt)("admonition",{type:"info"},(0,s.kt)("p",{parentName:"admonition"},"The ",(0,s.kt)("a",{parentName:"p",href:"/api/commands/mount"},"cy.mount()")," method will mount our component into the test\napp so we can begin running tests against it.")),(0,s.kt)("p",null,"Now it's time to see the test in action."),(0,s.kt)("h2",{id:"Running-the-Test"},"Running the Test"),(0,s.kt)("p",null,"Switch back to the browser you opened for testing, and you should now see the\n",(0,s.kt)("inlineCode",{parentName:"p"},"Stepper")," Component in the spec list. Click it to see the spec execute."),(0,s.kt)(u,{src:"/img/snippets/specs-list.mp4",title:"Specs List",mdxType:"DocsVideo"}),(0,s.kt)("p",null,"Our first test verifies the component can mount in its default state without\nany errors. If there is a runtime error during test execution, the test will\nfail, and you will see a stack trace pointing to the source of the problem."),(0,s.kt)("p",null,"A basic test like the one above is an excellent way to start testing a\ncomponent. Cypress renders your component in a real browser, and you can use all\nthe techniques/tools you would normally during development, such as interacting\nwith the component in the test runner, and using the browser dev tools to\ninspect and debug both your tests and the component's code."),(0,s.kt)("p",null,"Feel free to play around with the ",(0,s.kt)("inlineCode",{parentName:"p"},"Stepper")," component by interacting with the\nincrement and decrement buttons."),(0,s.kt)("p",null,"Now that the component is mounted, our next step is to test that the behavior of\nthe component is correct."),(0,s.kt)("h3",{id:"Selectors--Assertions"},"Selectors & Assertions"),(0,s.kt)("p",null,"By default, the Stepper's counter is initialized to \"0\". We can override that\nvalue by specifying an initial count. Let's write a couple of tests that will\nverify both these states."),(0,s.kt)("p",null,"To do so, we will use a selector to access the ",(0,s.kt)("inlineCode",{parentName:"p"},"span")," element that contains the\ncounter, and then assert that the text value of the element is what we expect it\nto be."),(0,s.kt)("p",null,"There are various ways to select items from the DOM using Cypress. We will use\n",(0,s.kt)("a",{parentName:"p",href:"/api/commands/get"},"cy.get()"),", which allows us to pass in a CSS-like selector."),(0,s.kt)("p",null,'After we "get" the element, we use the ',(0,s.kt)("a",{parentName:"p",href:"/api/commands/should"},"should")," assertion\nmethod to verify it has the correct text value."),(0,s.kt)("p",null,"Add the following test inside the ",(0,s.kt)("inlineCode",{parentName:"p"},"describe")," block, right below the first test:"),(0,s.kt)(m,{groupId:"frameworks",mdxType:"Tabs"},(0,s.kt)(h,{value:"React",active:!0,mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"it('stepper should default to 0', () => {\n  cy.mount(<Stepper />)\n  cy.get('span').should('have.text', '0')\n})\n"))),(0,s.kt)(h,{value:"Angular",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript"},"it('stepper should default to 0', () => {\n  cy.mount(StepperComponent)\n  cy.get('span').should('have.text', '0')\n})\n"))),(0,s.kt)(h,{value:"Vue",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"it('stepper should default to 0', () => {\n  cy.mount(Stepper)\n  cy.get('span').should('have.text', '0')\n})\n"))),(0,s.kt)(h,{value:"Svelte",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"it('stepper should default to 0', () => {\n  cy.mount(Stepper)\n  cy.get('span').should('have.text', '0')\n})\n")))),(0,s.kt)("p",null,"When you go back to the test runner, you should see the test pass."),(0,s.kt)("p",null,'In the above test, we select the element by passing in "span" to ',(0,s.kt)("inlineCode",{parentName:"p"},"cy.get()"),",\nwhich will select all ",(0,s.kt)("inlineCode",{parentName:"p"},"span")," tags in our component. We only have one ",(0,s.kt)("inlineCode",{parentName:"p"},"span"),"\ncurrently, so this works. However, if our component evolves and we add another\n",(0,s.kt)("inlineCode",{parentName:"p"},"span"),", then this test could start to fail. We should use a selector that will\nbe less brittle to future changes."),(0,s.kt)("p",null,"In the ",(0,s.kt)("inlineCode",{parentName:"p"},"Stepper")," component, the ",(0,s.kt)("inlineCode",{parentName:"p"},"span")," tag has a ",(0,s.kt)("inlineCode",{parentName:"p"},"data-cy")," attribute on it:"),(0,s.kt)(m,{groupId:"frameworks",mdxType:"Tabs"},(0,s.kt)(h,{value:"React",active:!0,mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},'<span data-cy="counter">{count}</span>\n'))),(0,s.kt)(h,{value:"Angular",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-html"},'<span data-cy="counter">{{ count }}</span>\n'))),(0,s.kt)(h,{value:"Vue",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-html"},'<span data-cy="counter">{{ count }}</span>\n'))),(0,s.kt)(h,{value:"Svelte",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-html"},'<span data-cy="counter">{count}</span>\n')))),(0,s.kt)("p",null,"We assign a unique id to the ",(0,s.kt)("inlineCode",{parentName:"p"},"data-cy")," attribute that we can use for testing\npurposes. Update the test to use a CSS attribute selector to ",(0,s.kt)("inlineCode",{parentName:"p"},"cy.get()"),":"),(0,s.kt)(m,{groupId:"frameworks",mdxType:"Tabs"},(0,s.kt)(h,{value:"React",active:!0,mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"it('stepper should default to 0', () => {\n  cy.mount(<Stepper />)\n  cy.get('[data-cy=counter]').should('have.text', '0')\n})\n"))),(0,s.kt)(h,{value:"Angular",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript"},"it('stepper should default to 0', () => {\n  cy.mount(StepperComponent)\n  cy.get('[data-cy=counter]').should('have.text', '0')\n})\n"))),(0,s.kt)(h,{value:"Vue",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"it('stepper should default to 0', () => {\n  cy.mount(Stepper)\n  cy.get('[data-cy=counter]').should('have.text', '0')\n})\n"))),(0,s.kt)(h,{value:"Svelte",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"it('stepper should default to 0', () => {\n  cy.mount(Stepper)\n  cy.get('[data-cy=counter]').should('have.text', '0')\n})\n")))),(0,s.kt)("p",null,"The test will still pass as expected, and our selector is now future-proof. For\nmore info on writing good selectors, see our guide\n",(0,s.kt)("a",{parentName:"p",href:"/guides/references/best-practices#Selecting-Elements"},"Selector Best Practices"),"."),(0,s.kt)("h3",{id:"Passing-Props-to-Components"},"Passing Props to Components"),(0,s.kt)("p",null,"We should also have a test to ensure the ",(0,s.kt)("inlineCode",{parentName:"p"},"count"),' prop sets the count to\nsomething else besides its default value of "0". We can pass in props to the\n',(0,s.kt)("inlineCode",{parentName:"p"},"Stepper")," component like so:"),(0,s.kt)(m,{groupId:"frameworks",mdxType:"Tabs"},(0,s.kt)(h,{value:"React",active:!0,mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"it('supports a \"count\" prop to set the value', () => {\n  cy.mount(<Stepper count={100} />)\n  cy.get('[data-cy=counter]').should('have.text', '100')\n})\n"))),(0,s.kt)(h,{value:"Angular",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript"},"it('supports a \"count\" prop to set the value', () => {\n  cy.mount(StepperComponent, {\n    componentProperties: {\n      count: 100,\n    },\n  })\n  cy.get('[data-cy=counter]').should('have.text', '100')\n})\n"))),(0,s.kt)(h,{value:"Vue",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"it('supports a \"count\" prop to set the value', () => {\n  cy.mount(Stepper, { props: { count: 100 } })\n  cy.get('[data-cy=counter]').should('have.text', '100')\n})\n"))),(0,s.kt)(h,{value:"Svelte",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"it('supports a \"count\" prop to set the value', () => {\n  cy.mount(Stepper, { props: { count: 100 } })\n  cy.get('[data-cy=counter]').should('have.text', '100')\n})\n")))),(0,s.kt)("h3",{id:"Testing-Interactions"},"Testing Interactions"),(0,s.kt)("p",null,'We mounted and selected the element in the above tests but didn\'t interact with\nit. We should also test that the value of the counter changes when a user clicks\nthe "increment" and "decrement" buttons.'),(0,s.kt)("p",null,"To do so, we will interact with the component by using the\n",(0,s.kt)("a",{parentName:"p",href:"/api/commands/click"},"click()")," command, which clicks a DOM element just like a\nreal user would."),(0,s.kt)("p",null,"Add the following tests:"),(0,s.kt)(m,{groupId:"frameworks",mdxType:"Tabs"},(0,s.kt)(h,{value:"React",active:!0,mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"it('when the increment button is pressed, the counter is incremented', () => {\n  cy.mount(<Stepper />)\n  cy.get('[data-cy=increment]').click()\n  cy.get('[data-cy=counter]').should('have.text', '1')\n})\n\nit('when the decrement button is pressed, the counter is decremented', () => {\n  cy.mount(<Stepper />)\n  cy.get('[data-cy=decrement]').click()\n  cy.get('[data-cy=counter]').should('have.text', '-1')\n})\n"))),(0,s.kt)(h,{value:"Angular",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript"},"it('when the increment button is pressed, the counter is incremented', () => {\n  cy.mount(StepperComponent)\n  cy.get('[data-cy=increment]').click()\n  cy.get('[data-cy=counter]').should('have.text', '1')\n})\n\nit('when the decrement button is pressed, the counter is decremented', () => {\n  cy.mount(StepperComponent)\n  cy.get('[data-cy=decrement]').click()\n  cy.get('[data-cy=counter]').should('have.text', '-1')\n})\n"))),(0,s.kt)(h,{value:"Vue",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"it('when the increment button is pressed, the counter is incremented', () => {\n  cy.mount(Stepper)\n  cy.get('[data-cy=increment]').click()\n  cy.get('[data-cy=counter]').should('have.text', '1')\n})\n\nit('when the decrement button is pressed, the counter is decremented', () => {\n  cy.mount(Stepper)\n  cy.get('[data-cy=decrement]').click()\n  cy.get('[data-cy=counter]').should('have.text', '-1')\n})\n"))),(0,s.kt)(h,{value:"Svelte",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"it('when the increment button is pressed, the counter is incremented', () => {\n  cy.mount(Stepper)\n  cy.get('[data-cy=increment]').click()\n  cy.get('[data-cy=counter]').should('have.text', '1')\n})\n\nit('when the decrement button is pressed, the counter is decremented', () => {\n  cy.mount(Stepper)\n  cy.get('[data-cy=decrement]').click()\n  cy.get('[data-cy=counter]').should('have.text', '-1')\n})\n")))),(0,s.kt)("p",null,'When you view the results of each of the tests, you will see that the counter is\nnow "1" in the ',(0,s.kt)("strong",{parentName:"p"},"increment"),' test, and "-1" in the ',(0,s.kt)("strong",{parentName:"p"},"decrement")," test. Not only did our\ntests pass, but we can visually see the results in a browser!"),(0,s.kt)("h2",{id:"Testing-Components-with-Events"},"Testing Components with Events"),(0,s.kt)("p",null,"All the state of the ",(0,s.kt)("inlineCode",{parentName:"p"},"Stepper")," Component (ie: the count) is handled internally in the\ncomponent and then consumers are then alerted to changes to the state."),(0,s.kt)("p",null,"As the developer of the ",(0,s.kt)("inlineCode",{parentName:"p"},"Stepper")," Component, you want to make sure when the\nend-user clicks the ",(0,s.kt)("strong",{parentName:"p"},"increment")," and ",(0,s.kt)("strong",{parentName:"p"},"decrement")," buttons, that the appropriate event is\ntriggered with the proper values in the consuming component."),(0,s.kt)("h3",{id:"Using-Spies"},"Using Spies"),(0,s.kt)("p",null,"We can use ",(0,s.kt)("a",{parentName:"p",href:"/guides/guides/stubs-spies-and-clocks#Spies"},"Cypress Spies")," to\nvalidate these events are being called correctly. A spy is a special function that\nkeeps track of how many times it was called and any parameters that it was\ncalled with. We can then assign a spy to our event, interact with the\ncomponent, and then query the spy to validate it was called with the parameters\nwe expect."),(0,s.kt)("p",null,"Let's set up the spies and bind them to the component:"),(0,s.kt)(m,{groupId:"frameworks",mdxType:"Tabs"},(0,s.kt)(h,{value:"React",active:!0,mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"it('clicking + fires a change event with the incremented value', () => {\n  const onChangeSpy = cy.spy().as('onChangeSpy')\n  cy.mount(<Stepper onChange={onChangeSpy} />)\n  cy.get('[data-cy=increment]').click()\n  cy.get('@onChangeSpy').should('have.been.calledWith', 1)\n})\n"))),(0,s.kt)(h,{value:"Angular",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript"},"it('clicking + fires a change event with the incremented value', () => {\n  const onChangeSpy = cy.spy().as('onChangeSpy')\n  cy.mount(StepperComponent, {\n    componentProperties: {\n      change: {\n        emit: onChangeSpy,\n      } as any,\n    },\n  })\n  cy.get('[data-cy=increment]').click()\n  cy.get('@changeSpy').should('have.been.calledWith', 1)\n})\n"))),(0,s.kt)(h,{value:"Vue",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"it('clicking + fires a change event with the incremented value', () => {\n  const onChangeSpy = cy.spy().as('onChangeSpy')\n  cy.mount(Stepper, { props: { onChange: onChangeSpy } })\n  cy.get('[data-cy=increment]').click()\n  cy.get('@onChangeSpy').should('have.been.calledWith', 1)\n})\n"))),(0,s.kt)(h,{value:"Svelte",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"it('clicking + fires a change event with the incremented value', () => {\n  const changeSpy = cy.spy().as('changeSpy')\n  cy.mount(Stepper).then(({ component }) => {\n    component.$on('change', changeSpy)\n  })\n  cy.get('[data-cy=increment]').click()\n  cy.get('@changeSpy').should('have.been.calledWithMatch', {\n    detail: { count: 1 },\n  })\n})\n")))),(0,s.kt)("p",null,"First, we create a new spy by calling the ",(0,s.kt)("inlineCode",{parentName:"p"},"cy.spy()")," method. We pass in a string\nthat gives the spy an ",(0,s.kt)("a",{parentName:"p",href:"/guides/core-concepts/variables-and-aliases"},"alias"),",\nwhich assigns the spy a name by which we can reference it later. In\n",(0,s.kt)("inlineCode",{parentName:"p"},"cy.mount()"),", we initialize the component and pass the spy into it. After that,\nwe click the increment button."),(0,s.kt)("p",null,"The next line is a bit different. We've seen how we can use the ",(0,s.kt)("inlineCode",{parentName:"p"},"cy.get()"),"\nmethod to select elements, but we can also use it to grab any aliases we've set\nup previously. We use ",(0,s.kt)("inlineCode",{parentName:"p"},"cy.get()"),' to grab the alias to the spy (by prepending an\n"@" to the alias name). We assert that the method was called with the expected\nvalue.'),(0,s.kt)("p",null,"With that, the ",(0,s.kt)("inlineCode",{parentName:"p"},"Stepper")," component is well tested. Nice job!"),(0,s.kt)("h2",{id:"Whats-Next"},"What's Next?"),(0,s.kt)("p",null,"Congratulations, you covered the basics for Component Testing\nwith Cypress!"),(0,s.kt)("p",null,"To learn more about testing with Cypress, check out the\n",(0,s.kt)("a",{parentName:"p",href:"/guides/core-concepts/introduction-to-cypress"},"Introduction to Cypress")," guide."))}y.isMDXComponent=!0}}]);