"use strict";(self.webpackChunkcypress_docusaurus_ts=self.webpackChunkcypress_docusaurus_ts||[]).push([[3704],{1755:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var n=t(5893),i=t(1151);const r={title:"Visual Testing"},o=void 0,l={id:"guides/tooling/visual-testing",title:"Visual Testing",description:"What you'll learn",source:"@site/docs/guides/tooling/visual-testing.mdx",sourceDirName:"guides/tooling",slug:"/guides/tooling/visual-testing",permalink:"/guides/tooling/visual-testing",draft:!1,unlisted:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/guides/tooling/visual-testing.mdx",tags:[],version:"current",lastUpdatedAt:1728610821,formattedLastUpdatedAt:"Oct 11, 2024",frontMatter:{title:"Visual Testing"},sidebar:"guides",previous:{title:"TypeScript",permalink:"/guides/tooling/typescript-support"},next:{title:"Advanced Installation",permalink:"/guides/references/advanced-installation"}},a={},c=[{value:"<Icon></Icon> What you&#39;ll learn",id:"What-youll-learn",level:2},{value:"Functional vs. visual testing",id:"Functional-vs-visual-testing",level:2},{value:"Tooling",id:"Tooling",level:2},{value:"Open source",id:"Open-source",level:3},{value:"Applitools",id:"Applitools",level:3},{value:"Percy",id:"Percy",level:3},{value:"<Icon></Icon> Real World Example <Badge>New</Badge>",id:"Real-World-Example-New",level:3},{value:"Happo",id:"Happo",level:3},{value:"Chromatic",id:"Chromatic",level:3},{value:"Wopee.io",id:"Wopeeio",level:3},{value:"Best practices",id:"Best-practices",level:2},{value:"Recognize the need for visual testing",id:"Recognize-the-need-for-visual-testing",level:3},{value:"DOM state",id:"DOM-state",level:3},{value:"Timestamps",id:"Timestamps",level:3},{value:"Application state",id:"Application-state",level:3},{value:"Visual diff elements",id:"Visual-diff-elements",level:3},{value:"Component testing",id:"Component-testing",level:3},{value:"See also",id:"See-also",level:2}];function d(e){const s={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components},{Badge:t,DocsImage:r,DocsVideo:o,E2EOrCtTabs:l,Icon:a}=s;return t||p("Badge",!0),r||p("DocsImage",!0),o||p("DocsVideo",!0),l||p("E2EOrCtTabs",!0),a||p("Icon",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.admonition,{type:"info",children:[(0,n.jsxs)(s.h2,{id:"What-youll-learn",children:[(0,n.jsx)(a,{name:"graduation-cap"})," What you'll learn"]}),(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"How visual testing complements functional testing"}),"\n",(0,n.jsx)(s.li,{children:"How to implement visual diffing yourself or using 3rd party service"}),"\n",(0,n.jsx)(s.li,{children:"How to ensure the application is in consistent state before capturing an image"}),"\n"]})]}),"\n",(0,n.jsx)(s.h2,{id:"Functional-vs-visual-testing",children:"Functional vs. visual testing"}),"\n",(0,n.jsxs)(s.p,{children:["Cypress is a ",(0,n.jsx)(s.em,{children:"functional"})," test runner. It drives the web application the way a\nuser would, and checks if the app ",(0,n.jsx)(s.em,{children:"functions"}),' as expected: if the expected\nmessage appears, an element is removed, or a CSS class is added after the\nappropriate user action. A typical Cypress test, for example, can check if a\ntoggled "Todo" item gets a class of "completed" after the ',(0,n.jsx)(s.code,{children:".toggle"})," is checked:"]}),"\n",(0,n.jsxs)(l,{children:[(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-ts",children:"it('completes todo', () => {\n  cy.visit('/') // opens TodoMVC running at \"baseUrl\"\n  cy.get('.new-todo').type('write tests{enter}')\n  cy.contains('.todo-list li', 'write tests').find('.toggle').check()\n\n  cy.contains('.todo-list li', 'write tests').should('have.class', 'completed')\n})\n"})}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-ts",children:"it('completes todo', () => {\n  cy.mount(<Todos />)\n  cy.get('.new-todo').type('write tests{enter}')\n  cy.contains('.todo-list li', 'write tests').find('.toggle').check()\n\n  cy.contains('.todo-list li', 'write tests').should('have.class', 'completed')\n})\n"})})]}),"\n",(0,n.jsx)(r,{src:"/img/guides/visual-testing/completed-test.gif",alt:"Passing Cypress functional test"}),"\n",(0,n.jsxs)(s.p,{children:["Cypress does NOT see how the page actually looks though. For example, Cypress\nwill not see if the CSS class ",(0,n.jsx)(s.code,{children:"completed"})," grays out the label element and adds a\nstrike-through line."]}),"\n",(0,n.jsx)(r,{src:"/img/guides/visual-testing/completed-item.png",alt:"Completed item style"}),"\n",(0,n.jsxs)(s.p,{children:["You could technically write a functional test asserting the CSS properties using\nthe ",(0,n.jsxs)(s.a,{href:"/guides/references/assertions#CSS",children:[(0,n.jsx)(s.code,{children:"have.css"})," assertion"]}),", but these may\nquickly become cumbersome to write and maintain, especially when visual styles\nrely on a lot of CSS styles."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"cy.get('.completed').should('have.css', 'text-decoration', 'line-through')\ncy.get('.completed').should('have.css', 'color', 'rgb(217,217,217)')\n"})}),"\n",(0,n.jsx)(s.p,{children:"Your visual styles may also rely on more than CSS, perhaps you want to ensure an\nSVG or image has rendered correctly or shapes were correctly drawn to a canvas."}),"\n",(0,n.jsxs)(s.p,{children:["Luckily, Cypress gives a stable platform for\n",(0,n.jsx)(s.a,{href:"/guides/tooling/plugins-guide",children:"writing plugins"})," that ",(0,n.jsx)(s.em,{children:"can perform visual\ntesting"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"Typically such plugins take an image snapshot of the entire application under\ntest or a specific element, and then compare the image to a previously approved\nbaseline image. If the images are the same (within a set pixel tolerance), it is\ndetermined that the web application looks the same to the user. If there are\ndifferences, then there has been some change to the DOM layout, fonts, colors or\nother visual properties that needs to be investigated."}),"\n",(0,n.jsxs)(s.p,{children:["For example, one can use the\n",(0,n.jsx)(s.a,{href:"https://github.com/meinaart/cypress-plugin-snapshots",children:"cypress-plugin-snapshots"}),"\nplugin and catch the following visual regression:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-css",children:".todo-list li.completed label {\n  color: #d9d9d9;\n  /* removed the line-through */\n}\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"it('completes todo', () => {\n  cy.visit('/')\n  cy.get('.new-todo').type('write tests{enter}')\n  cy.contains('.todo-list li', 'write tests').find('.toggle').check()\n\n  cy.contains('.todo-list li', 'write tests').should('have.class', 'completed')\n\n  // run 'npm install cypress-plugin-snapshots --save'\n  // capture the element screenshot and\n  // compare to the baseline image\n  cy.get('.todoapp').toMatchImageSnapshot({\n    imageConfig: {\n      threshold: 0.001,\n    },\n  })\n})\n"})}),"\n",(0,n.jsxs)(s.p,{children:["This open source plugin compares the baseline and the current images side by\nside if pixel difference is above the threshold; notice how the baseline image\n(",(0,n.jsx)(s.em,{children:"Expected result"}),") has the label text with the line through, while the new\nimage (",(0,n.jsx)(s.em,{children:"Actual result"}),") does not have it."]}),"\n",(0,n.jsx)(r,{src:"/img/guides/visual-testing/diff.png",alt:"Baseline vs current image"}),"\n",(0,n.jsx)(s.p,{children:"Like most image comparison tools, the plugin also shows a difference view on\nmouse hover:"}),"\n",(0,n.jsx)(r,{src:"/img/guides/visual-testing/diff-2.png",alt:"Highlighted changes"}),"\n",(0,n.jsx)(s.h2,{id:"Tooling",children:"Tooling"}),"\n","\n",(0,n.jsx)(s.p,{children:"There are several published, open source plugins, listed in the"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)("a",{href:"/plugins#visual-testing",children:"Visual Testing Plugins"})," section, and several\ncommercial companies have developed visual testing solutions on top of Cypress listed\nbelow."]}),"\n",(0,n.jsx)(s.h3,{id:"Open-source",children:"Open source"}),"\n",(0,n.jsxs)(s.p,{children:["Listed in the ",(0,n.jsx)("a",{href:"/plugins#visual-testing",children:"Visual Testing Plugins"})," section."]}),"\n",(0,n.jsx)(s.h3,{id:"Applitools",children:"Applitools"}),"\n",(0,n.jsx)(s.p,{children:"First joint webinar with Applitools"}),"\n","\n",(0,n.jsx)(o,{src:"https://youtube.com/embed/qVRjhABuyG0"}),"\n","\n",(0,n.jsxs)(s.p,{children:["Second joint webinar with Applitools with a focus on\n",(0,n.jsx)(s.a,{href:"/guides/core-concepts/testing-types#What-is-Component-Testing",children:"Component Testing"})]}),"\n","\n",(0,n.jsx)(o,{src:"https://youtube.com/embed/Bxh_ebMk1aM"}),"\n","\n",(0,n.jsx)(a,{name:"external-link-alt",url:"https://applitools.com/"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Resource"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"https://applitools.com/cypress",children:"Official docs"})}),(0,n.jsx)(s.td,{children:"Applitools' Cypress documentation"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"https://applitools.com/tutorials/cypress.html",children:"Tutorial"})}),(0,n.jsx)(s.td,{children:"Applitools' Cypress tutorial"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"https://applitools.com/blog/cypress-applitools-end-to-end-testing",children:"Webinar"})}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.em,{children:"Creating a Flawless User Experience, End-to-End, Functional to Visual \u2013 Practical Hands-on Session"}),", a webinar recorded together with Cypress and Applitools"]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"https://glebbahmutov.com/blog/testing-a-chart/",children:"Blog"})}),(0,n.jsx)(s.td,{children:"Testing a chart with Cypress and Applitools"})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"Percy",children:"Percy"}),"\n","\n",(0,n.jsx)(o,{src:"https://youtube.com/embed/MXfZeE9RQDw"}),"\n","\n",(0,n.jsx)(a,{name:"external-link-alt",url:"https://percy.io/"}),"\n",(0,n.jsxs)(s.admonition,{type:"info",children:[(0,n.jsxs)(s.h3,{id:"Real-World-Example-New",children:[(0,n.jsx)(a,{name:"graduation-cap"})," Real World Example ",(0,n.jsx)(t,{type:"success",children:"New"})]}),(0,n.jsxs)(s.p,{children:["The Cypress ",(0,n.jsx)(a,{name:"github",inline:"true",contentType:"rwa"})," uses the\n",(0,n.jsx)(s.code,{children:"cy.percySnapshot()"})," command provided by the\n",(0,n.jsx)(s.a,{href:"https://github.com/percy/percy-cypress",children:"Cypress Percy plugin"})," to take visual\nsnapshots throughout the user journey end-to-end tests"]}),(0,n.jsxs)(s.p,{children:["Check out the\n",(0,n.jsx)(s.a,{href:"https://github.com/cypress-io/cypress-realworld-app/tree/develop/cypress/tests/ui",children:"Real World App test suites"}),"\nto see these Percy and Cypress in action."]})]}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Resource"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"https://docs.percy.io/docs/cypress",children:"Official docs"})}),(0,n.jsx)(s.td,{children:"Percy's Cypress documentation"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"https://docs.percy.io/docs/cypress-tutorial",children:"Tutorial"})}),(0,n.jsx)(s.td,{children:"Percy's Cypress tutorial"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"https://www.youtube.com/watch?v=MXfZeE9RQDw",children:"Webinar"})}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.em,{children:"Cypress + Percy = End-to-end functional and visual testing for the web"}),", a webinar recorded together with Cypress and Percy.io"]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"https://www.cypress.io/blog/2019/04/19/webinar-recording-cypress-io-percy-end-to-end-functional-and-visual-testing-for-the-web/",children:"Blog"})}),(0,n.jsx)(s.td,{children:"The companion blog for the Cypress + Percy webinar"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"https://slides.com/bahmutov/visual-testing-with-percy",children:"Slides"})}),(0,n.jsx)(s.td,{children:"The companion slides for the Cypress + Percy webinar"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"https://glebbahmutov.com/blog/testing-visually/",children:"Blog"})}),(0,n.jsx)(s.td,{children:"Testing how an application renders a drawing with Cypress and Percy"})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"Happo",children:"Happo"}),"\n","\n",(0,n.jsx)(o,{src:"https://youtube.com/embed/C_p12IvN5HU"}),"\n","\n",(0,n.jsx)(a,{name:"external-link-alt",url:"https://happo.io/"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Resource"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"https://docs.happo.io/docs/cypress",children:"Official docs"})}),(0,n.jsx)(s.td,{children:"Happo's Cypress documentation"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"https://www.youtube.com/watch?v=C_p12IvN5HU",children:"Webinar"})}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.em,{children:"Keep your UI Sharp: Ensuring Functional and Visual Quality with Cypress.io + Happo.io"}),", a webinar recorded together with Cypress and Happo"]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"https://www.cypress.io/blog/2020/05/27/webcast-recording-keep-your-ui-sharp/",children:"Blog"})}),(0,n.jsx)(s.td,{children:"The companion blog for the Cypress + Happo webinar"})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"Chromatic",children:"Chromatic"}),"\n",(0,n.jsx)(s.p,{children:"Chromatic leverages your existing Cypress setup\u2014configuration, mocking, and tests\u2014to enable visual testing of your application's UI. With the Chromatic plugin installed, Chromatic captures an archive of your UI while your Cypress tests are running."}),"\n","\n",(0,n.jsx)(a,{name:"external-link-alt",url:"https://chromatic.com"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Resource"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"https://www.chromatic.com/docs/cypress/setup/?utm_source=cypress_docs",children:"Official docs"})}),(0,n.jsx)(s.td,{children:"Chromatic's Cypress documentation"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"https://www.chromatic.com/blog/how-to-visual-test-with-cypress/?utm_source=cypress_docs",children:"Blog"})}),(0,n.jsx)(s.td,{children:"Chromatic\u2019s Cypress integration announcement and tutorial"})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"Wopeeio",children:"Wopee.io"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.a,{href:"https://wopee.io",children:"Wopee.io"})," seamlessly integrates with Cypress to enhance test coverage, expedite maintenance, and ensure more resilient test runs. Aiming for autonomous visual testing, Wopee.io allows you to easily incorporate visual validation into your existing Cypress tests, adding an extra layer of quality assurance."]}),"\n","\n",(0,n.jsx)(a,{name:"external-link-alt",url:"https://wopee.io"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Resource"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"https://docs.wopee.io/integrations/cypress/01-getting-started/?utm_source=cypress_docs",children:"Official docs"})}),(0,n.jsx)(s.td,{children:"Wopee.io's Cypress documentation"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"https://wopee.io/blog/autopilot-your-sw-testing/?utm_source=cypress_docs",children:"Blog"})}),(0,n.jsx)(s.td,{children:"Wopee.io & Cypress integration and some AI-Augmentation ideas"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"https://youtu.be/t008fYcBoi0",children:"Webinar"})}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.em,{children:"Cypress + Wopee.io"}),", a webinar introducing integration between Cypress and Wopee.io"]})]})]})]}),"\n",(0,n.jsx)(s.h2,{id:"Best-practices",children:"Best practices"}),"\n",(0,n.jsx)(s.p,{children:"As a general rule there are some best practices when visual testing."}),"\n",(0,n.jsx)(s.h3,{id:"Recognize-the-need-for-visual-testing",children:"Recognize the need for visual testing"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(a,{name:"exclamation-triangle",color:"red"})," Assertions that verify style properties**"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"cy.get('.completed').should('have.css', 'text-decoration', 'line-through')\n  .and('have.css', 'color', 'rgb(217,217,217)')\ncy.get('.user-info').should('have.css', 'display', 'none')\n...\n"})}),"\n",(0,n.jsx)(s.p,{children:"If your end-to-end tests become full of assertions checking visibility, color\nand other style properties, it might be time to start using visual diffing to\nverify the page appearance."}),"\n",(0,n.jsx)(s.h3,{id:"DOM-state",children:"DOM state"}),"\n",(0,n.jsx)(s.admonition,{type:"tip",children:(0,n.jsxs)(s.p,{children:[(0,n.jsx)(a,{name:"check-circle",color:"green"})," ",(0,n.jsx)(s.strong,{children:"Best Practice:"})," Take a snapshot after\nyou confirm the page is done changing."]})}),"\n",(0,n.jsxs)(s.p,{children:["For example, if the snapshot command is ",(0,n.jsx)(s.code,{children:"cy.mySnapshotCommand"}),":"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(a,{name:"exclamation-triangle",color:"red"})," ",(0,n.jsx)(s.strong,{children:"Incorrect Usage"})]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"// the web application takes time to add the new item,\n// sometimes it takes the snapshot BEFORE the new item appears\ncy.get('.new-todo').type('write tests{enter}')\ncy.mySnapshotCommand()\n"})}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(a,{name:"check-circle",color:"green"})," ",(0,n.jsx)(s.strong,{children:"Correct Usage"})]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"// use a functional assertion to ensure\n// the web application has re-rendered the page\ncy.get('.new-todo').type('write tests{enter}')\ncy.contains('.todo-list li', 'write tests')\n// great, the new item is displayed,\n// now we can take the snapshot\ncy.mySnapshotCommand()\n"})}),"\n",(0,n.jsx)(s.h3,{id:"Timestamps",children:"Timestamps"}),"\n",(0,n.jsx)(s.admonition,{type:"tip",children:(0,n.jsxs)(s.p,{children:[(0,n.jsx)(a,{name:"check-circle",color:"green"})," ",(0,n.jsx)(s.strong,{children:"Best Practice:"})," Control the timestamp\ninside the application under test."]})}),"\n",(0,n.jsxs)(s.p,{children:["Below we freeze the operating system's time to ",(0,n.jsx)(s.code,{children:"Jan 1, 2018"})," using\n",(0,n.jsx)(s.a,{href:"/api/commands/clock",children:"cy.clock()"})," to ensure all images displaying dates and\ntimes match."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"const now = new Date(2018, 1, 1)\n\ncy.clock(now)\n// ... test\ncy.mySnapshotCommand()\n"})}),"\n",(0,n.jsx)(s.h3,{id:"Application-state",children:"Application state"}),"\n",(0,n.jsx)(s.admonition,{type:"tip",children:(0,n.jsxs)(s.p,{children:[(0,n.jsx)(a,{name:"check-circle",color:"green"})," ",(0,n.jsx)(s.strong,{children:"Best Practice:"})," Use ",(0,n.jsx)(s.a,{href:"/api/commands/fixture",children:"cy.fixture()"}),"\nand network mocking to set the application state."]})}),"\n",(0,n.jsxs)(s.p,{children:["Below we stub network calls using ",(0,n.jsx)(s.a,{href:"/api/commands/intercept",children:"cy.intercept()"})," to\nreturn the same response data for each XHR request. This ensures that the data\ndisplayed in our application images does not change."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"cy.intercept('/api/items', { fixture: 'items' }).as('getItems')\n// ... action\ncy.wait('@getItems')\ncy.mySnapshotCommand()\n"})}),"\n",(0,n.jsx)(s.h3,{id:"Visual-diff-elements",children:"Visual diff elements"}),"\n",(0,n.jsx)(s.admonition,{type:"tip",children:(0,n.jsxs)(s.p,{children:[(0,n.jsx)(a,{name:"check-circle",color:"green"})," ",(0,n.jsx)(s.strong,{children:"Best Practice:"})," Use visual diffing\nto check individual DOM elements rather than the entire page."]})}),"\n",(0,n.jsx)(s.p,{children:'Targeting specific DOM element will help avoid visual changes from component "X"\nbreaking tests in other unrelated components.'}),"\n",(0,n.jsx)(s.h3,{id:"Component-testing",children:"Component testing"}),"\n",(0,n.jsx)(s.admonition,{type:"tip",children:(0,n.jsxs)(s.p,{children:[(0,n.jsx)(a,{name:"check-circle",color:"green"})," ",(0,n.jsx)(s.strong,{children:"Best Practice:"})," Use ",(0,n.jsx)(s.a,{href:"/guides/component-testing/overview",children:"Component Testing"}),"\nto test the individual components functionality in addition to end-to-end and visual\ntests."]})}),"\n",(0,n.jsxs)(s.p,{children:["If you are working on React components, read\n",(0,n.jsx)(s.a,{href:"https://glebbahmutov.com/blog/open-source-visual-testing-of-components/",children:"Visual testing for React components using open source tools"}),",\nbrowse ",(0,n.jsx)(s.a,{href:"https://slides.com/bahmutov/i-see-what-is-going-on",children:"slides"}),", and watch\nthe\n",(0,n.jsx)(s.a,{href:"https://www.youtube.com/playlist?list=PLP9o9QNnQuAYhotnIDEUQNXuvXL7ZmlyZ",children:"companion videos"}),"."]}),"\n",(0,n.jsx)(s.h2,{id:"See-also",children:"See also"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"/api/plugins/after-screenshot-api",children:"After Screenshot API"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"/api/commands/screenshot",children:"cy.screenshot()"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"/api/cypress-api/screenshot-api",children:"Cypress.Screenshot"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"/guides/tooling/plugins-guide",children:"Plugins"})}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)("a",{href:"/plugins#visual-testing",children:"Visual Testing Plugins"}),"\n"]}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"/api/plugins/writing-a-plugin",children:"Writing a Plugin"})}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(a,{name:"github",contentType:"rwa"})," is a full stack example application that\ndemonstrates ",(0,n.jsx)(s.strong,{children:"best practices and scalable strategies with Cypress in practical\nand realistic scenarios"}),"."]}),"\n",(0,n.jsxs)(s.li,{children:["Read the blog post\n",(0,n.jsx)(s.a,{href:"https://www.cypress.io/blog/2020/10/02/debug-a-flaky-visual-regression-test/",children:"Debug a Flaky Visual Regression Test"})]}),"\n",(0,n.jsxs)(s.li,{children:["Read the blog post\n",(0,n.jsx)(s.a,{href:"https://glebbahmutov.com/blog/canvas-testing/",children:"Canvas Visual Testing with Retries"})]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}function p(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},1151:(e,s,t)=>{t.d(s,{Z:()=>l,a:()=>o});var n=t(7294);const i={},r=n.createContext(i);function o(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);