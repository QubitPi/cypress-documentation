"use strict";(self.webpackChunkcypress_docusaurus_ts=self.webpackChunkcypress_docusaurus_ts||[]).push([[6275],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),m=p(a),d=r,h=m["".concat(l,".").concat(d)]||m[d]||u[d]||i;return a?n.createElement(h,s(s({ref:t},c),{},{components:a})):n.createElement(h,s({ref:t},c))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,s=new Array(i);s[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[m]="string"==typeof e?e:r,s[1]=o;for(var p=2;p<i;p++)s[p]=a[p];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},2341:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var n=a(7462),r=(a(7294),a(3905));const i={title:"as",slug:"/api/commands/as"},s=void 0,o={unversionedId:"api/queries/as",id:"api/queries/as",title:"as",description:"Assign an alias for later use. Reference the alias later within a",source:"@site/docs/api/queries/as.mdx",sourceDirName:"api/queries",slug:"/api/commands/as",permalink:"/cypress-documentation/api/commands/as",draft:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/api/queries/as.mdx",tags:[],version:"current",frontMatter:{title:"as",slug:"/api/commands/as"},sidebar:"api",previous:{title:"Table of Contents",permalink:"/cypress-documentation/api/table-of-contents"},next:{title:"children",permalink:"/cypress-documentation/api/commands/children"}},l={},p=[{value:"Syntax",id:"Syntax",level:2},{value:"Usage",id:"Usage",level:3},{value:"Arguments",id:"Arguments",level:3},{value:'Yields <Icon name="question-circle"/>',id:"Yields",level:3},{value:"Examples",id:"Examples",level:2},{value:"DOM element",id:"DOM-element",level:3},{value:"Intercept",id:"Intercept",level:3},{value:"Fixture",id:"Fixture",level:3},{value:"Notes",id:"Notes",level:2},{value:"Aliases are reset",id:"Aliases-are-reset",level:3},{value:"Reserved words",id:"Reserved-words",level:3},{value:"Alias names cannot match some reserved words.",id:"Alias-names-cannot-match-some-reserved-words",level:4},{value:"<code>as</code> is asynchronous",id:"as-is-asynchronous",level:3},{value:"Rules",id:"Rules",level:2},{value:'Requirements <Icon name="question-circle"/>',id:"Requirements",level:3},{value:'Assertions <Icon name="question-circle"/>',id:"Assertions",level:3},{value:'Timeouts <Icon name="question-circle"/>',id:"Timeouts",level:3},{value:"Command Log",id:"Command-Log",level:2},{value:"History",id:"History",level:2},{value:"See also",id:"See-also",level:2}],c=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)},m=c("Icon"),u=c("DocsImage"),d={toc:p};function h(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Assign an alias for later use. Reference the alias later within a\n",(0,r.kt)("a",{parentName:"p",href:"/api/commands/get"},(0,r.kt)("inlineCode",{parentName:"a"},"cy.get()"))," query or ",(0,r.kt)("a",{parentName:"p",href:"/api/commands/wait"},(0,r.kt)("inlineCode",{parentName:"a"},"cy.wait()")),"\ncommand with an ",(0,r.kt)("inlineCode",{parentName:"p"},"@")," prefix."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"Note:")," ",(0,r.kt)("inlineCode",{parentName:"p"},".as()")," assumes you are already familiar with core concepts such as\n",(0,r.kt)("a",{parentName:"p",href:"/guides/core-concepts/variables-and-aliases"},"aliases"))),(0,r.kt)("h2",{id:"Syntax"},"Syntax"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},".as(aliasName)\n.as(aliasName, options)\n")),(0,r.kt)("h3",{id:"Usage"},"Usage"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)(m,{name:"check-circle",color:"green",mdxType:"Icon"})," Correct Usage")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.get('.main-nav').find('li').first().as('firstNav') // Alias element as @firstNav\ncy.get('input.username').invoke('val').as('username', { type: 'static' }) // Alias that references the value at the time the alias was created\ncy.intercept('PUT', '/users').as('putUser') // Alias route as @putUser\ncy.stub(api, 'onUnauth').as('unauth') // Alias stub as @unauth\ncy.spy(win, 'fetch').as('winFetch') // Alias spy as @winFetch\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)(m,{name:"exclamation-triangle",color:"red",mdxType:"Icon"})," Incorrect Usage")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.as('foo') // Errors, cannot be chained off 'cy'\n")),(0,r.kt)("h3",{id:"Arguments"},"Arguments"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)(m,{name:"angle-right",mdxType:"Icon"})," aliasName")," ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"(String)"))),(0,r.kt)("p",null,"The name of the alias to be referenced later within a\n",(0,r.kt)("a",{parentName:"p",href:"/api/commands/get"},(0,r.kt)("inlineCode",{parentName:"a"},"cy.get()"))," or ",(0,r.kt)("a",{parentName:"p",href:"/api/commands/wait"},(0,r.kt)("inlineCode",{parentName:"a"},"cy.wait()"))," command\nusing an ",(0,r.kt)("inlineCode",{parentName:"p"},"@")," prefix."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)(m,{name:"angle-right",mdxType:"Icon"})," options")," ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"(Object)"))),(0,r.kt)("p",null,"Pass in an options object to change the default behavior of ",(0,r.kt)("inlineCode",{parentName:"p"},".as()"),"."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Option"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"type")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"query")),(0,r.kt)("td",{parentName:"tr",align:null},"The type of alias to store, which impacts how the value is retrieved later in the test. Valid values are ",(0,r.kt)("inlineCode",{parentName:"td"},"query")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"static"),". A ",(0,r.kt)("inlineCode",{parentName:"td"},"query")," alias re-runs all queries leading up to the resulting value each time the alias is requested. A ",(0,r.kt)("inlineCode",{parentName:"td"},"static")," alias is retrieved once when the alias is stored, and will never change. ",(0,r.kt)("inlineCode",{parentName:"td"},"type")," has no effect when aliasing intercepts, spies, and stubs.")))),(0,r.kt)("h3",{id:"Yields"},"Yields ",(0,r.kt)("a",{parentName:"h3",href:"/guides/core-concepts/introduction-to-cypress#Subject-Management"},(0,r.kt)(m,{name:"question-circle",mdxType:"Icon"}))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},".as()")," yields the same subject it was given."),(0,r.kt)("li",{parentName:"ul"},"It is ",(0,r.kt)("em",{parentName:"li"},"safe")," to chain further commands after ",(0,r.kt)("inlineCode",{parentName:"li"},".as()"),".")),(0,r.kt)("h2",{id:"Examples"},"Examples"),(0,r.kt)("h3",{id:"DOM-element"},"DOM element"),(0,r.kt)("p",null,"Aliasing a DOM element and then using ",(0,r.kt)("a",{parentName:"p",href:"/api/commands/get"},(0,r.kt)("inlineCode",{parentName:"a"},"cy.get()"))," to access\nthe aliased element."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"it('disables on click', () => {\n  cy.get('button[type=submit]').as('submitBtn')\n  cy.get('@submitBtn').click().should('be.disabled')\n})\n")),(0,r.kt)("h3",{id:"Intercept"},"Intercept"),(0,r.kt)("p",null,"Aliasing an intercepted route defined with\n",(0,r.kt)("a",{parentName:"p",href:"/api/commands/intercept"},(0,r.kt)("inlineCode",{parentName:"a"},"cy.intercept()"))," and then using\n",(0,r.kt)("a",{parentName:"p",href:"/api/commands/wait"},(0,r.kt)("inlineCode",{parentName:"a"},"cy.wait()"))," to wait for the aliased route."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// `PUT` requests on the `/users` endpoint will be stubbed with\n// the `user` fixture and be aliased as `editUser`\ncy.intercept('PUT', '/users', { fixture: 'user' }).as('editUser')\n\n// we'll assume submitting `form` triggers a matching request\ncy.get('form').submit()\n\n// once a response comes back from the `editUser`\n// this `wait` will resolve with the subject containing `url`\ncy.wait('@editUser').its('url').should('contain', 'users')\n")),(0,r.kt)("p",null,"More examples of aliasing routes can be found\n",(0,r.kt)("a",{parentName:"p",href:"/api/commands/intercept#Aliasing-an-intercepted-route"},"here"),"."),(0,r.kt)("h3",{id:"Fixture"},"Fixture"),(0,r.kt)("p",null,"Aliasing ",(0,r.kt)("a",{parentName:"p",href:"/api/commands/fixture"},(0,r.kt)("inlineCode",{parentName:"a"},"cy.fixture()"))," data and then using ",(0,r.kt)("inlineCode",{parentName:"p"},"this")," to\naccess it via the alias."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"beforeEach(() => {\n  cy.fixture('users-admins.json').as('admins')\n})\n\nit('the users fixture is bound to this.admins', function () {\n  cy.log(`There are ${this.admins.length} administrators.`)\n})\n")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Note the use of the standard function syntax. Using\n",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions"},"arrow functions"),"\nto access aliases via ",(0,r.kt)("inlineCode",{parentName:"p"},"this")," won't work because of\n",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions#No_separate_this"},"the lexical binding"),"\nof ",(0,r.kt)("inlineCode",{parentName:"p"},"this"),".")),(0,r.kt)("h2",{id:"Notes"},"Notes"),(0,r.kt)("h3",{id:"Aliases-are-reset"},"Aliases are reset"),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"Note:")," all aliases are reset before each test. See the\n",(0,r.kt)("a",{parentName:"p",href:"/guides/core-concepts/variables-and-aliases"},"aliases guide")," for details.")),(0,r.kt)("h3",{id:"Reserved-words"},"Reserved words"),(0,r.kt)("h4",{id:"Alias-names-cannot-match-some-reserved-words"},"Alias names cannot match some reserved words."),(0,r.kt)("p",null,"Some strings are not allowed as alias names since they are reserved words in\nCypress. These words include: ",(0,r.kt)("inlineCode",{parentName:"p"},"test"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"runnable"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"timeout"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"slow"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"skip"),", and\n",(0,r.kt)("inlineCode",{parentName:"p"},"inspect"),"."),(0,r.kt)("h3",{id:"as-is-asynchronous"},(0,r.kt)("inlineCode",{parentName:"h3"},"as")," is asynchronous"),(0,r.kt)("p",null,"Remember that ",(0,r.kt)("strong",{parentName:"p"},"Cypress commands are async"),", including ",(0,r.kt)("inlineCode",{parentName:"p"},".as()"),"."),(0,r.kt)("p",null,"Because of this you cannot ",(0,r.kt)("em",{parentName:"p"},"synchronously")," access anything you have aliased. You\nmust use other asynchronous commands such as ",(0,r.kt)("a",{parentName:"p",href:"/api/commands/then"},(0,r.kt)("inlineCode",{parentName:"a"},".then()"))," to\naccess what you've aliased."),(0,r.kt)("p",null,"Here are some further examples of using ",(0,r.kt)("inlineCode",{parentName:"p"},".as()")," that illustrate the asynchronous\nbehavior."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"describe('A fixture', () => {\n  describe('alias can be accessed', () => {\n    it('via get().', () => {\n      cy.fixture('admin-users.json').as('admins')\n      cy.get('@admins').then((users) => {\n        cy.log(`There are ${users.length} admins.`)\n      })\n    })\n\n    it('via then().', function () {\n      cy.fixture('admin-users.json').as('admins')\n      cy.visit('/').then(() => {\n        cy.log(`There are ${this.admins.length} admins.`)\n      })\n    })\n  })\n\n  describe('aliased in beforeEach()', () => {\n    beforeEach(() => {\n      cy.fixture('admin-users.json').as('admins')\n    })\n\n    it('is bound to this.', function () {\n      cy.log(`There are ${this.admins.length} admins.`)\n    })\n  })\n})\n")),(0,r.kt)("h2",{id:"Rules"},"Rules"),(0,r.kt)("h3",{id:"Requirements"},"Requirements ",(0,r.kt)("a",{parentName:"h3",href:"/guides/core-concepts/introduction-to-cypress#Chains-of-Commands"},(0,r.kt)(m,{name:"question-circle",mdxType:"Icon"}))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},".as()")," requires being chained off a previous command.")),(0,r.kt)("h3",{id:"Assertions"},"Assertions ",(0,r.kt)("a",{parentName:"h3",href:"/guides/core-concepts/introduction-to-cypress#Assertions"},(0,r.kt)(m,{name:"question-circle",mdxType:"Icon"}))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},".as()")," is a utility command."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},".as()")," will not run assertions. Assertions will pass through as if this\ncommand did not exist.")),(0,r.kt)("h3",{id:"Timeouts"},"Timeouts ",(0,r.kt)("a",{parentName:"h3",href:"/guides/core-concepts/introduction-to-cypress#Timeouts"},(0,r.kt)(m,{name:"question-circle",mdxType:"Icon"}))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},".as()")," cannot time out.")),(0,r.kt)("h2",{id:"Command-Log"},"Command Log"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"Alias several routes"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"cy.intercept('/company/*').as('companyGet')\ncy.intercept('/roles/*').as('rolesGet')\ncy.intercept('/teams/*').as('teamsGet')\ncy.intercept(/users\\/\\d+/).as('userGet')\ncy.intercept('PUT', /^\\/users\\/\\d+/).as('userPut')\n")),(0,r.kt)("p",null,"Aliases of routes display in the routes instrument panel:"),(0,r.kt)(u,{src:"/img/api/as/routes-table-in-command-log.png",alt:"Command log for route",mdxType:"DocsImage"}),(0,r.kt)("h2",{id:"History"},"History"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Version"),(0,r.kt)("th",{parentName:"tr",align:null},"Changes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/guides/references/changelog#12-3-0"},"12.3.0")),(0,r.kt)("td",{parentName:"tr",align:null},"Added option ",(0,r.kt)("inlineCode",{parentName:"td"},"type")," to opt into the pre-12.0.0 behavior.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/guides/references/changelog#12-0-0"},"12.0.0")),(0,r.kt)("td",{parentName:"tr",align:null},"All aliases now re-run queries leading up to them by default.")))),(0,r.kt)("h2",{id:"See-also"},"See also"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/api/commands/get"},(0,r.kt)("inlineCode",{parentName:"a"},"cy.get()"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/api/commands/wait"},(0,r.kt)("inlineCode",{parentName:"a"},"cy.wait()"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/guides/core-concepts/variables-and-aliases"},"Guides: Aliases"))))}h.isMDXComponent=!0}}]);