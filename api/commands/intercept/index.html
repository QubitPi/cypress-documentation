<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-api/commands/intercept">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">intercept | Cypress Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://QubitPi.github.io/cypress-documentation/img/logo/cypress-logo-circle-dark.png"><meta data-rh="true" name="twitter:image" content="https://QubitPi.github.io/cypress-documentation/img/logo/cypress-logo-circle-dark.png"><meta data-rh="true" property="og:url" content="https://QubitPi.github.io/cypress-documentation/api/commands/intercept"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="intercept | Cypress Documentation"><meta data-rh="true" name="description" content="Spy and stub network requests and responses."><meta data-rh="true" property="og:description" content="Spy and stub network requests and responses."><link data-rh="true" rel="canonical" href="https://QubitPi.github.io/cypress-documentation/api/commands/intercept"><link data-rh="true" rel="alternate" href="https://QubitPi.github.io/cypress-documentation/api/commands/intercept" hreflang="en"><link data-rh="true" rel="alternate" href="https://QubitPi.github.io/cypress-documentation/api/commands/intercept" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://R9KDA5FMJB-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-59606812-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-KNKBWLD",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>


<link rel="search" type="application/opensearchdescription+xml" title="Cypress Documentation" href="/cypress-documentation/opensearch.xml">
<script src="https://cmp.osano.com/AzqisZTSBrMdc3qLt/bb12d637-24a5-47ce-8788-92e13ca795cf/osano.js"></script>
<link rel="icon" type="image/x-icon" href="/favicon.ico" sizes="any">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<script>window._fs_host="fullstory.com",window._fs_script="edge.fullstory.com/s/fs.js",window._fs_org="undefined",window._fs_namespace="FS",function(n,e,t,o,s,c,i,f){t in n?n.console&&n.console.log&&n.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].'):((i=n[t]=function(n,e,t){i.q?i.q.push([n,e,t]):i._api(n,e,t)}).q=[],(c=e.createElement(o)).async=1,c.crossOrigin="anonymous",c.src="https://"+_fs_script,(f=e.getElementsByTagName(o)[0]).parentNode.insertBefore(c,f),i.identify=function(n,e,t){i(s,{uid:n},t),e&&i(s,e,t)},i.setUserVars=function(n,e){i(s,n,e)},i.event=function(n,e,t){i("event",{n:n,p:e},t)},i.anonymize=function(){i.identify(!1)},i.shutdown=function(){i("rec",!1)},i.restart=function(){i("rec",!0)},i.log=function(n,e){i("log",[n,e])},i.consent=function(n){i("consent",!arguments.length||n)},i.identifyAccount=function(n,e){c="account",(e=e||{}).acctId=n,i(c,e)},i.clearUserCookie=function(){},i.setVars=function(n,e){i("setVars",[n,e])},i._w={},f="XMLHttpRequest",i._w[f]=n[f],f="fetch",i._w[f]=n[f],n[f]&&(n[f]=function(){return i._w[f].apply(this,arguments)}),i._v="1.3.0")}(window,document,window._fs_namespace,"script","user")</script><link rel="stylesheet" href="/cypress-documentation/assets/css/styles.0eb0034c.css">
<link rel="preload" href="/cypress-documentation/assets/js/runtime~main.dded4550.js" as="script">
<link rel="preload" href="/cypress-documentation/assets/js/main.1ce2fba1.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNKBWLD" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">ðŸ“¢ &nbsp; <strong>v13.0.0</strong> - Replay your tests as they occurred in your CI run and debug with confidence using <a href="/guides/cloud/debugging/test-replay">Test Replay</a> in <a href="/guides/cloud/introduction">Cypress Cloud</a>! ðŸŽ‰</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cypress-documentation/guides/overview/why-cypress"><div class="navbar__logo"><img src="/cypress-documentation/img/logo/cypress-logo-dark.png" alt="Cypress Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/cypress-documentation/img/logo/cypress-logo-dark.png" alt="Cypress Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/cypress-documentation/guides/overview/why-cypress">Guides</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cypress-documentation/api/table-of-contents">API</a><a class="navbar__item navbar__link" href="/cypress-documentation/plugins">Plugins</a><a class="navbar__item navbar__link" href="/cypress-documentation/examples/recipes">Examples</a><a class="navbar__item navbar__link" href="/cypress-documentation/faq/questions/using-cypress-faq">FAQ</a><a href="https://learn.cypress.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Learn</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/cypress-io/cypress-documentation" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github-logo" aria-label="Cypress GitHub repository"></a><a href="https://on.cypress.io/discord" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link discord-logo" aria-label="Cypress Discord"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS darkNavbarColorModeToggle_X3D1" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cypress-documentation/api/table-of-contents">Table of Contents</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cypress-documentation/api/commands/as">Queries</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cypress-documentation/api/assertions/assertions-reference">Assertions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cypress-documentation/api/actions/actionability-guide">Actions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/cypress-documentation/api/commands/blur">Other Commands</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/blur">blur</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/clearallcookies">clearAllCookies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/clearalllocalstorage">clearAllLocalStorage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/clearallsessionstorage">clearAllSessionStorage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/clearcookie">clearCookie</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/clearcookies">clearCookies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/clearlocalstorage">clearLocalStorage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/clock">clock</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/debug">debug</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/each">each</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/end">end</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/exec">exec</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/fixture">fixture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/focus">focus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/getallcookies">getAllCookies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/getalllocalstorage">getAllLocalStorage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/getallsessionstorage">getAllSessionStorage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/getcookie">getCookie</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/getcookies">getCookies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/go">go</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/hover">hover</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cypress-documentation/api/commands/intercept">intercept</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/log">log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/mount">mount</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/origin">origin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/pause">pause</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/reload">reload</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/request">request</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/screenshot">screenshot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/session">session</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/setcookie">setCookie</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/spread">spread</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/spy">spy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/stub">stub</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/submit">submit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/task">task</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/then">then</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/tick">tick</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/viewport">viewport</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/visit">visit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/wait">wait</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/within">within</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/wrap">wrap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cypress-documentation/api/commands/writefile">writeFile</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cypress-documentation/api/cypress-api/catalog-of-events">Cypress API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cypress-documentation/api/utilities/$">Utilities</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cypress-documentation/api/plugins/after-run-api">Plugins</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cypress-documentation/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Other Commands</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">intercept</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><div class="mainContentHeader_el1s"><div class="headerWrapper_tu51"><h1>intercept</h1></div></div></header><p>Spy and stub network requests and responses.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p><strong>Tip</strong>: We recommend you read the
<a href="/cypress-documentation/guides/guides/network-requests">Network Requests</a> guide first.</p></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>All intercepts are automatically cleared before every test.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="Syntax">Syntax<a href="#Syntax" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">â€‹</a></h2><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// spying only</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">method</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> url</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">routeMatcher</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See arguments <a href="/cypress-documentation/api/commands/intercept#url-String-Glob-RegExp">url</a>,
<a href="/cypress-documentation/api/commands/intercept#method-String">method</a> and
<a href="/cypress-documentation/api/commands/intercept#routeMatcher-RouteMatcher">routeMatcher</a></p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// spying and response stubbing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> staticResponse</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">method</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> url</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> staticResponse</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">routeMatcher</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> staticResponse</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> routeMatcher</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> staticResponse</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See
<a href="/cypress-documentation/api/commands/intercept#staticResponse-lt-code-gtStaticResponselt-code-gt">staticResponse</a>
argument</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// spying, dynamic stubbing, request modification, etc.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> routeHandler</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">method</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> url</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> routeHandler</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">routeMatcher</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> routeHandler</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> routeMatcher</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> routeHandler</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See
<a href="/cypress-documentation/api/commands/intercept#routeHandler-lt-code-gtFunctionlt-code-gt">routeHandler</a>
argument</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Usage">Usage<a href="#Usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">â€‹</a></h3><p><strong><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle-check" class="svg-inline--fa fa-circle-check" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" color="green"><path fill="currentColor" d="M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"></path></svg> Correct Usage</strong></p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// spying</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/users/**&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;GET&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users*&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">method</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;GET&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">url</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users*&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">hostname</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;localhost&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// spying and response stubbing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users*&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">statusCode</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token number" style="color:#fd9170">201</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">body</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token literal-property property" style="color:#80cbc4">name</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;Peter Pan&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// spying, dynamic stubbing, request modification, etc.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/users*&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">hostname</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;localhost&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">/* do something with request and/or response */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Arguments">Arguments<a href="#Arguments" class="hash-link" aria-label="Direct link to Arguments" title="Direct link to Arguments">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Icon-nameangle-right--method-String"><strong><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-right" class="svg-inline--fa fa-angle-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"></path></svg> method</strong> <strong><em>(String)</em></strong><a href="#Icon-nameangle-right--method-String" class="hash-link" aria-label="Direct link to Icon-nameangle-right--method-String" title="Direct link to Icon-nameangle-right--method-String">â€‹</a></h4><p>Match the route to a specific
<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods" target="_blank" rel="noopener noreferrer">HTTP method</a> (<code>GET</code>,
<code>POST</code>, <code>PUT</code>, etc).</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>If no method is defined Cypress will match all requests by default.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Icon-nameangle-right--url-String-Glob-RegExp"><strong><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-right" class="svg-inline--fa fa-angle-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"></path></svg> url</strong> <strong><em>(String, Glob, RegExp)</em></strong><a href="#Icon-nameangle-right--url-String-Glob-RegExp" class="hash-link" aria-label="Direct link to Icon-nameangle-right--url-String-Glob-RegExp" title="Direct link to Icon-nameangle-right--url-String-Glob-RegExp">â€‹</a></h4><p>Specify the URL to match. See <a href="#Matching-url">Matching <code>url</code></a> for examples.</p><p>Alternatively, specify the URL via the <a href="#routeMatcher-RouteMatcher"><code>routeMatcher</code></a>
argument (below).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Icon-nameangle-right--routeMatcher-RouteMatcher"><strong><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-right" class="svg-inline--fa fa-angle-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"></path></svg> routeMatcher</strong> <strong><em>(<code>RouteMatcher</code>)</em></strong><a href="#Icon-nameangle-right--routeMatcher-RouteMatcher" class="hash-link" aria-label="Direct link to Icon-nameangle-right--routeMatcher-RouteMatcher" title="Direct link to Icon-nameangle-right--routeMatcher-RouteMatcher">â€‹</a></h4><p><code>routeMatcher</code> is an object used to match the incoming HTTP requests with this
intercepted route.</p><p>All properties are optional but all those that are set must match for the
request to be intercepted. If a <code>string</code> is passed to any property, it will be
glob-matched against the request using
<a href="/cypress-documentation/api/utilities/minimatch"><code>Cypress.minimatch</code></a> with the <code>{ matchBase: true }</code>
minimatch option applied.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>auth</td><td>HTTP Basic Authentication (<code>object</code> with keys <code>username</code> and <code>password</code>)</td></tr><tr><td>headers</td><td>HTTP request headers (<code>object</code>)</td></tr><tr><td>hostname</td><td>HTTP request hostname</td></tr><tr><td>https</td><td><code>true</code>: only secure (https://) requests, <code>false</code>: only insecure (http://) requests</td></tr><tr><td>method</td><td>HTTP request method (matches any method by default)</td></tr><tr><td>middleware</td><td><code>true</code>: match route first and in defined order, <code>false</code>: match route in reverse order (default)</td></tr><tr><td>path</td><td>HTTP request path after the hostname, including query parameters</td></tr><tr><td>pathname</td><td>Like <code>path</code>, but without query parameters</td></tr><tr><td>port</td><td>HTTP request port(s) (<code>number</code> or <code>Array</code>)</td></tr><tr><td>query</td><td>Parsed query string (<code>object</code>)</td></tr><tr><td>resourceType</td><td>The resource type of the request. See <a href="#Request-object-properties">&quot;Request object properties&quot;</a> for a list of possible values for <code>resourceType</code>.</td></tr><tr><td>times</td><td>Maximum number of times to match (<code>number</code>)</td></tr><tr><td>url</td><td>Full HTTP request URL</td></tr></tbody></table><p>See <a href="#With-RouteMatcher">examples</a> below.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="staticResponse-StaticResponse"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-right" class="svg-inline--fa fa-angle-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"></path></svg> staticResponse (<code><a href="#StaticResponse-objects">StaticResponse</a></code>)<a href="#staticResponse-StaticResponse" class="hash-link" aria-label="Direct link to staticResponse-StaticResponse" title="Direct link to staticResponse-StaticResponse">â€‹</a></h4><p>By passing in a <code>StaticResponse</code> as the last argument, you can
<a href="#Stubbing-a-response">statically define (stub) a response</a> for matched
requests. See <a href="#StaticResponse-objects"><code>StaticResponse</code> object</a> for the list of
properties.</p><p>Additionally, you can pass <code>{ log: false }</code> with your <code>StaticResponse</code> to
disable command logs for this intercept. See
<a href="#Disabling-logs-for-a-request">&quot;Disabling logs for a request&quot;</a>.</p><p>See
<a href="#With-a-StaticResponse-object">Stubbing a response with a <code>StaticResponse</code> object</a>
for an example.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="routeHandler-Function"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-right" class="svg-inline--fa fa-angle-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"></path></svg> routeHandler (<code>Function</code>)<a href="#routeHandler-Function" class="hash-link" aria-label="Direct link to routeHandler-Function" title="Direct link to routeHandler-Function">â€‹</a></h4><p>The <code>routeHandler</code> function is called whenever a request is matched, with the
first argument being the request object. From inside the callback, you have
access to the entire request-response where you can modify the outgoing request,
send a response, access the real response, and more.</p><p>See <a href="#Intercepted-requests">&quot;Intercepted requests&quot;</a> and
<a href="#Request-Response-Modification-with-routeHandler">Request/Response Modification with <code>routeHandler</code></a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Yields">Yields <a href="/cypress-documentation/guides/core-concepts/introduction-to-cypress#Subject-Management"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle-question" class="svg-inline--fa fa-circle-question" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24V250.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1H222.6c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM288 352c0 17.7-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32z"></path></svg></a><a href="#Yields" class="hash-link" aria-label="Direct link to Yields" title="Direct link to Yields">â€‹</a></h3><ul><li><code>cy.intercept()</code> yields <code>null</code>, but can be aliased.</li><li>Waiting on an aliased <code>cy.intercept()</code> route using
<a href="/cypress-documentation/api/commands/wait">cy.wait()</a> will yield an object that contains information
about the matching request/response cycle. See
<a href="#Using-the-yielded-object">Using the yielded object</a> for examples of how to
use this object.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="Examples">Examples<a href="#Examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">â€‹</a></h2><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p><code>cy.intercept</code> can be used solely for spying: to passively listen for matching
routes and apply <a href="#Aliasing-a-Route">aliases</a> to them without manipulating the
request or its response in any way. This alone is powerful as it allows you to
<a href="#Waiting-on-a-request">wait</a> for these requests, resulting in more reliable
tests.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Matching-url">Matching <code>url</code><a href="#Matching-url" class="hash-link" aria-label="Direct link to Matching-url" title="Direct link to Matching-url">â€‹</a></h3><p>You can provide the exact <a href="#Arguments">URL</a> to match or use pattern-matching to
match many URLs at once, either with globs or with regex. See
<a href="#Glob-Pattern-Matching-URLs">Glob Pattern Matching URLs</a>.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// match any request that exactly matches the URL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;https://prod.cypress.io/users&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// match any request that satisfies a glob pattern</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/users?_limit=*&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// match any request that satisfies a regex pattern</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token regex regex-delimiter" style="color:#f2ff00">/</span><span class="token regex regex-source language-regex" style="color:#f2ff00">\/users\?_limit=(3|5)$</span><span class="token regex regex-delimiter" style="color:#f2ff00">/</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Matching-method">Matching <code>method</code><a href="#Matching-method" class="hash-link" aria-label="Direct link to Matching-method" title="Direct link to Matching-method">â€‹</a></h3><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>If you don&#x27;t pass in a <a href="#method-String"><code>method</code> argument</a>, then all HTTP methods
(<code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, <code>DELETE</code>, etc.) will match.</p></div></div><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// matches this: GET http://localhost/users</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// ...and this, too: POST http://localhost/users</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;GET&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// matches this: GET http://localhost/users</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// ...but not this: POST http://localhost/users</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Matching-with-RouteMatcher">Matching with <a href="#routeMatcher-RouteMatcher">RouteMatcher</a><a href="#Matching-with-RouteMatcher" class="hash-link" aria-label="Direct link to Matching-with-RouteMatcher" title="Direct link to Matching-with-RouteMatcher">â€‹</a></h3><p>Specifying a <code>method</code> and <code>url</code> to match can also be acheived by passing the
<code>routeMatcher</code> object into <code>cy.intercept</code> instead:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// These both yield the same result:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">method</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;GET&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">url</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;**/users&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;GET&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;**/users&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// Match any type of request with the pathname `/search`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// and the query parameter &#x27;q=some+terms&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">pathname</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/search&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">query</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token literal-property property" style="color:#80cbc4">q</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;some terms&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c792ea;font-style:italic">as</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;searchForTerms&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// this RegExp matches any URL beginning with</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// &#x27;http://api.example.com/&#x27; and ending with &#x27;/edit&#x27; or &#x27;/save&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token literal-property property" style="color:#80cbc4">url</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:#f2ff00">/</span><span class="token regex regex-source language-regex" style="color:#f2ff00">^http:\/\/api\.example\.com\/.*\/(edit|save)</span><span class="token regex regex-delimiter" style="color:#f2ff00">/</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// matching requests must also contain this header</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token literal-property property" style="color:#80cbc4">headers</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">      </span><span class="token string-property property" style="color:#80cbc4">&#x27;x-requested-with&#x27;</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;exampleClient&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// this example will cause 1 request to `/temporary-error`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// to receive a network error and subsequent requests will</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// not match this `RouteMatcher`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">url</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/temporary-error&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">times</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token number" style="color:#fd9170">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">forceNetworkError</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#c792ea">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Pattern-Matching">Pattern Matching<a href="#Pattern-Matching" class="hash-link" aria-label="Direct link to Pattern Matching" title="Direct link to Pattern Matching">â€‹</a></h3><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// match updates to the `/users` endpoint using glob matching</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">method</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;+(PUT|PATCH)&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">url</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;**/users/*&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// matches:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">//   PUT /users/1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">//   PATCH /users/1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">//   doesn&#x27;t match</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">//   GET /users</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">//   GET /users/1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// same as above, but using regex</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">method</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/PUT|PATCH/&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">url</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;**/users/*&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Aliasing-an-intercepted-route">Aliasing an intercepted route<a href="#Aliasing-an-intercepted-route" class="hash-link" aria-label="Direct link to Aliasing an intercepted route" title="Direct link to Aliasing an intercepted route">â€‹</a></h3><p>While <code>cy.intercept</code> doesn&#x27;t yield anything, you can chain
<a href="/cypress-documentation/api/commands/as"><code>.as</code></a> to it to create an
<a href="/cypress-documentation/guides/core-concepts/variables-and-aliases#Aliases">alias</a> which can be used
to <a href="#Waiting-on-a-request">wait on a request</a>.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;GET&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c792ea;font-style:italic">as</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;getAllUsers&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c792ea;font-style:italic">as</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;createUser&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Aliasing-individual-requests">Aliasing individual requests<a href="#Aliasing-individual-requests" class="hash-link" aria-label="Direct link to Aliasing individual requests" title="Direct link to Aliasing individual requests">â€‹</a></h3><p>Aliases can be set on a per-request basis by setting the <code>alias</code> property of the
intercepted request. This is especially useful when intercepting GraphQL
requests:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/graphql&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#c792ea;font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">hasOwnProperty</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;query&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">&amp;&amp;</span><span class="token plain"> req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">query</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">includes</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;mutation&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">alias</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;gqlMutation&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// assert that a matching request has been made</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">wait</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;@gqlMutation&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>For more guidance around aliasing requests with GraphQL, see
<a href="/cypress-documentation/guides/end-to-end-testing/working-with-graphql">Working with GraphQL</a>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Waiting-on-a-request">Waiting on a request<a href="#Waiting-on-a-request" class="hash-link" aria-label="Direct link to Waiting on a request" title="Direct link to Waiting on a request">â€‹</a></h3><p>Use <a href="/cypress-documentation/api/commands/wait">cy.wait()</a> with
<a href="#aliasing-an-intercepted-route">aliasing an intercepted route</a> to wait for the
request/response cycle to complete.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="With-URL">With URL<a href="#With-URL" class="hash-link" aria-label="Direct link to With URL" title="Direct link to With URL">â€‹</a></h4><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;http://example.com/settings&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c792ea;font-style:italic">as</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;getSettings&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// once a request to get settings responds, &#x27;cy.wait&#x27; will resolve</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">wait</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;@getSettings&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="With-RouteMatcher">With <a href="#routeMatcher-RouteMatcher">RouteMatcher</a><a href="#With-RouteMatcher" class="hash-link" aria-label="Direct link to With-RouteMatcher" title="Direct link to With-RouteMatcher">â€‹</a></h4><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">url</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;http://example.com/search*&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">query</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">q</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;expected terms&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c792ea;font-style:italic">as</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;search&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// once any type of request to search with a querystring</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// containing &#x27;q=expected+terms&#x27; responds, &#x27;cy.wait&#x27; will resolve</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">wait</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;@search&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Using-the-yielded-object">Using the yielded object<a href="#Using-the-yielded-object" class="hash-link" aria-label="Direct link to Using the yielded object" title="Direct link to Using the yielded object">â€‹</a></h4><p>Using <a href="/cypress-documentation/api/commands/wait">cy.wait()</a> on a <code>cy.intercept()</code> route alias yields
an interception object which represents the request/response cycle:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">wait</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;@someRoute&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">then</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">interception</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// &#x27;interception&#x27; is an object with properties</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// &#x27;id&#x27;, &#x27;request&#x27; and &#x27;response&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can chain <a href="/cypress-documentation/api/commands/its"><code>.its()</code></a> and
<a href="/cypress-documentation/api/commands/should"><code>.should()</code></a> to assert against request/response cycles:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// assert that a request to this route</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// was made with a body that included &#x27;user&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">wait</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;@someRoute&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">its</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;request.body&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">should</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;include&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;user&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// assert that a request to this route</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// received a response with HTTP status 500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">wait</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;@someRoute&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">its</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;response.statusCode&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">should</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;eq&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token number" style="color:#fd9170">500</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// assert that a request to this route</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// received a response body that includes &#x27;id&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">wait</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;@someRoute&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">its</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;response.body&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">should</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;include&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;id&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Waiting-on-errors">Waiting on errors<a href="#Waiting-on-errors" class="hash-link" aria-label="Direct link to Waiting on errors" title="Direct link to Waiting on errors">â€‹</a></h4><p>You can use <a href="/cypress-documentation/api/commands/wait">cy.wait()</a> to wait on requests that end with
network errors:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;GET&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/should-err&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">forceNetworkError</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#c792ea">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c792ea;font-style:italic">as</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;err&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// assert that this request happened</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// and that it ended in an error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">wait</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;@err&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">should</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;have.property&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;error&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Stubbing-a-response">Stubbing a response<a href="#Stubbing-a-response" class="hash-link" aria-label="Direct link to Stubbing a response" title="Direct link to Stubbing a response">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="With-a-string">With a string<a href="#With-a-string" class="hash-link" aria-label="Direct link to With a string" title="Direct link to With a string">â€‹</a></h4><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// requests to &#x27;/update&#x27; will be fulfilled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// with a body of &quot;success&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/update&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;success&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="With-a-fixture">With a fixture<a href="#With-a-fixture" class="hash-link" aria-label="Direct link to With a fixture" title="Direct link to With a fixture">â€‹</a></h4><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// requests to &#x27;/users.json&#x27; will be fulfilled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// with the contents of the &quot;users.json&quot; fixture</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/users.json&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">fixture</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;users.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="With-a-StaticResponse-object">With a <code>StaticResponse</code> object<a href="#With-a-StaticResponse-object" class="hash-link" aria-label="Direct link to With-a-StaticResponse-object" title="Direct link to With-a-StaticResponse-object">â€‹</a></h4><p>A <a href="#StaticResponse-objects"><code>StaticResponse</code></a> object represents a response to an HTTP
request, and can be used to stub routes:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token keyword" style="color:#c792ea;font-style:italic">const</span><span class="token plain"> staticResponse </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">/* some StaticResponse properties here... */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/projects&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> staticResponse</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Stub a response with a JSON body:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/projects&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">body</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">[</span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">projectId</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;1&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">projectId</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;2&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Stub headers, status code, and body all at once:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/not-found&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">statusCode</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token number" style="color:#fd9170">404</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">body</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;404 Not Found!&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">headers</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token string-property property" style="color:#80cbc4">&#x27;x-not-found&#x27;</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;true&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Stub response with a fixture that is read as a Buffer:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/not-found&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">fixture</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;media/gif.mp4,null&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See also <a href="#StaticResponse-objects"><code>StaticResponse</code> object</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Using-the-routeHandler-function">Using the <strong><code>routeHandler</code></strong> function<a href="#Using-the-routeHandler-function" class="hash-link" aria-label="Direct link to Using-the-routeHandler-function" title="Direct link to Using-the-routeHandler-function">â€‹</a></h3><p>By specifying a <a href="#routeHandler-lt-code-gtstring-object-Function-StaticResponselt-code-gt"><code>routeHandler</code></a> function as the last argument
to <code>cy.intercept</code>, you&#x27;ll have access to the entire request-response session,
enabling you to modify the outgoing request, manipulate the real response, make
assertions, etc.</p><p>The <code>routeHandler</code> takes the incoming HTTP request (<code>IncomingHTTPRequest</code>) as
the first argument.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/users*&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">/* do something with request and/or response */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Throughout these examples we will refer to the incoming HTTP request as <code>req</code>.
Those of you with <a href="https://expressjs.com/" target="_blank" rel="noopener noreferrer">Express.js</a>
<a href="https://expressjs.com/en/guide/writing-middleware.html" target="_blank" rel="noopener noreferrer">middleware</a> experience
should be familiar with this syntax.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Asserting-on-a-request">Asserting on a request<a href="#Asserting-on-a-request" class="hash-link" aria-label="Direct link to Asserting on a request" title="Direct link to Asserting on a request">â€‹</a></h4><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/organization&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token function" style="color:#c792ea">expect</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">to</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">include</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;Acme Company&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Modifying-an-outgoing-request">Modifying an outgoing request<a href="#Modifying-an-outgoing-request" class="hash-link" aria-label="Direct link to Modifying an outgoing request" title="Direct link to Modifying an outgoing request">â€‹</a></h4><p>You can use the request handler callback to modify the <a href="#Intercepted-requests">intercepted request
object</a> before it is sent.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// set the request body to something different</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// before it&#x27;s sent to the destination</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/login&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">body</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;username=janelane&amp;password=secret123&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// dynamically set the alias</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/login&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">alias</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;login&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Adding-a-header-to-an-outgoing-request">Adding a header to an outgoing request<a href="#Adding-a-header-to-an-outgoing-request" class="hash-link" aria-label="Direct link to Adding a header to an outgoing request" title="Direct link to Adding a header to an outgoing request">â€‹</a></h4><p>You can add a header to an outgoing request, or modify an existing header</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/req-headers&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#89ddff">[</span><span class="token string" style="color:#c3e88d">&#x27;x-custom-headers&#x27;</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;added by cy.intercept&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Note:</strong> the new header will NOT be shown in the browser&#x27;s Network tab, as the
request has already left the browser. You can still confirm the header was added
by waiting on the intercept as shown below:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Waiting-on-the-intercept">Waiting on the intercept<a href="#Waiting-on-the-intercept" class="hash-link" aria-label="Direct link to Waiting on the intercept" title="Direct link to Waiting on the intercept">â€‹</a></h4><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/req-headers&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#89ddff">[</span><span class="token string" style="color:#c3e88d">&#x27;x-custom-headers&#x27;</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;added by cy.intercept&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c792ea;font-style:italic">as</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;headers&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// the application makes the call ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// confirm the custom header was added</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">wait</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;@headers&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">its</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;request.headers&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">should</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;have.property&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;x-custom-headers&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;added by cy.intercept&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Add-modify-or-delete-a-header-to-all-outgoing-requests">Add, modify or delete a header to all outgoing requests<a href="#Add-modify-or-delete-a-header-to-all-outgoing-requests" class="hash-link" aria-label="Direct link to Add, modify or delete a header to all outgoing requests" title="Direct link to Add, modify or delete a header to all outgoing requests">â€‹</a></h4><p>You can add, modify or delete a header to all outgoing requests using a
<code>beforeEach()</code> in the
<a href="/cypress-documentation/guides/core-concepts/writing-and-organizing-tests#Support-file">supportFile</a>.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token function" style="color:#c792ea">beforeEach</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">url</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;http://localhost:3001/**&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">middleware</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#c792ea">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// Delete &#x27;if-none-match&#x27; header from all outgoing requests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#c792ea;font-style:italic">delete</span><span class="token plain"> req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#89ddff">[</span><span class="token string" style="color:#c3e88d">&#x27;if-none-match&#x27;</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Dynamically-stubbing-a-response">Dynamically stubbing a response<a href="#Dynamically-stubbing-a-response" class="hash-link" aria-label="Direct link to Dynamically stubbing a response" title="Direct link to Dynamically stubbing a response">â€‹</a></h4><p>You can use the <a href="#Providing-a-stub-response-with-reqreply"><code>req.reply()</code></a> function to dynamically control the
response to a request.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/billing&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// functions on &#x27;req&#x27; can be used to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// dynamically respond to a request here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// send the request to the destination server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">reply</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// respond to the request with a JSON object</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">reply</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">plan</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;starter&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// send the request to the destination server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// and intercept the response</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword control-flow" style="color:#c792ea;font-style:italic">continue</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// &#x27;res&#x27; represents the real destination&#x27;s response</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// See &quot;Intercepting a response&quot; for more details and examples</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See <a href="#Intercepted-requests">&quot;Intercepted requests&quot;</a> for more information on the <code>req</code> object and
its properties and methods.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Returning-a-Promise">Returning a Promise<a href="#Returning-a-Promise" class="hash-link" aria-label="Direct link to Returning a Promise" title="Direct link to Returning a Promise">â€‹</a></h4><p>If a Promise is returned from the route callback, it will be awaited before
continuing with the request.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/login&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// you could asynchronously fetch test data...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#c792ea;font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:#c792ea">getLoginCredentials</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">then</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">credentials</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// ...and then, use it to supplement the outgoing request</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#89ddff">[</span><span class="token string" style="color:#c3e88d">&#x27;authorization&#x27;</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> credentials</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Passing-a-request-to-the-next-request-handler">Passing a request to the next request handler<a href="#Passing-a-request-to-the-next-request-handler" class="hash-link" aria-label="Direct link to Passing a request to the next request handler" title="Direct link to Passing a request to the next request handler">â€‹</a></h4><p>If <a href="#Providing-a-stub-response-with-reqreply"><code>req.reply()</code></a> or <a href="#Controlling-the-outbound-request-with-reqcontinue"><code>req.continue()</code></a> is not
explicitly called inside of a request handler, requests will pass to the next
request handler until none are left.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// you could have a top-level middleware handler that</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// sets an auth token on all requests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// but remember setting `middleware: true` will</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// cause this to always be called first</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;http://api.company.com/&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">middleware</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#c792ea">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#89ddff">[</span><span class="token string" style="color:#c3e88d">&#x27;authorization&#x27;</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#c3e88d">`</span><span class="token template-string string" style="color:#c3e88d">token </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#89ddff">${</span><span class="token template-string interpolation">token</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#89ddff">}</span><span class="token template-string template-punctuation string" style="color:#c3e88d">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// and then have another handler that</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// more narrowly asserts on certain requests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;http://api.company.com/widgets&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token function" style="color:#c792ea">expect</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">to</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">include</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;analytics&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// a POST request to http://api.company.com/widgets would hit both</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// of those callbacks, middleware first, then the request would be</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// sent out with the modified request headers to the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// real destination</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Disabling-logs-for-a-request">Disabling logs for a request<a href="#Disabling-logs-for-a-request" class="hash-link" aria-label="Direct link to Disabling logs for a request" title="Direct link to Disabling logs for a request">â€‹</a></h3><p>By default, Cypress logs all requests that match any <code>cy.intercept()</code>, as well
as all <code>XMLHttpRequest</code>s and <code>fetch</code> requests. You can use <code>cy.intercept()</code> to
disable these logs by passing <code>{ log: false }</code> in the second parameter:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// disable Cypress&#x27;s default behavior of logging all XMLHttpRequests and fetches</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">resourceType</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:#f2ff00">/</span><span class="token regex regex-source language-regex" style="color:#f2ff00">xhr|fetch</span><span class="token regex regex-delimiter" style="color:#f2ff00">/</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">log</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#c792ea">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note: Currently, you can only enable/disable a request&#x27;s logs when defining the
<code>cy.intercept()</code>, not inside of an <code>intercept</code> callback. See
<a href="https://github.com/cypress-io/cypress/issues/26069" target="_blank" rel="noopener noreferrer">#26069</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Intercepting-a-response">Intercepting a response<a href="#Intercepting-a-response" class="hash-link" aria-label="Direct link to Intercepting a response" title="Direct link to Intercepting a response">â€‹</a></h3><p>Inside of a callback passed to <code>req.continue()</code>, you can access the destination
server&#x27;s real response.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/integrations&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// req.continue() with a callback will send the request to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// the destination server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword control-flow" style="color:#c792ea;font-style:italic">continue</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// &#x27;res&#x27; represents the real destination response</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// you can manipulate &#x27;res&#x27; before it&#x27;s sent to the browser</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See <a href="#Intercepted-responses">&quot;Intercepted responses&quot;</a> for more information on the <code>res</code> object. See
<a href="#Controlling-the-outbound-request-with-reqcontinue">&quot;Controlling the outbound request with <code>req.continue()</code>&quot;</a> for
more information about <code>req.continue()</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Asserting-on-a-response">Asserting on a response<a href="#Asserting-on-a-response" class="hash-link" aria-label="Direct link to Asserting on a response" title="Direct link to Asserting on a response">â€‹</a></h4><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/projects/2&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword control-flow" style="color:#c792ea;font-style:italic">continue</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token function" style="color:#c792ea">expect</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">to</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">include</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;My Project&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Returning-a-Promise-1">Returning a Promise<a href="#Returning-a-Promise-1" class="hash-link" aria-label="Direct link to Returning a Promise" title="Direct link to Returning a Promise">â€‹</a></h4><p>If a Promise is returned from the route callback, it will be awaited before
sending the response to the browser.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword control-flow" style="color:#c792ea;font-style:italic">continue</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// the response will not be sent to the browser until</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// &#x27;waitForSomething()&#x27; resolves</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#c792ea;font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:#c792ea">waitForSomething</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Throttle-or-delay-response-all-incoming-responses">Throttle or delay response all incoming responses<a href="#Throttle-or-delay-response-all-incoming-responses" class="hash-link" aria-label="Direct link to Throttle or delay response all incoming responses" title="Direct link to Throttle or delay response all incoming responses">â€‹</a></h4><p>You can throttle or delay all incoming responses using a <code>beforeEach()</code> in the
<a href="/cypress-documentation/guides/core-concepts/writing-and-organizing-tests#Support-file">supportFile</a>.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// Throttle API responses to simulate real-world conditions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token function" style="color:#c792ea">beforeEach</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">      </span><span class="token literal-property property" style="color:#80cbc4">url</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;http://localhost:3001/**&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">      </span><span class="token literal-property property" style="color:#80cbc4">middleware</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#c792ea">true</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">      req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">on</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;response&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">        </span><span class="token comment" style="color:#7499AB">// Throttle the response to 1 Mbps to simulate a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">        </span><span class="token comment" style="color:#7499AB">// mobile 3G connection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">        res</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">setThrottle</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token number" style="color:#fd9170">1000</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">      </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="RequestResponse-Modification-with-routeHandler">Request/Response Modification with <code>routeHandler</code><a href="#RequestResponse-Modification-with-routeHandler" class="hash-link" aria-label="Direct link to RequestResponse-Modification-with-routeHandler" title="Direct link to RequestResponse-Modification-with-routeHandler">â€‹</a></h3><p>Specify <a href="#routeHandler-lt-code-gtstring-object-Function-StaticResponselt-code-gt"><code>routeHandler</code></a> as the last argument to modify the
outgoing request, stub a response, make assertions, etc.</p><p>If a function is passed as the <code>routeHandler</code>, it will be called with the
intercepted HTTP request:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/api&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// do something with the intercepted request</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>From here, you can do several things with the intercepted request:</p><ul><li>modify and make assertions on the request like its body, headers, URL, method,
etc. (<a href="#Asserting-on-a-request-1">example</a>)</li><li>stub out the response without interacting with a real back-end
(<a href="#Controlling-the-response">example</a></li><li>pass the request through to its destination and modify or make assertions on
the real response on its way back (<a href="#Controlling-the-response">example</a>)</li><li>attach listeners to various events on the request
(<a href="#Controlling-the-response">example</a>)</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Asserting-on-a-request-1">Asserting on a request<a href="#Asserting-on-a-request-1" class="hash-link" aria-label="Direct link to Asserting on a request" title="Direct link to Asserting on a request">â€‹</a></h4><p>You can use the request handler callback to make an assertion on the
<a href="#Intercepted-requests">intercepted request object</a> before it is sent.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// match requests to create a user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// make an assertion on the payload contents</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token function" style="color:#c792ea">expect</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">to</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">include</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;Peter Pan&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Controlling-the-outgoing-request">Controlling the outgoing request<a href="#Controlling-the-outgoing-request" class="hash-link" aria-label="Direct link to Controlling the outgoing request" title="Direct link to Controlling the outgoing request">â€‹</a></h4><p>The outgoing request, including its body, headers, etc., can be modified before
it&#x27;s sent.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// modify the request body before it&#x27;s sent to its destination</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">body</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token literal-property property" style="color:#80cbc4">name</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;Peter Pan&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// add a header to an outgoing request</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#89ddff">[</span><span class="token string" style="color:#c3e88d">&#x27;x-custom-header&#x27;</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;added by cy.intercept&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// modify an existing header</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#89ddff">[</span><span class="token string" style="color:#c3e88d">&#x27;authorization&#x27;</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;Basic YWxhZGRpbjpvcGVuc2VzYW1l&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Verifying-the-request-modification">Verifying the request modification<a href="#Verifying-the-request-modification" class="hash-link" aria-label="Direct link to Verifying the request modification" title="Direct link to Verifying the request modification">â€‹</a></h4><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#89ddff">[</span><span class="token string" style="color:#c3e88d">&#x27;x-custom-header&#x27;</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;added by cy.intercept&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c792ea;font-style:italic">as</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;createUser&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">get</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;button.save&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">click</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// you can see the headers in the console output by selecting</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// this line in the command log:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">wait</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;@createUser&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// ...or make an assertion:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">its</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;request.headers&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">should</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;have.property&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;x-custom-header&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;added by cy.intercept&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>The request modification cannot be verified by inspecting the browser&#x27;s network
traffic (for example, in Chrome DevTools), since the browser logs network
traffic <em>before</em> Cypress can intercept it.</p></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p><code>cy.intercept()</code> cannot be debugged using
<a href="/cypress-documentation/api/commands/request"><code>cy.request()</code></a>! Cypress only intercepts requests made
by your front-end application.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Controlling-the-response">Controlling the response<a href="#Controlling-the-response" class="hash-link" aria-label="Direct link to Controlling the response" title="Direct link to Controlling the response">â€‹</a></h4><p>The intercepted request passed to the route handler (hereafter referred to as
<code>req</code>, though you can use any name) contains methods to dynamically control the
response to a request:</p><ul><li><code>req.reply()</code> - stub out a response requiring no dependency on a real back-end</li><li><code>req.continue()</code> - modify or make assertions on the real response</li><li><code>req.destroy()</code> - destroy the request and respond with a network error</li><li><code>req.redirect()</code> - respond to the request with a redirect to a specified
location</li><li><code>req.on()</code> - modify the response by attaching to events</li></ul><p>Stubbing out a response (<code>req.reply()</code>):</p><p><code>req.reply()</code> takes a <a href="#StaticResponse-objects"><code>StaticResponse</code></a> object as the first
argument:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// stub out the response without interacting with a real back-end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">reply</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token literal-property property" style="color:#80cbc4">headers</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">      </span><span class="token known-class-name class-name" style="color:#f2ff00">Set</span><span class="token operator" style="color:#89ddff">-</span><span class="token maybe-class-name">Cookie</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;newUserName=Peter Pan;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token literal-property property" style="color:#80cbc4">statusCode</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token number" style="color:#fd9170">201</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token literal-property property" style="color:#80cbc4">body</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">      </span><span class="token literal-property property" style="color:#80cbc4">name</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;Peter Pan&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token literal-property property" style="color:#80cbc4">delay</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token number" style="color:#fd9170">10</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token comment" style="color:#7499AB">// milliseconds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token literal-property property" style="color:#80cbc4">throttleKbps</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token number" style="color:#fd9170">1000</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token comment" style="color:#7499AB">// to simulate a 3G connection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token literal-property property" style="color:#80cbc4">forceNetworkError</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#c792ea">false</span><span class="token plain"> </span><span class="token comment" style="color:#7499AB">// default</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// stub out a response body using a fixture</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;GET&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">reply</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token literal-property property" style="color:#80cbc4">statusCode</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token number" style="color:#fd9170">200</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token comment" style="color:#7499AB">// default</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token literal-property property" style="color:#80cbc4">fixture</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;users.json&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See <a href="#StaticResponse-objects"><code>StaticResponse</code> objects</a> below for more information.</p><p>The <code>reply</code> method also supports shorthand to avoid having to specify a
<code>StaticResponse</code> object:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// equivalent to `req.reply({ body })`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">reply</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// equivalent to `req.reply({ body, headers })`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">reply</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> headers</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// equivalent to `req.reply({ statusCode, body, headers})`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">reply</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">statusCode</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> body</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> headers</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Note: Calling <code>reply()</code> will end the request phase and stop the request from
propagating to the next matching request handler in line. See <a href="#Interception-lifecycle">Interception
Lifecycle</a>.</p></div></div><p>See also
<a href="#Providing-a-stub-response-with-req-reply">Providing a stub response with <code>req.reply()</code></a></p><p>Modifying the real response (<code>continue</code>):</p><p>The <code>continue</code> method accepts a function which is passed an object representing
the real response being intercepted on its way back to the client (your
front-end application).</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// pass the request through and make an assertion on</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// the real response</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword control-flow" style="color:#c792ea;font-style:italic">continue</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token function" style="color:#c792ea">expect</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">to</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">include</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;Peter Pan&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See also <a href="#Controlling-the-outbound-request-with-reqcontinue">Controlling the outbound request with <code>req.continue()</code></a></p><p>Responding with a network error (<code>destroy</code>):</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// dynamically destroy the request and</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// respond with a network error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#c792ea;font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token function" style="color:#c792ea">mustDestroy</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">destroy</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token keyword" style="color:#c792ea;font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:#c792ea">mustDestroy</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// code that determines whether to force a network error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// based on the contents of `req`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Responding with a new location (<code>redirect</code>):</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// respond to this request with a redirect to a new &#x27;location&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;GET&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// statusCode defaults to `302`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">redirect</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/customers&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token number" style="color:#fd9170">301</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Responding by listening to events (<code>on</code>):</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;GET&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">on</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;before:response&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// do something when the `before:response` event is triggered</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">on</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;response&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// do something when the `response` event is triggered</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See example for
<a href="#Throttle-or-delay-response-all-incoming-responses">throttling a response</a> See
more examples of <a href="#Request-events">events</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Returning-a-Promise-2">Returning a Promise<a href="#Returning-a-Promise-2" class="hash-link" aria-label="Direct link to Returning a Promise" title="Direct link to Returning a Promise">â€‹</a></h4><p>If a Promise is returned from the route callback, it will be awaited before
continuing with the request.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// asynchronously fetch test data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#c792ea;font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:#c792ea">getAuthToken</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">then</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">token</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// ...and apply it to the outgoing request</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#89ddff">[</span><span class="token string" style="color:#c3e88d">&#x27;Authorization&#x27;</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#c3e88d">`</span><span class="token template-string string" style="color:#c3e88d">Basic </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#89ddff">${</span><span class="token template-string interpolation">token</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#89ddff">}</span><span class="token template-string template-punctuation string" style="color:#c3e88d">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword control-flow" style="color:#c792ea;font-style:italic">continue</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// the response will not be sent to the browser until</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// `waitForSomething()` resolves:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#c792ea;font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:#c792ea">waitForSomething</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Stubbing-a-response-with-a-string">Stubbing a response with a string<a href="#Stubbing-a-response-with-a-string" class="hash-link" aria-label="Direct link to Stubbing a response with a string" title="Direct link to Stubbing a response with a string">â€‹</a></h4><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// requests to create a user will be fulfilled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// with a body of &#x27;success&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;success&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// { body: &#x27;sucess&#x27; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="Intercepted-requests">Intercepted requests<a href="#Intercepted-requests" class="hash-link" aria-label="Direct link to Intercepted requests" title="Direct link to Intercepted requests">â€‹</a></h2><p>If a function is passed as the handler for a <code>cy.intercept()</code>, it will be called
with the first argument being an object that represents the intercepted HTTP
request:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/api&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// `req` represents the intercepted HTTP request</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>From here, you can do several things with the intercepted request:</p><ul><li>you can modify and assert on the request&#x27;s properties (body, headers, URL,
method...)</li><li>the request can be sent to the real upstream server<ul><li>optionally, you can intercept the response from this</li></ul></li><li>a response can be provided to stub out the request</li><li>listeners can be attached to various events on the request</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Request-object-properties">Request object properties<a href="#Request-object-properties" class="hash-link" aria-label="Direct link to Request object properties" title="Direct link to Request object properties">â€‹</a></h3><p>The request object (<code>req</code>) has several properties from the HTTP request itself:</p><div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">/**</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * The body of the request.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * If a JSON Content-Type was used and the body was valid JSON,</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * this will be an object.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * If the body was binary content, this will be a buffer.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  body</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token builtin" style="color:#ffcb6b">string</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">|</span><span class="token plain"> object </span><span class="token operator" style="color:#89ddff">|</span><span class="token plain"> </span><span class="token builtin" style="color:#ffcb6b">any</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">/**</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * The headers of the request.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  headers</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">[</span><span class="token plain">key</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token builtin" style="color:#ffcb6b">string</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token builtin" style="color:#ffcb6b">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">/**</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * Request HTTP method (GET, POST, ...).</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  method</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token builtin" style="color:#ffcb6b">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">/**</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * Request URL.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  url</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token builtin" style="color:#ffcb6b">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">/**</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * URL query string as object.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  query</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> Record</span><span class="token operator" style="color:#89ddff">&lt;</span><span class="token builtin" style="color:#ffcb6b">string</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token builtin" style="color:#ffcb6b">string</span><span class="token operator" style="color:#89ddff">|</span><span class="token builtin" style="color:#ffcb6b">number</span><span class="token operator" style="color:#89ddff">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">/**</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * The HTTP version used in the request. Read only.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  httpVersion</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token builtin" style="color:#ffcb6b">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">/**</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * The resource type of the request. Read only.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  resourceType</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;document&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">|</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;fetch&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">|</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;xhr&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">|</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;websocket&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">|</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;stylesheet&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">              </span><span class="token operator" style="color:#89ddff">|</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;script&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">|</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;image&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">|</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;font&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">|</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;cspviolationreport&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">|</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;ping&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">              </span><span class="token operator" style="color:#89ddff">|</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;manifest&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">|</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;other&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>req</code> also has some optional properties which can be set to control
Cypress-specific behavior:</p><div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">/**</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * If provided, the number of milliseconds before an upstream</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * response to this request will time out and cause an error.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * By default, `responseTimeout` from config is used.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  responseTimeout</span><span class="token operator" style="color:#89ddff">?</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token builtin" style="color:#ffcb6b">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">/**</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * Set if redirects should be followed when this request is made.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * By default, requests will not follow redirects before</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * yielding the response (the 3xx redirect is yielded).</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  followRedirect</span><span class="token operator" style="color:#89ddff">?</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token builtin" style="color:#ffcb6b">boolean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">/**</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * If set, `cy.wait` can be used to await the request/response</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * cycle to complete for this request via `cy.wait(&#x27;@alias&#x27;)`.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  alias</span><span class="token operator" style="color:#89ddff">?</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token builtin" style="color:#ffcb6b">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Any modifications to the properties of <code>req</code> will be persisted to other request
handlers, and finally merged into the actual outbound HTTP request.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Controlling-the-outbound-request-with-reqcontinue">Controlling the outbound request with <code>req.continue()</code><a href="#Controlling-the-outbound-request-with-reqcontinue" class="hash-link" aria-label="Direct link to Controlling-the-outbound-request-with-reqcontinue" title="Direct link to Controlling-the-outbound-request-with-reqcontinue">â€‹</a></h3><p>Calling <code>req.continue()</code> without any argument will cause the request to be sent
outgoing, and the response will be returned to the browser after any other
listeners have been called. For example, the following code modifies a <code>POST</code>
request and then sends it to the upstream server:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/submitStory&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">storyName</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;some name&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// send the modified request and skip any other</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// matching request handlers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword control-flow" style="color:#c792ea;font-style:italic">continue</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If a function is passed to <code>req.continue()</code>, the request will be sent to the
real upstream server, and the callback will be called with the response once the
response is fully received from the server. See <a href="#Intercepted-responses">&quot;Intercepted responses&quot;</a></p><p>Note: calling <code>req.continue()</code> will stop the request from propagating to the
next matching request handler in line. See <a href="#Interception-lifecycle">&quot;Interception lifecycle&quot;</a>
for more information.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Providing-a-stub-response-with-reqreply">Providing a stub response with <code>req.reply()</code><a href="#Providing-a-stub-response-with-reqreply" class="hash-link" aria-label="Direct link to Providing-a-stub-response-with-reqreply" title="Direct link to Providing-a-stub-response-with-reqreply">â€‹</a></h3><p>The <code>req.reply()</code> function can be used to send a stub response for an
intercepted request. By passing a string, object, or
<a href="#StaticResponse-objects"><code>StaticResponse</code></a> to <code>req.reply()</code>, the request can be
preventing from reaching the destination server.</p><p>For example, the following code stubs out a JSON response from a request
interceptor:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/billing&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// dynamically get billing plan name at request-time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token keyword" style="color:#c792ea;font-style:italic">const</span><span class="token plain"> planName </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token function" style="color:#c792ea">getPlanName</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// this object will automatically be JSON.stringified and</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// sent as the response</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">reply</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">plan</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> planName </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Instead of passing a plain object or string to <code>req.reply()</code>, you can also pass
a <a href="#StaticResponse-objects"><code>StaticResponse</code></a> object. With a
<a href="#StaticResponse-objects"><code>StaticResponse</code></a>, you can force a network error,
delay/throttle the response, send a fixture, and more.</p><p>For example, the following code serves a dynamically chosen fixture with a delay
of 500ms:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/api/users/*&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c792ea;font-style:italic">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">// asynchronously retrieve fixture filename at request-time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token keyword" style="color:#c792ea;font-style:italic">const</span><span class="token plain"> fixtureFilename </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#c792ea;font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:#c792ea">getFixtureFilenameForUrl</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">url</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">reply</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token literal-property property" style="color:#80cbc4">fixture</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> fixtureFilename</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token literal-property property" style="color:#80cbc4">delay</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token number" style="color:#fd9170">500</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See the <a href="#StaticResponse-objects"><code>StaticResponse</code> documentation</a> for more information on
stubbing responses in this manner.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="reqreply-shorthand"><code>req.reply()</code> shorthand<a href="#reqreply-shorthand" class="hash-link" aria-label="Direct link to reqreply-shorthand" title="Direct link to reqreply-shorthand">â€‹</a></h4><p><code>req.reply()</code> also supports shorthand, similar to <a href="#Ending-the-response-with-res-send"><code>res.send()</code></a>, to
avoid having to specify a <code>StaticResponse</code> object:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// equivalent to `req.reply({ body })`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">reply</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// equivalent to `req.reply({ body, headers })`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">reply</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> headers</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// equivalent to `req.reply({ statusCode, body, headers})`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">reply</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">statusCode</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> body</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> headers</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Convenience-functions">Convenience functions<a href="#Convenience-functions" class="hash-link" aria-label="Direct link to Convenience functions" title="Direct link to Convenience functions">â€‹</a></h4><p>There are also two convenience functions available on <code>req</code>:</p><div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">/**</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * Destroy the request and respond with a network error.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token function" style="color:#c792ea">destroy</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token keyword" style="color:#c792ea;font-style:italic">void</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">/**</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * Respond to this request with a redirect to a new &#x27;location&#x27;.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * @param statusCode HTTP status code to redirect with. Default: 302</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token function" style="color:#c792ea">redirect</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">location</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token builtin" style="color:#ffcb6b">string</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> statusCode</span><span class="token operator" style="color:#89ddff">?</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token builtin" style="color:#ffcb6b">number</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token keyword" style="color:#c792ea;font-style:italic">void</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See examples in the <a href="#Controlling-the-response">Controlling the response</a>
section</p><p>Note: calling <code>req.reply()</code> will end the request phase and stop the request from
propagating to the next matching request handler in line. See <a href="#Interception-lifecycle">&quot;Interception
lifecycle&quot;</a> for more information.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Request-events">Request events<a href="#Request-events" class="hash-link" aria-label="Direct link to Request events" title="Direct link to Request events">â€‹</a></h3><p>For advanced use, several events are available on <code>req</code>, that represent
different stages of the <a href="#Interception-lifecycle">Interception lifecycle</a>.</p><p>By calling <code>req.on</code>, you can subscribe to different events:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/shop&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">on</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;before:response&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">/**</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">     * Emitted before `response` and before any `req.continue`</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">     * handlers. Modifications to `res` will be applied to the</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">     * incoming response. If a promise is returned, it will be</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">     * awaited before processing other event handlers.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">on</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;response&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">/**</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">     * Emitted after `before:response` and after any</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">     * `req.continue` handlers - before the response is sent</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">     * to the browser. Modifications to `res` will be applied</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">     * to the incoming response. If a promise is returned, it</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">     * will be awaited before processing other event handlers.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">on</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;after:response&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">/**</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">     * Emitted once the response to a request has finished</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">     * sending to the browser. Modifications to `res` have no</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">     * impact. If a promise is returned, it will be awaited</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">     * before processing other event handlers.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See <a href="#Intercepted-responses">&quot;Intercepted responses&quot;</a> for more details on the <code>res</code> object yielded
by <code>before:response</code> and <code>response</code>. See <a href="#Interception-lifecycle">&quot;Interception lifecycle&quot;</a>
for more details on request ordering.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="Intercepted-responses">Intercepted responses<a href="#Intercepted-responses" class="hash-link" aria-label="Direct link to Intercepted responses" title="Direct link to Intercepted responses">â€‹</a></h2><p>The response can be intercepted in two ways:</p><ul><li>by passing a callback to <a href="#Controlling-the-outbound-request-with-reqcontinue"><code>req.continue()</code></a> within a request
handler</li><li>by listening for the <code>before:response</code> or <code>response</code> request events (see
<a href="#Request-events">&quot;Request events&quot;</a>)</li></ul><p>The response object, <code>res</code>, will be passed as the first argument to the handler
function:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/url&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">on</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;before:response&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// this will be called before any `req.continue` or</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// `response` handlers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword control-flow" style="color:#c792ea;font-style:italic">continue</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// this will be called after all `before:response`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// handlers and before any `response` handlers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// by calling `req.continue`, we signal that this</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// request handler will be the last one, and that</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// the request should be sent outgoing at this point.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// for that reason, there can only be one</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// `req.continue` handler per request.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">on</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;response&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// this will be called after all `before:response`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// handlers and after the `req.continue` handler</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token comment" style="color:#7499AB">// but before the response is sent to the browser</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Response-object-properties">Response object properties<a href="#Response-object-properties" class="hash-link" aria-label="Direct link to Response object properties" title="Direct link to Response object properties">â€‹</a></h3><p>The response object (<code>res</code>) yielded to response handlers has several properties
from the HTTP response itself. All of the following properties on <code>res</code> can be
modified:</p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td>body</td><td>response body (<code>object</code>, <code>string</code>, <code>ArrayBuffer</code>)</td></tr><tr><td>headers</td><td>response headers (<code>object</code>)</td></tr><tr><td>statusCode</td><td>response status code (<code>number</code>)</td></tr><tr><td>statusMessage</td><td>response status message (<code>string</code>)</td></tr></tbody></table><p><strong>Note about <code>body</code>:</strong> If the response header contains
<code>Content-Type: application/json</code> and the body contains valid JSON, this will be
an <code>object</code>. And if the body contains binary content, this will be a buffer.</p><p><code>res</code> also has some optional properties which can be set to control
Cypress-specific behavior:</p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td>throttleKbps</td><td>Maximum data transfer rate of the response (kilobits/second)</td></tr><tr><td>delay</td><td>Minimum network latency or delay to add to the response time (milliseconds)</td></tr></tbody></table><p>Any modifications to the properties of <code>res</code> will be persisted to other response
handlers, and finally merged into the actual incoming HTTP response.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Ending-the-response-with-ressend">Ending the response with <code>res.send()</code><a href="#Ending-the-response-with-ressend" class="hash-link" aria-label="Direct link to Ending-the-response-with-ressend" title="Direct link to Ending-the-response-with-ressend">â€‹</a></h3><p>To end the response phase of the request, call <code>res.send()</code>. Optionally, you can
pass a <a href="#StaticResponse-objects"><code>StaticResponse</code></a> to <code>res.send()</code>, to be merged with the
actual response.</p><p>When <code>res.send()</code> is called, the response phase will end immediately and no
other response handlers will be called for the current request. Here is an
example of how <code>res.send()</code> could be used:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/notification&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword control-flow" style="color:#c792ea;font-style:italic">continue</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#c792ea;font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">===</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;failed&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">      </span><span class="token comment" style="color:#7499AB">// sends a fixture body instead of the existing &#x27;res.body&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">      res</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">send</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">fixture</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;success.json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See the <a href="#StaticResponse-objects"><code>StaticResponse</code> documentation</a> for more information on
the format.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ressend-shorthand"><code>res.send()</code> shorthand<a href="#ressend-shorthand" class="hash-link" aria-label="Direct link to ressend-shorthand" title="Direct link to ressend-shorthand">â€‹</a></h4><p><code>res.send()</code> also supports shorthand, similar to <a href="#Providing-a-stub-response-with-reqreply"><code>req.reply()</code></a>, to
avoid having to specify a <code>StaticResponse</code> object:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// equivalent to `res.send({ body })`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">res</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">send</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// equivalent to `res.send({ body, headers })`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">res</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">send</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> headers</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// equivalent to `res.send({ statusCode, body, headers})`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">res</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">send</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">statusCode</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> body</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> headers</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="Convenience-functions-1">Convenience functions<a href="#Convenience-functions-1" class="hash-link" aria-label="Direct link to Convenience functions" title="Direct link to Convenience functions">â€‹</a></h4><p>There are also two convenience functions available on <code>res</code>:</p><div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">/**</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * Wait for &#x27;delay&#x27; milliseconds before sending the</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * response to the client.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token function-variable function" style="color:#c792ea">setDelay</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">delay</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token builtin" style="color:#ffcb6b">number</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=&gt;</span><span class="token plain"> IncomingHttpResponse</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token comment" style="color:#7499AB">/**</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   * Serve the response at &#x27;throttleKbps&#x27; kilobytes per second.</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token function-variable function" style="color:#c792ea">setThrottle</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">throttleKbps</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token builtin" style="color:#ffcb6b">number</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=&gt;</span><span class="token plain"> IncomingHttpResponse</span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note: calling <code>res.send()</code> will end the response phase and stop the response
from propagating to the next matching response handler in line. See
<a href="#Interception-lifecycle">&quot;Interception lifecycle&quot;</a> for more information.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="StaticResponse-objects"><code>StaticResponse</code> objects<a href="#StaticResponse-objects" class="hash-link" aria-label="Direct link to StaticResponse-objects" title="Direct link to StaticResponse-objects">â€‹</a></h2><p>A <code>StaticResponse</code> represents a
<a href="#Stubbing-a-response">statically defined response (stub)</a>.</p><p>The following properties are available on <code>StaticResponse</code>.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>statusCode</td><td>HTTP response status code</td></tr><tr><td>headers</td><td>HTTP response headers</td></tr><tr><td>body</td><td>Serve a static response body (<code>object</code>, <code>string</code>, <code>ArrayBuffer</code>) (when <code>fixture</code> is omitted).</td></tr><tr><td>fixture</td><td>Serve a fixture as the HTTP response body (allowed when <code>body</code> is omitted). Read the contents with an encoding other than the <a href="/cypress-documentation/api/commands/fixture#Encoding">default for the file type</a>, pass the fixture like <code>path,encoding</code>.</td></tr><tr><td>forceNetworkError</td><td>Force an error by destroying the browser connection</td></tr><tr><td>delay</td><td>Minimum network latency or delay to add to the response time (milliseconds)</td></tr><tr><td>throttleKbps</td><td>Maximum data transfer rate of the response (kilobits/second)</td></tr></tbody></table><p><strong>Note:</strong> All properties are optional.</p><p>You can supply a <code>StaticResponse</code> to Cypress in 3 ways:</p><ul><li>To <code>cy.intercept()</code> as
<a href="#staticResponse-lt-code-gtStaticResponselt-code-gt"><code>an argument</code></a>, to stub a
response to a route: <code>cy.intercept(&#x27;/url&#x27;, staticResponse)</code></li><li>To <a href="#Providing-a-stub-response-with-reqreply"><code>req.reply()</code></a>, to stub a response from a request handler:
<code>req.reply(staticResponse)</code></li><li>To <a href="#Ending-the-response-with-res-send"><code>res.send()</code></a>, to stub a response from a response handler:
<code>res.send(staticResponse)</code></li></ul><p>See
<a href="#With-a-StaticResponse-object">&quot;Stubbing a response with a <code>StaticResponse</code> object&quot;</a>
for examples of stubbing with <code>cy.intercept()</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="Interception-lifecycle">Interception lifecycle<a href="#Interception-lifecycle" class="hash-link" aria-label="Direct link to Interception lifecycle" title="Direct link to Interception lifecycle">â€‹</a></h2><p>The lifecycle of a <code>cy.intercept()</code> interception begins when an HTTP request is
sent from your app that matches one or more registered <code>cy.intercept()</code> routes.
From there, each interception has two phases: request and response.</p><p><code>cy.intercept()</code> routes are matched in reverse order of definition, except for
routes which are defined with <code>{ middleware: true }</code>, which always run first.
This allows you to override existing <code>cy.intercept()</code> declarations by defining
an overlapping <code>cy.intercept()</code>:</p><div class="docsImage_PMlL"><img src="/cypress-documentation/img/api/intercept/middleware-algo.png" alt="Middleware Algorithm"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Request-phase">Request phase<a href="#Request-phase" class="hash-link" aria-label="Direct link to Request phase" title="Direct link to Request phase">â€‹</a></h3><p>The following steps are used to handle the request phase.</p><ol><li>Start with the first matching route according to the above algorithm
(middleware first, followed by handlers in reverse order).</li><li>Was a handler (body, <a href="#StaticResponse-objects"><code>StaticResponse</code></a>, or function)
supplied to <code>cy.intercept()</code>? If not, continue to step 7.</li><li>If the handler was a body or <a href="#StaticResponse-objects"><code>StaticResponse</code></a>, immediately
end the request with that response.</li><li>If the handler was a function, call the function with <code>req</code>, the incoming
request, as the first argument. See <a href="#Intercepted-requests">&quot;Intercepted requests&quot;</a> for more
information on the <code>req</code> object.<ul><li>If <a href="#Providing-a-stub-response-with-reqreply"><code>req.reply()</code></a> is called, immediately end the request phase
with the provided response. See
<a href="#Providing-a-stub-response-with-req-reply">&quot;Providing a stub response with <code>req.reply()</code>&quot;</a>.</li><li>If <a href="#Controlling-the-outbound-request-with-reqcontinue"><code>req.continue()</code></a> is called, immediately end the request
phase, and send the request to the destination server. If a callback is
provided to <a href="#Controlling-the-outbound-request-with-reqcontinue"><code>req.continue()</code></a>, it will be called during the
<a href="#Response-phase">response phase</a></li></ul></li><li>If the handler returned a Promise, wait for the Promise to resolve.</li><li>Merge any modifications to the request object with the real request.</li><li>If there is another matching <code>cy.intercept()</code>, return to step 2 and continue
following steps with that route.</li><li>Send the request outgoing to the destination server and end the request
phase. The <a href="#Response-phase">response phase</a> will begin once a response is
received.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Response-phase">Response phase<a href="#Response-phase" class="hash-link" aria-label="Direct link to Response phase" title="Direct link to Response phase">â€‹</a></h3><p>Once the HTTP response is received from the upstream server, the following steps
are applied:</p><ol><li>Get a list of registered <code>before:response</code> event listeners.</li><li>For each <code>before:response</code> listener (if any), call it with the <a href="#Intercepted-responses"><code>res</code></a>
object.<ul><li>If <a href="#Ending-the-response-with-res-send"><code>res.send()</code></a> is called, end the response phase and merge any
passed arguments with the response.</li><li>If a Promise is returned, await it. Merge any modified response properties
with the real response.</li></ul></li><li>If a <code>req.continue()</code> with callback is declared for this route, call the
callback with the <a href="#Intercepted-responses"><code>res</code></a> object.<ul><li>If <a href="#Ending-the-response-with-res-send"><code>res.send()</code></a> is called, end the response phase and merge any
passed arguments with the response.</li><li>If a Promise is returned, await it. Merge any modified response properties
with the real response.</li></ul></li><li>Get a list of registered <code>response</code> event listeners.</li><li>For each <code>response</code> listener (if any), call it with the <a href="#Intercepted-responses"><code>res</code></a> object.<ul><li>If <a href="#Ending-the-response-with-res-send"><code>res.send()</code></a> is called, end the response phase and merge any
passed arguments with the response.</li><li>If a Promise is returned, await it. Merge any modified response properties
with the real response.</li></ul></li><li>Send the response to the browser.</li><li>Once the response is complete, get a list of registered <code>after:response</code>
event listeners.</li><li>For each <code>after:response</code> listener (if any), call it with the <a href="#Intercepted-responses"><code>res</code></a>
object (minus <code>res.send</code>)<ul><li>If a Promise is returned, await it.</li></ul></li><li>End the response phase.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="Glob-Pattern-Matching-URLs">Glob Pattern Matching URLs<a href="#Glob-Pattern-Matching-URLs" class="hash-link" aria-label="Direct link to Glob Pattern Matching URLs" title="Direct link to Glob Pattern Matching URLs">â€‹</a></h2><p>When <a href="#Matching-url">matching a URL</a>, providing an exact URL to match can be too
restrictive. For example, what if you wanted to run your tests on a different
host?</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token comment" style="color:#7499AB">// match any request that exactly matches the URL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;https://prod.cypress.io/users&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// matches this: https://prod.cypress.io/users</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// ...but not this: https://staging.cypress.io/users</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// ...or this: http://localhost/users</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Glob pattern matching provides the necessary flexibility:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/users&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// matches all of these:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">//   https://prod.cypress.io/users</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">//   https://staging.cypress.io/users</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">//   http://localhost/users</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/users?_limit=+(3|5)&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// matches all of these:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">//   https://prod.cypress.io/users?_limit=3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">//   http://localhost/users?_limit=5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Cypressminimatch">Cypress.minimatch<a href="#Cypressminimatch" class="hash-link" aria-label="Direct link to Cypress.minimatch" title="Direct link to Cypress.minimatch">â€‹</a></h3><p>Under the hood, <code>cy.intercept</code> uses the <a href="/cypress-documentation/api/utilities/minimatch">minimatch</a>
library with the <code>{ matchBase: true }</code> option applied for glob matching and
provides access to it via the <code>Cypress</code> global. This enables you to test your
pattern in your spec or in the Cypress browser console.</p><p>You can invoke the <code>Cypress.minimatch</code> with just two arguments - the URL
(<code>string</code>) and the pattern (<code>string</code>), respectively - and if it yields <code>true</code>,
then you have a match!</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token function" style="color:#c792ea">expect</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token maybe-class-name">Cypress</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">minimatch</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;http://localhost/users?_limit=3&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;**/users?_limit=+(3|5)&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">to</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">be</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token boolean" style="color:#c792ea">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token function" style="color:#c792ea">expect</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token maybe-class-name">Cypress</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">minimatch</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;http://localhost/users?_limit=5&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;/users?_limit=+(3|5)&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token literal-property property" style="color:#80cbc4">matchBase</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#c792ea">true</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">to</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">be</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token boolean" style="color:#c792ea">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token function" style="color:#c792ea">expect</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token maybe-class-name">Cypress</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">minimatch</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;http://localhost/users?_limit=7&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;**/users?_limit=+(3|5)&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">to</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">be</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token boolean" style="color:#c792ea">false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="minimatch-options">minimatch options<a href="#minimatch-options" class="hash-link" aria-label="Direct link to minimatch options" title="Direct link to minimatch options">â€‹</a></h4><p>You can also pass in options (<code>object</code>) as the third argument, one of which is
<code>debug</code> which if set to <code>true</code>, will yield verbose output that could help you
understand why your pattern isn&#x27;t working as you expect:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token maybe-class-name">Cypress</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">minimatch</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;http://localhost/users?_limit=3&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;**/users?_limit=+(3|5)&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token literal-property property" style="color:#80cbc4">debug</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#c792ea">true</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token comment" style="color:#7499AB">// true (plus debug messages)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cyintercept-and-request-caching"><code>cy.intercept()</code> and request caching<a href="#cyintercept-and-request-caching" class="hash-link" aria-label="Direct link to cyintercept-and-request-caching" title="Direct link to cyintercept-and-request-caching">â€‹</a></h2><p><code>cy.intercept()</code> intercepts requests at the network layer. This can cause
confusion when trying to intercept a request that has already been cached by the
browser. If a request is served from the browser cache, it will never hit the
network layer, and <code>cy.intercept()</code> will never fire.</p><p>To see if this is affecting your app, check the Developer Tools. In the
following example, all of the requests circled in red have been served from
cache, and will not send an HTTP request. Thus, they cannot be intercepted by
<code>cy.intercept()</code>:</p><div class="docsImage_PMlL"><img src="/cypress-documentation/img/api/intercept/devtools-cached-responses.png" alt="Screenshot of Chrome DevTools showing cached responses."></div><p>If you would like to intercept resources that normally send cache headers, here
are some workarounds:</p><ul><li>Turn off cache headers on your development server when in testing mode.</li><li>Disable caching on responses by adding a top-level <code>cy.intercept()</code> that
removes cache headers from desired requests. For example:<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token function" style="color:#c792ea">beforeEach</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token function" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token string" style="color:#c3e88d">&#x27;https://api.example.com/**/*&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> middleware</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#c792ea">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">      req</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token function" style="color:#c792ea">on</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;before:response&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">        </span><span class="token comment" style="color:#7499AB">// force all API responses to not be cached</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">        res</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token plain">headers</span><span class="token punctuation" style="color:#89ddff">[</span><span class="token string" style="color:#c3e88d">&#x27;cache-control&#x27;</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&#x27;no-store&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">      </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">  </span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>Chromium-family browsers only: Use <code>remote:debugger:protocol</code> to disable cache
entirely. For more information, see
<a href="https://github.com/cypress-io/cypress/issues/14459#issuecomment-768616195" target="_blank" rel="noopener noreferrer">this comment on issue #14459</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="Command-Log">Command Log<a href="#Command-Log" class="hash-link" aria-label="Direct link to Command Log" title="Direct link to Command Log">â€‹</a></h2><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#c3cee3;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/accounts*&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c792ea;font-style:italic">as</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;accountsGet&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/company&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">companyId</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token number" style="color:#fd9170">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c792ea;font-style:italic">as</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;companyGet&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c3cee3"><span class="token plain">cy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#c792ea">intercept</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;/teams*&#x27;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">[</span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#80cbc4">teamId</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token number" style="color:#fd9170">2</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c792ea;font-style:italic">as</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&#x27;teamsGet&#x27;</span><span class="token punctuation" style="color:#89ddff">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Whenever you create <code>cy.intercept()</code> rules, Cypress will display a new
Instrument Panel called <em>Routes</em>. It will list the routing table in the
Instrument Panel, including the <code>method</code>, <code>RouteMatcher</code>, if the route is
stubbed, any alias, and number of matched requests:</p><div class="docsImage_PMlL"><img src="/cypress-documentation/img/api/intercept/command-log-routes-ui.png" alt="Screenshot of Command Log Routes UI"></div><p>When HTTP requests are made, Cypress will log them in the Command Log and
indicate whether they matched a <code>cy.intercept()</code> by the presence of a yellow
badge on the right hand side:</p><div class="docsImage_PMlL"><img src="/cypress-documentation/img/api/intercept/command-log-fetches.png" alt="Screenshot of example fetches"></div><p>The circular indicator is filled if the request went to the destination server,
but unfilled if the request was stubbed with a response.</p><p>Clicking on a request that matched a <code>cy.intercept()</code> will print additional
information about the request and response to the console:</p><div class="docsImage_PMlL"><img src="/cypress-documentation/img/api/intercept/console-props.png" alt="Screenshot of cy.intercept console output"></div><p><a href="/cypress-documentation/guides/guides/network-requests#Command-Log">Read more about request logging in Cypress.</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="History">History<a href="#History" class="hash-link" aria-label="Direct link to History" title="Direct link to History">â€‹</a></h2><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td><a href="/cypress-documentation/guides/references/changelog#12-2-0">12.2.0</a></td><td>Added <code>resourceType</code> property to <code>req</code> and <code>RouteMatcher</code>.</td></tr><tr><td><a href="/cypress-documentation/guides/references/changelog#7-0-0">7.6.0</a></td><td>Added <code>query</code> option to <code>req</code> (The incoming request object yielded to request handler functions).</td></tr><tr><td><a href="/cypress-documentation/guides/references/changelog#7-0-0">7.0.0</a></td><td>Removed <code>matchUrlAgainstPath</code> option from <code>RouteMatcher</code>, reversed handler ordering, added request events, removed substring URL matching, removed <code>cy.route2</code> alias, added <code>middleware</code> RouteMatcher option, renamed <code>res.delay()</code> to <code>res.setDelay()</code> and <code>res.throttle()</code> to <code>res.setThrottle()</code>.</td></tr><tr><td><a href="/cypress-documentation/guides/references/changelog#6-4-0">6.4.0</a></td><td>Renamed <code>delayMs</code> property to <code>delay</code> (backwards-compatible).</td></tr><tr><td><a href="/cypress-documentation/guides/references/changelog#6-2-0">6.2.0</a></td><td>Added <code>matchUrlAgainstPath</code> option to <code>RouteMatcher</code>.</td></tr><tr><td><a href="/cypress-documentation/guides/references/changelog#6-0-0">6.0.0</a></td><td>Renamed <code>cy.route2()</code> to <code>cy.intercept()</code>.</td></tr><tr><td><a href="/cypress-documentation/guides/references/changelog#6-0-0">6.0.0</a></td><td>Removed <code>experimentalNetworkStubbing</code> option and made it the default behavior.</td></tr><tr><td><a href="/cypress-documentation/guides/references/changelog#5-1-0">5.1.0</a></td><td>Added experimental <code>cy.route2()</code> command under <code>experimentalNetworkStubbing</code> option.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="See-also">See also<a href="#See-also" class="hash-link" aria-label="Direct link to See also" title="Direct link to See also">â€‹</a></h2><ul><li><a href="/cypress-documentation/api/commands/as"><code>.as()</code></a></li><li><a href="/cypress-documentation/api/commands/wait"><code>cy.wait()</code></a></li><li><a href="/cypress-documentation/guides/guides/network-requests">Network Requests Guide</a></li><li><a href="https://github.com/cypress-io/cypress-example-recipes#stubbing-and-spying" target="_blank" rel="noopener noreferrer">Cypress Example Recipes</a></li><li><a href="https://github.com/cypress-io/cypress-example-kitchensink/blob/master/cypress/e2e/2-advanced-examples/network_requests.cy.js" target="_blank" rel="noopener noreferrer">Kitchen Sink Examples</a></li><li><a href="https://glebbahmutov.com/blog/smart-graphql-stubbing/" target="_blank" rel="noopener noreferrer">Smart GraphQL Stubbing in Cypress</a>
blog post</li><li><a href="https://slides.com/bahmutov/how-cy-intercept-works" target="_blank" rel="noopener noreferrer">How cy.intercept works</a></li><li><a href="https://glebbahmutov.com/blog/cypress-intercept-problems/" target="_blank" rel="noopener noreferrer">Cypress <code>cy.intercept()</code> Problems</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/cypress-io/cypress-documentation/tree/main/docs/api/commands/intercept.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-11-02T07:07:26.000Z">Nov 2, 2023</time></b></span></div></div></footer></article></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#Syntax" class="table-of-contents__link toc-highlight">Syntax</a><ul><li><a href="#Usage" class="table-of-contents__link toc-highlight">Usage</a></li><li><a href="#Arguments" class="table-of-contents__link toc-highlight">Arguments</a></li><li><a href="#Yields" class="table-of-contents__link toc-highlight">Yields <icon name="question-circle"></a></li></ul></li><li><a href="#Examples" class="table-of-contents__link toc-highlight">Examples</a><ul><li><a href="#Matching-url" class="table-of-contents__link toc-highlight">Matching <code>url</code></a></li><li><a href="#Matching-method" class="table-of-contents__link toc-highlight">Matching <code>method</code></a></li><li><a href="#Matching-with-RouteMatcher" class="table-of-contents__link toc-highlight">Matching with RouteMatcher</a></li><li><a href="#Pattern-Matching" class="table-of-contents__link toc-highlight">Pattern Matching</a></li><li><a href="#Aliasing-an-intercepted-route" class="table-of-contents__link toc-highlight">Aliasing an intercepted route</a></li><li><a href="#Aliasing-individual-requests" class="table-of-contents__link toc-highlight">Aliasing individual requests</a></li><li><a href="#Waiting-on-a-request" class="table-of-contents__link toc-highlight">Waiting on a request</a></li><li><a href="#Stubbing-a-response" class="table-of-contents__link toc-highlight">Stubbing a response</a></li><li><a href="#Using-the-routeHandler-function" class="table-of-contents__link toc-highlight">Using the <strong><code>routeHandler</code></strong> function</a></li><li><a href="#Disabling-logs-for-a-request" class="table-of-contents__link toc-highlight">Disabling logs for a request</a></li><li><a href="#Intercepting-a-response" class="table-of-contents__link toc-highlight">Intercepting a response</a></li><li><a href="#RequestResponse-Modification-with-routeHandler" class="table-of-contents__link toc-highlight">Request/Response Modification with <code>routeHandler</code></a></li></ul></li><li><a href="#Intercepted-requests" class="table-of-contents__link toc-highlight">Intercepted requests</a><ul><li><a href="#Request-object-properties" class="table-of-contents__link toc-highlight">Request object properties</a></li><li><a href="#Controlling-the-outbound-request-with-reqcontinue" class="table-of-contents__link toc-highlight">Controlling the outbound request with <code>req.continue()</code></a></li><li><a href="#Providing-a-stub-response-with-reqreply" class="table-of-contents__link toc-highlight">Providing a stub response with <code>req.reply()</code></a></li><li><a href="#Request-events" class="table-of-contents__link toc-highlight">Request events</a></li></ul></li><li><a href="#Intercepted-responses" class="table-of-contents__link toc-highlight">Intercepted responses</a><ul><li><a href="#Response-object-properties" class="table-of-contents__link toc-highlight">Response object properties</a></li><li><a href="#Ending-the-response-with-ressend" class="table-of-contents__link toc-highlight">Ending the response with <code>res.send()</code></a></li></ul></li><li><a href="#StaticResponse-objects" class="table-of-contents__link toc-highlight"><code>StaticResponse</code> objects</a></li><li><a href="#Interception-lifecycle" class="table-of-contents__link toc-highlight">Interception lifecycle</a><ul><li><a href="#Request-phase" class="table-of-contents__link toc-highlight">Request phase</a></li><li><a href="#Response-phase" class="table-of-contents__link toc-highlight">Response phase</a></li></ul></li><li><a href="#Glob-Pattern-Matching-URLs" class="table-of-contents__link toc-highlight">Glob Pattern Matching URLs</a><ul><li><a href="#Cypressminimatch" class="table-of-contents__link toc-highlight">Cypress.minimatch</a></li></ul></li><li><a href="#cyintercept-and-request-caching" class="table-of-contents__link toc-highlight"><code>cy.intercept()</code> and request caching</a></li><li><a href="#Command-Log" class="table-of-contents__link toc-highlight">Command Log</a></li><li><a href="#History" class="table-of-contents__link toc-highlight">History</a></li><li><a href="#See-also" class="table-of-contents__link toc-highlight">See also</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/cypress-io/cypress-realworld-app" target="_blank" rel="noopener noreferrer" class="footer__link-item">Real World App<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://learn.cypress.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Real World Testing<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UC-EOsTo2l2x39e4JmSaWNRQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cypress.io YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/cypress-io/cypress/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://on.cypress.io/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/Cypress_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Solutions</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.cypress.io/features" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cypress App<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.cypress.io/cloud" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cypress Cloud<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://migrator.cypress.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cypress Migrator<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.cypress.io/about-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">About<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.cypress.io/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cypress Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.cypress.io/careers" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.cypress.io/support" target="_blank" rel="noopener noreferrer" class="footer__link-item">Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2023 Cypress.io. All rights reserved.</div></div></div></footer></div>
<script src="/cypress-documentation/assets/js/runtime~main.dded4550.js"></script>
<script src="/cypress-documentation/assets/js/main.1ce2fba1.js"></script>
</body>
</html>